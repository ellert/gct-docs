<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <title>GT 6.0 Component Guide to Public Interfaces: XIO</title>
</bookinfo>
<chapter id="xio-apis" xreflabel="Public Interface Guide">
<title>XIO APIs</title>
<section id="_programming_model_overview">
<title>Programming Model Overview</title>
<simpara>Globus XIO is based on an event based asynchronous programming model.
This model is described in great detail at:
<ulink url="#globus-async">Asynchronous Event Handling</ulink>. In short, with Globus
XIO, connections are opened and closed. While open, read and write
requests are posted with a callback function pointer given by the user.
When the event completes, the given callback is called.</simpara>
</section>
<section id="_component_api">
<title>Component API</title>
<simpara>You can find documentation of the XIO library at:</simpara>
<simpara><ulink url="http://www.globus.org/api/c/globus%5fxio/html/index.html">http://www.globus.org/api/c/globus_xio/html/index.html</ulink></simpara>
<simpara>For information on the internationalization API, see
<ulink url="../..ccommonlib/pi/index.html#ccommonlib-apis">../..ccommonlib/pi/index.html#ccommonlib-apis</ulink>.</simpara>
</section>
</chapter>
<chapter id="xio-pi-env-vars">
<title>Environmental variables</title>
<section id="xio-env-var">
<title>Environmental variables for XIO</title>
<simpara>The vast majority of the environment variables that affect the Globus
XIO framework are defined by the driver in use. The following are links
to descriptions of the more common driver environment variables:</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5ftcp%5f%5fdriver%5f%5fenvs.html">TCP Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5ffile%5f%5fdriver%5f%5fenvs.html">File Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5fgsi%5f%5fdriver%5f%5fenvs.html">GSI Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5fudp%5f%5fdriver%5f%5fenvs.html">UDP Driver Environment Variables</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
</chapter>
<chapter id="xio-pi-error-codes">
<title>Errors</title>
<section id="xio-error-codes">
<title>Errors</title>
<table
frame="all"
rowsep="1" colsep="1"
>
<title>XIO Errors</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> Error Code </entry>
<entry align="left" valign="top"> Definition </entry>
<entry align="left" valign="top"> Possible Solutions</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara><literal>Operation was canceled</literal></simpara></entry>
<entry align="left" valign="top"><simpara>An I/O operation has been canceled by a close or a cancel</simpara></entry>
<entry align="left" valign="top"><simpara>In most cases this will be intentionally performed by the
  application developer.  In unexpected cases the applciation
  developer should verify that there is not a race condition
  relating to closing a handle.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Operation timed out</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Occurs when the application developer associates a timeout with
  a handle&#8217;s I/O operations.  If no I/O is performed before the
  timeout expires this error will be triggered.</simpara></entry>
<entry align="left" valign="top"><simpara>The remote side of connection might be hung and busy.  The network
   could have higher latencies than expected.  The filesystem might
   be over worked.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>An end of file occurred</literal></simpara></entry>
<entry align="left" valign="top"><simpara>This occurs when and EOF is detected on the file descriptor</simpara></entry>
<entry align="left" valign="top"><simpara>When doing file I/O this like means you read to the end of the file
  and thus you are finished and should now close it.  On network
  connections however it means the socket was closed on the remote
  end.  This can happen it the remote side suddenly dies (seg-fault
  is common here) or if the remote side chooses to close the connection.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Contact string invalid</literal></simpara></entry>
<entry align="left" valign="top"><simpara>A poorly formed contact string was passed in to open</simpara></entry>
<entry align="left" valign="top"><simpara>Verify the format of the contact string with the documentation of
  the drivers in use.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Memory allocation failed on XXXX</literal></simpara></entry>
<entry align="left" valign="top"><simpara>malloc failed.  The system is likely quite overloaded</simpara></entry>
<entry align="left" valign="top"><simpara>Free up memory in your application</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal> System error in XXXX</literal></simpara></entry>
<entry align="left" valign="top"><simpara>A low level system error occurred.  The errno and errstring should
    indicate more information.</simpara></entry>
<entry align="left" valign="top"><simpara></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Invalid stack</literal></simpara></entry>
<entry align="left" valign="top"><simpara>The requested stack does not meet XIO standards</simpara></entry>
<entry align="left" valign="top"><simpara>Most likely a transport driver is not on the bottom of the stack,
  or 2 transport drivers are in the stack.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Operation already registered</literal></simpara></entry>
<entry align="left" valign="top"><simpara>With certain common drivers like TCP and FILE, only one specific
  operations can be registered at a time (1 read, 1 write).  If
  another operation of the same type is posted to the handle before
  receiving the previous operations callback, this error can occur.</simpara></entry>
<entry align="left" valign="top"><simpara>Restructure the application code so that it waits for the callback
  before registering the next IO operation.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Unexpected state</literal></simpara></entry>
<entry align="left" valign="top"><simpara>The internal logic of XIO came across a logical path that should
  not be possible.  Often times this is due to application memory
  corruption or trying to perform an IO operation on a closed or
  otherwise invalid handle.</simpara></entry>
<entry align="left" valign="top"><simpara>Use valgrind or some sort of memory managment tool to verify there
  is no memory corruption.  Try to recreate the problem in a small
  program.  Submit the program and the memory trace to the
  <ulink url="https://globus.atlassian.net">Globus bug tracker</ulink>.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Driver in handle has been unloaded</literal></simpara></entry>
<entry align="left" valign="top"><simpara>A driver associated with the offending operation has already been
  unloaded by the application code.</simpara></entry>
<entry align="left" valign="top"><simpara>Verify that you are not unloading drivers until they are no longer
  in use.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Module not activated</literal></simpara></entry>
<entry align="left" valign="top"><simpara>globus_module_activate(GLOBUS_XIO_MODULE); has not been called.</simpara></entry>
<entry align="left" valign="top"><simpara>Call this before making any other XIO API calls.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
</chapter>
</book>
