<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <title>GT 6.0 MyProxy: Developer&#8217;s Guide</title>
</bookinfo>
<preface>
<title></title>
<simpara>Please refer to the <ulink url="http://myproxy.ncsa.uiuc.edu/devguide.html">MyProxy
Developer&#8217;s Guide</ulink> on the MyProxy web site.</simpara>
</preface>
<chapter id="myproxy-developer-beforeyoubegin">
<title>Before you begin</title>
<section id="myproxy-features">
<title>Feature summary</title>
<simpara>Supported Features</simpara>
<itemizedlist>
<listitem>
<simpara>
Users can obtain certificates and trust roots from the MyProxy CA using <emphasis role="strong"><literal>myproxy-logon</literal></emphasis>.
</simpara>
</listitem>
<listitem>
<simpara>
Users can store and retrieve multiple X.509 proxy credentials using <emphasis role="strong"><literal>myproxy-init</literal></emphasis> and <emphasis role="strong"><literal>myproxy-logon</literal></emphasis>.
</simpara>
</listitem>
<listitem>
<simpara>
Users can store and retrieve multiple X.509 end-entity credentials using <emphasis role="strong"><literal>myproxy-store</literal></emphasis> and <emphasis role="strong"><literal>myproxy-retrieve</literal></emphasis>.
</simpara>
</listitem>
<listitem>
<simpara>
Users and administrators can manage trustroots (CA certificates and CRLs) using <emphasis role="strong"><literal>myproxy-logon</literal></emphasis> and <emphasis role="strong"><literal>myproxy-get-trustroots</literal></emphasis>.
</simpara>
</listitem>
<listitem>
<simpara>
Administrators can load the repository with X.509 end-entity credentials on the users' behalf using <emphasis role="strong"><literal>myproxy-admin-load-credential</literal></emphasis>.
</simpara>
</listitem>
<listitem>
<simpara>
Administrators can use the <emphasis role="strong"><literal>myproxy-admin-adduser</literal></emphasis> command to create user credentials and load them into the MyProxy repository.
</simpara>
</listitem>
<listitem>
<simpara>
Administrators can use the <emphasis role="strong"><literal>myproxy-admin-addservice</literal></emphasis> command to create host credentials and load them into the MyProxy repository.
</simpara>
</listitem>
<listitem>
<simpara>
Users and administrators can set access control policies on the credentials in the repository.
</simpara>
</listitem>
<listitem>
<simpara>
If allowed by policy, job managers (such as Condor-G) can renew credentials before they expire.
</simpara>
</listitem>
<listitem>
<simpara>
The MyProxy server enforces local site passphrase policies using a configurable external call-out.
</simpara>
</listitem>
</itemizedlist>
<simpara>Deprecated Features</simpara>
<itemizedlist>
<listitem>
<simpara>
None
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="myproxy-platforms">
<title>Tested platforms</title>
<simpara>Tested Platforms for MyProxy:</simpara>
<table id="tested-platforms"
frame="all"
rowsep="1" colsep="1"
>
<title>Tested Platforms</title>
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry align="left" valign="top"> Operating System </entry>
<entry align="left" valign="top"> Distribution </entry>
<entry align="left" valign="top"> Version(s) </entry>
<entry align="left" valign="top"> Architecture(s)</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top" morerows="9"><simpara>Linux</simpara></entry>
<entry align="left" valign="top" morerows="1"><simpara>CentOS</simpara></entry>
<entry align="left" valign="top"><simpara>5, 6</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>7</simpara></entry>
<entry align="left" valign="top"><simpara>x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Fedora</simpara></entry>
<entry align="left" valign="top"><simpara>20, 21, 22</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top" morerows="1"><simpara>Red Hat Enterprise Linux</simpara></entry>
<entry align="left" valign="top"><simpara>5, 6</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>7</simpara></entry>
<entry align="left" valign="top"><simpara>x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top" morerows="1"><simpara>Scientific Linux</simpara></entry>
<entry align="left" valign="top"><simpara>5, 6</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>7</simpara></entry>
<entry align="left" valign="top"><simpara>x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>SUSE Linux Enterprise Server</simpara></entry>
<entry align="left" valign="top"><simpara>11SP3</simpara></entry>
<entry align="left" valign="top"><simpara>x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Debian</simpara></entry>
<entry align="left" valign="top"><simpara>6, 7, 8</simpara></entry>
<entry align="left" valign="top"><simpara>i386, amd64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Ubuntu</simpara></entry>
<entry align="left" valign="top"><simpara>12.04LTS, 14.04LTS, 14.10, 15.04</simpara></entry>
<entry align="left" valign="top"><simpara>i386, amd64</simpara></entry>
</row>
<row>
<entry align="left" valign="top" namest="col_1" nameend="col_2"><simpara>Mac OS X</simpara></entry>
<entry align="left" valign="top"><simpara>10.6-10.10</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Solaris</simpara></entry>
<entry align="left" valign="top"><simpara>OmniOS</simpara></entry>
<entry align="left" valign="top"><simpara>r151006</simpara></entry>
<entry align="left" valign="top"><simpara>x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top" morerows="1"><simpara>Windows 7</simpara></entry>
<entry align="left" valign="top" namest="col_2" nameend="col_3"><simpara>Cygwin</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
<row>
<entry align="left" valign="top" namest="col_2" nameend="col_3"><simpara>MingW64</simpara></entry>
<entry align="left" valign="top"><simpara>i386, x86_64</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="myproxy-compatibility">
<title>Backward compatibility summary</title>
<simpara>All MyProxy versions are fully backwards compatible.</simpara>
</section>
<section id="myproxy-dependencies">
<title>Technology dependencies</title>
<simpara>MyProxy depends on the following GT component:</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url=""></ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="myproxy-security-considerations">
<title>MyProxy Security Considerations</title>
<simpara>You should choose a well-protected host to run the myproxy-server on.
Consult with security-aware personnel at your site. You want a host that
is secured to the level of a Kerberos KDC, that has limited user access,
runs limited services, and is well monitored and maintained in terms of
security patches.</simpara>
<simpara>For a typical myproxy-server installation, the host on which the
myproxy-server is running must have /etc/grid-security created and a
host certificate installed. In this case, the myproxy-server will run as
root so it can access the host certificate and key.</simpara>
</section>
</chapter>
<chapter id="myproxy-developer-scenarios">
<title>Usage scenarios</title>
<simpara>Please refer to the <ulink url="http://myproxy.ncsa.uiuc.edu/userguide.html">MyProxy
User Guide</ulink> for MyProxy usage scenarios.</simpara>
</chapter>
<chapter id="myproxy-developer-tutorials">
<title>Tutorials</title>
<simpara>There are no tutorials available at this time.</simpara>
</chapter>
<chapter id="myproxy-developer-archdes">
<title>Architecture and design overview</title>
<simpara>The MyProxy system architecture and design is described in the following
two publications:</simpara>
<itemizedlist>
<listitem>
<simpara>
J. Basney, M. Humphrey, and V. Welch. <ulink url="http://www.ncsa.uiuc.edu/~jbasney/myproxy-spe.pdf">The MyProxy Online Credential Repository</ulink>. Software: Practice and Experience, 2005.
</simpara>
</listitem>
<listitem>
<simpara>
J. Novotny, S. Tuecke, and V. Welch. <ulink url="http://www.globus.org/alliance/publications/papers/myproxy.pdf">An Online Credential Repository for the Grid: MyProxy</ulink>. Proceedings of the Tenth International Symposium on High Performance Distributed Computing (HPDC-10), IEEE Press, August 2001.
</simpara>
</listitem>
</itemizedlist>
</chapter>
<part id="myproxyUser" xreflabel="User's Guide">
<title>GT 6.0 MyProxy: User&#8217;s Guide</title>
<chapter id="myproxy-user-introduction">
<title>Introduction</title>
<simpara>Please refer to the <ulink url="http://myproxy.ncsa.uiuc.edu/userguide.html">MyProxy
User&#8217;s Guide</ulink> on the MyProxy web site.</simpara>
</chapter>
<chapter id="myproxy-cmd">
<title>Command-line tools</title>
<simpara>Please refer to the <ulink url="http://myproxy.ncsa.uiuc.edu/man/">MyProxy Reference
Manual</ulink> for documentation of the MyProxy command-line tools.</simpara>
</chapter>
<chapter id="myproxy-user-troubleshooting">
<title>Troubleshooting</title>
<section id="myproxy-error-codes">
<title>Errors</title>
<table
frame="all"
rowsep="1" colsep="1"
>
<title>MyProxy Errors</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> Error Code </entry>
<entry align="left" valign="top"> Definition </entry>
<entry align="left" valign="top"> Possible Solutions</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara><literal>MyProxy server name does not match expected name</literal></simpara></entry>
<entry align="left" valign="top"><simpara>This error appears as a mutual authentication failure or a server authentication failure, and the error message should list two names: the expected name of the MyProxy server and the actual authenticated name.<?asciidoc-br?>
By default, the MyProxy clients expect the MyProxy server to be running with a
host certificate that matches the target hostname.  This error can occur when
running the MyProxy server under a non-host certificate or if the server is
running on a machine with multiple hostnames.&lt;/simpara&gt; The MyProxy clients
authenticate the identity of the MyProxy server to avoid sending passphrases
and credentials to rogue servers.<?asciidoc-br?>
If the expected name contains an IP address, your system is unable to do a
reverse lookup on that address to get the canonical hostname of the server,
indicating either a problem with that machine&#8217;s DNS record or a problem with
the resolver on your system.</simpara></entry>
<entry align="left" valign="top"><simpara>If the server name shown in the error message is acceptable, set the <literal>MYPROXY_SERVER_DN</literal> environment variable to that name to resolve the problem.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Error in bind(): Address already in use</literal></simpara></entry>
<entry align="left" valign="top"><simpara>This error indicates that the myproxy-server port (default: 7512) is in use
  by another process, probably another myproxy-server instance. You cannot run
  multiple instances of the myproxy-server on the same network port.</simpara></entry>
<entry align="left" valign="top"><simpara>If you want to run multiple instances of the myproxy-server on a machine, you
  can specify different ports with the <emphasis>-p</emphasis> option, and then give the same <emphasis>-p</emphasis>
  option to the MyProxy commands to tell them to use the myproxy-server on that
  port.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>grid-proxy-init failed</literal></simpara></entry>
<entry align="left" valign="top"><simpara>This error indicates that the grid-proxy-init command failed when
   myproxy-init attempted to run it, which implies a problem with the
   underlying Globus installation.</simpara></entry>
<entry align="left" valign="top"><simpara>Run <emphasis role="strong"><literal>grid-proxy-init -debug -verify</literal></emphasis> for more information.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>User not authorized</literal></simpara></entry>
<entry align="left" valign="top"><simpara>An error from the myproxy-server saying you are "not authorized" to complete
  an operation typically indicates that the <literal>myproxy-server.config</literal> file
  settings are restricting your access to the myproxy-server. It is possible
  that the myproxy-server is running with the default <literal>myproxy-server.config</literal>
  file, which does not authorize any operations.</simpara></entry>
<entry align="left" valign="top"><simpara>See <ulink url="../myproxy/admin/index.html#myproxy-configuring">Configuring MyProxy</ulink>
  for more information.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>Unable to verify remote side&#8217;s credentials</literal></simpara></entry>
<entry align="left" valign="top"><simpara>An error saying "Unable to verify remote side&#8217;s credentials," "Couldn&#8217;t
  verify the remote certificate," or "alert bad certificate" often indicates
  that the client or server&#8217;s certificate is signed by
    an untrusted Certification Authority (CA). The client must have a CA
    certificate and signing policy file installed in
    <literal>/etc/grid-security/certificates</literal> for the CA that signed the server&#8217;s
    certificate. Likewise, the server must have a CA certificate and
    signing policy file installed in <literal>/etc/grid-security/certificates</literal> for
    the CA that signed the client&#8217;s certificate.</simpara></entry>
<entry align="left" valign="top"><simpara>See <ulink url="../../gsic/admin/index.html#gsic-configuring">Configuring
    Certificates</ulink> for more information.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="myproxy-errors">
<title>Additional MyProxy Troubleshooting</title>
<simpara>For additional information, see the
<ulink url="http://myproxy.ncsa.uiuc.edu/troubleshooting.html">MyProxy
Troubleshooting Page</ulink> at NCSA.</simpara>
</section>
</chapter>
<chapter id="myproxy-usage">
<title>Usage statistics collection</title>
<section id="myproxy-usage-stats">
<title>MyProxy usage statistics collection</title>
<simpara>By default, the myproxy-server will send a UDP packet containing usage
information to usage-stats.cilogon.org:4810 after serving each request.
See the <ulink url="http://myproxy.ncsa.uiuc.edu/privacy">MyProxy Privacy Policy</ulink> for
details. You can see the Globus Usage Statistics policy
<ulink url="/toolkit/docs/latest-stable/Usage_Stats.html">here</ulink>.</simpara>
</section>
</chapter>
<chapter id="myproxy-developer-relateddocs">
<title>Related Documentation</title>
<simpara>For additional information about MyProxy, see the
<ulink url="http://myproxy.ncsa.uiuc.edu/">MyProxy Project Home Page</ulink> at NCSA.</simpara>
</chapter>
</part>
</book>
