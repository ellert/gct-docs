<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <date>2015-06-11</date>
</bookinfo>
<?dbhtml filename="appendix.html" ?>
<part id="_gt_6_0_installation_appendix">
<title>GT 6.0 Installation Appendix</title>
<chapter id="gtadmin-advanced-build">
<title>Advanced Installation for GT 6.0</title>
<simpara>This section introduces building from Git, and references the advanced
installation sections of component documentation.</simpara>
<section id="gtadmin-install-nondefault">
<title>Advanced Installation</title>
<section id="gtadmin-install-build-git">
<title>Building from Git</title>
<simpara>The Globus Toolkit is available for download from github. See
<ulink url="https://github.com/globus/globus-toolkit/tree/globus%5f6%5fbranch">https://github.com/globus/globus-toolkit/tree/globus_6_branch</ulink>
to branch or checkout the toolkit source code.</simpara>
<simpara>After checking out the toolkit, run <emphasis role="strong"><literal>autoreconf -i</literal></emphasis> in the
checkout root to generate configure scripts for building the toolkit
components.</simpara>
</section>
<section id="gtadmin-install-build-source">
<title>Building a specific package from source</title>
<simpara>If you need to build a specific package from the source installer, you
can use the per-package make targets that exist in the source
installer&#8217;s Makefile. Instead of simply running "make" in the steps
above, you can, for example, run "make globus_common" which will build
the globus_common package and its dependencies, or "make
globus_common-only" which will build exactly and only the globus_common
package. Similar targets exist for each package.</simpara>
</section>
<section id="gtadmin-install-components">
<title>Detailed installation instructions for these components</title>
<simpara>The following is a list of links to more detailed installation
information available for the following components:</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gram5/admin/index.html#gram5-admin-install">../..gram5/admin/index.html#gram5-admin-install</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..gridftp/admin/index.html#gridftp-admin-installing">../..gridftp/admin/index.html#gridftp-admin-installing</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..myproxy/admin/index.html#myproxy-admin-installing">../..myproxy/admin/index.html#myproxy-admin-installing</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..gsiopenssh/admin/index.html#gsiopenssh-admin-installing-configure-options">../..gsiopenssh/admin/index.html#gsiopenssh-admin-installing-configure-options</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="gtadmin-install-build-update">
<title>Building an update package without an installer</title>
<simpara>If you need to build an updated package that has been released without a
source installer (for example, a security update to a package, or a new
version of MyProxy,) you can use the familiar <emphasis role="strong"><literal>configure; make; make
install</literal></emphasis> sequence to rebuild that package.</simpara>
</section>
</section>
</chapter>
<chapter id="gtadmin-packaging">
<title>Packaging details</title>
<section id="gtadmin-makefile">
<title>The makefile</title>
<simpara>You do not have to build every subcomponent of this release. The
makefile specifies subtargets for different functional subpieces.</simpara>
<itemizedlist>
<listitem>
<simpara>
gram: GRAM5
</simpara>
</listitem>
<listitem>
<simpara>
gridftp: GridFTP
</simpara>
</listitem>
</itemizedlist>
<simpara>Note that all of these targets require the "install" target also. So,
for instance, to build GridFTP alone, you would run:</simpara>
<screen>$ ./configure --prefix=/path/to/install
$ make gridftp install</screen>
</section>
<section id="_linking_with_globus_toolkit_libraries">
<title>Linking with Globus Toolkit Libraries</title>
<simpara>Since GT 2.0, the toolkit has included a script called
globus-makefile-header that can be used to assemble the cflags and link
line information when linking a program with libraries included in the
toolkit. This script would walk the package metadata dependency tree to
ensure that all needed flags were included, without duplicates. This
method worked, and continues to work in GT 6.0, but we consider it to be
obsolete, as we have added support for using link:
<ulink url="http://www.freedesktop.org/wiki/Software/pkg-config">pkg-config</ulink></simpara>
<simpara>Pkg-config is very similar in concept to globus-makefile-header, but it
has gained widespread adoption across a range of unix platforms.</simpara>
<simpara>To get the cflags and link line information to link to the
globus-ftp-client library, for example, you could</simpara>
<screen>$ pkg-config --cflags --libs globus-ftp-client</screen>
<simpara>Each Globus Toolkit library has a pkg-config metadata file that is
installed as part of its devel package.</simpara>
<simpara>For more information about pkg-config, please see
<ulink url="http://www.freedesktop.org/wiki/Software/pkg-config">the pkg-config
homepage.</ulink></simpara>
</section>
</chapter>
<chapter id="gtadmin-env-var">
<title>Environment Variables in GT 6.0</title>
<section id="_common_runtime_environmental_variables">
<title>Common Runtime Environmental Variables</title>
<section id="xio-env-var">
<title>Environmental variables for XIO</title>
<simpara>The vast majority of the environment variables that affect the Globus
XIO framework are defined by the driver in use. The following are links
to descriptions of the more common driver environment variables:</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5ftcp%5f%5fdriver%5f%5fenvs.html">TCP Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5ffile%5f%5fdriver%5f%5fenvs.html">File Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5fgsi%5f%5fdriver%5f%5fenvs.html">GSI Driver Environment Variables</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://www.globus.org/api/c-globus-6.0/globus%5fxio/html/group%5f%5fudp%5f%5fdriver%5f%5fenvs.html">UDP Driver Environment Variables</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="ccommonlib-env-var">
<title>Environment variables for C Common Libraries</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_HOSTNAME</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to the fully qualified name of the local machine&#8217;s hostname.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_DOMAIN_NAME</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to the domain name to be used to qualify the local machine&#8217;s hostname.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_ERROR_OUTPUT</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to 1 to cause Globus libraries to display error information to stderr.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_ERROR_VERBOSE</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to 1 to enable verbose error messages.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_I18N</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to 1 to attempt to use localized messages. (Currently not working)
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_LOCATION</emphasis>
</term>
<listitem>
<simpara>
     Set this variable to the path where the Globus Toolkit is installed, so that Globus tools can find libraries and data files. This is only needed if the Globus Toolkit was built with the source installer.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_THREAD_MODEL</emphasis>
</term>
<listitem>
<simpara>
     Set to the name of a thread model to control the operation of the Globus event driver. Valid values are (depending on the platform) <literal>none</literal> for non-threaded operation (the default), <literal>pthread</literal> for POSIX threads, or <literal>windows</literal> for Windows threads.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="_security_environmental_variables">
<title>Security Environmental Variables</title>
<section id="gsic-env-var">
<title>Environmental Variables for GSI C</title>
<section id="gsic-env-credentials">
<title>Credentials</title>
<simpara>Credentials are looked for in the following order:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
service credential
</simpara>
</listitem>
<listitem>
<simpara>
host credential
</simpara>
</listitem>
<listitem>
<simpara>
proxy credential
</simpara>
</listitem>
<listitem>
<simpara>
user credential
</simpara>
</listitem>
</orderedlist>
<simpara><literal>X509_USER_PROXY</literal> specifies the path to the proxy credential. If
<literal>X509_USER_PROXY</literal> is not set, the proxy credential is created (by
<emphasis role="strong"><literal>grid-proxy-init</literal></emphasis>) and searched for (by client programs) in an
operating-system-dependent local temporary file.</simpara>
<simpara><literal>X509_USER_CERT</literal> and <literal>X509_USER_KEY</literal> specify the path to the end
entity (user, service, or host) certificate and corresponding private
key. The paths to the certificate and key files are determined as
follows:</simpara>
<simpara>For service credentials:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If <literal>X509_USER_CERT</literal> and <literal>X509_USER_KEY</literal> exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>/etc/grid-security/service/servicecert.pem</literal> and  and <literal>/etc/grid-security/service/servicekey.pem</literal> exist and contain a valid certificate and key, those files are used. exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>$GLOBUS_LOCATION/etc/grid-security/service/servicecert.pem</literal> and  and <literal>$GLOBUS_LOCATION/etc/grid-security/service/servicekey.pem</literal> exist and contain a valid certificate and key, those files are used. exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>service/servicecert.pem</literal> and  and <literal>service/servicekey.pem</literal> in the user&#8217;s  in the user&#8217;s <literal>.globus</literal> directory exist and contain a valid certificate and key, those files are used. directory exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
</orderedlist>
<simpara>For host credentials:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If <literal>X509_USER_CERT</literal> and <literal>X509_USER_KEY</literal> exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>/etc/grid-security/hostcert.pem</literal> and  and <literal>/etc/grid-security/hostkey.pem</literal> exist and contain a valid certificate and key, those files are used. exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>$GLOBUS_LOCATION/etc/hostcert.pem</literal> and  and <literal>$GLOBUS_LOCATION/etc/hostkey.pem</literal> exist and contain a valid certificate and key, those files are used. exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>hostcert.pem</literal> and  and <literal>hostkey.pem</literal> in the user&#8217;s  in the user&#8217;s <literal>.globus</literal> directory, exist and contain a valid certificate and key, those files are used. directory, exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
</orderedlist>
<simpara>For user credentials:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If <literal>X509_USER_CERT</literal> and <literal>X509_USER_KEY</literal> exist and contain a valid certificate and key, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if the files <literal>usercert.pem</literal> and  and <literal>userkey.pem</literal> exist in the user&#8217;s  exist in the user&#8217;s <literal>.globus</literal> directory, those files are used. directory, those files are used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if a PKCS-12 file called <literal>usercred.p12</literal> exists in the user&#8217;s  exists in the user&#8217;s <literal>.globus</literal> directory, the certificate and key are read from that file. directory, the certificate and key are read from that file.
</simpara>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-gridmapfile">
<title>Gridmap file</title>
<simpara><literal>GRIDMAP</literal> specifies the path to the grid map file, which is used to
map distinguished names (found in certificates) to local names (such as
login accounts). The location of the grid map file is determined as
follows:
. If the <literal>GRIDMAP</literal> environment variable is set, the grid map file location is the value of that environment variable.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Otherwise:
</simpara>
<itemizedlist>
<listitem>
<simpara>
If the user is root (uid 0), then the grid map file is <literal>/etc/grid-security/grid-mapfile</literal>..
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, the grid map file is <literal>$HOME/.gridmap</literal>..
</simpara>
</listitem>
</itemizedlist>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-trustedca">
<title>Trusted CAs directory</title>
<simpara><literal>X509_CERT_DIR</literal> is used to specify the path to the trusted
certificates directory. This directory contains information about which
CAs are trusted (including the CA certificates themselves) and, in some
cases, configuration information used by <emphasis role="strong"><literal>grid-cert-request</literal></emphasis> to
formulate certificate requests. The location of the trusted certificates
directory is determined as follows:
. If the <literal>X509_CERT_DIR</literal> environment variable is set, the trusted certificates directory is the value of that environment variable.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Otherwise, if <literal>$HOME/.globus/certificates</literal> exists, that directory is the trusted certificates directory. exists, that directory is the trusted certificates directory.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if <literal>/etc/grid-security/certificates</literal> exists, that directory is the trusted certificates directory. exists, that directory is the trusted certificates directory.
</simpara>
</listitem>
<listitem>
<simpara>
Finally, if <literal>$GLOBUS_LOCATION/share/certificates</literal> exists, then it is the trusted certificates directory. exists, then it is the trusted certificates directory.
</simpara>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-gsiauthz">
<title>GSI authorization callout configuration file</title>
<simpara><literal>GSI_AUTHZ_CONF</literal> is used to specify the path to the GSI authorization
callout configuration file. This file is used to configure authorization
callouts used by both the gridmap and the authorization API. The
location of the GSI authorization callout configuration file is
determined as follows:
. If the <literal>GSI_AUTHZ_CONF</literal> environment variable is set, the authorization callout configuration file location is the value of this environment variable.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Otherwise, if <literal>/etc/grid-security/gsi-authz.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if <literal>$GLOBUS_LOCATION/etc/gsi-authz.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
<listitem>
<simpara>
Finally, if <literal>$HOME/.gsi-authz.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-gaaauthz">
<title>GAA (Generic Authorization and Access control) configuration file</title>
<simpara><literal>GSI_GAA_CONF</literal> is used to specify the path to the GSI GAA (Generic
Authorization and Access control)
        configuration file. This file
is used to configure policy language specific plugins to the GAA-API.
The location of the GSI GAA configuration file is determined as follows:
. If the <literal>GSI_GAA_CONF</literal> environment variable is set, the GAA configuration file location is the value of this environment variable.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Otherwise, if <literal>/etc/grid-security/gsi-gaa.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
<listitem>
<simpara>
Otherwise, if <literal>$GLOBUS_LOCATION/etc/gsi-gaa.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
<listitem>
<simpara>
Finally, if <literal>$HOME/.gsi-gaa.conf</literal> exists, then this file is used. exists, then this file is used.
</simpara>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-gridsecurity">
<title>Grid security directory</title>
<simpara><literal>GRID_SECURITY_DIR</literal> specifies a path to a directory containing
configuration files that specify default values to be placed in
certificate requests. This environment variable is used only by the
<emphasis role="strong"><literal>grid-cert-request</literal></emphasis> and <emphasis role="strong"><literal>grid-default-ca</literal></emphasis> commands.</simpara>
<simpara>The location of the grid security directory is determined as follows:
. If the <literal>GRID_SECURITY_DIR</literal> environment variable is set, the grid security directory is the value of that environment variable.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If the configuration files exist in <literal>/etc/grid-security</literal>, the grid security directory is that directory., the grid security directory is that directory.
</simpara>
</listitem>
<listitem>
<simpara>
if the configuration files exist in <literal>$GLOBUS_LOCATION/etc</literal>, the grid security directory is that directory., the grid security directory is that directory.
</simpara>
</listitem>
</orderedlist>
</section>
<section id="gsic-env-tls">
<title>Using TLS</title>
<simpara><literal>GLOBUS_GSSAPI_FORCE_TLS</literal> specifies whether to use TLS by default when
establishing a security context. The default behavior if this is not set
is to use SSLv3.</simpara>
</section>
<section id="gsic-env-name">
<title>Name Comparisons</title>
<simpara><literal>GLOBUS_GSSAPI_NAME_COMPATIBILITY</literal> specifies what name matching
algorithms are supported by GSSAPI for mutual authentication and
<emphasis role="strong"><literal>gss_compare_name</literal></emphasis>. This variable may be set to any of the
following values:</simpara>
<variablelist>
<varlistentry>
<term>
<literal>STRICT_GT2</literal>
</term>
<listitem>
<simpara>
    Strictly backward-compatible with GT 2.0 name matching. X.509
    subjectAltName values are ignored. Names with hyphens are treated as
    wildcarded as described in the
    <ulink url="../../gsic/admin/index.html#gsic-security-considerations">security
    considerations</ulink> documentation. Name matching will rely on canonical host
    name associated with connection IP addresses.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<literal>STRICT_RFC2818</literal>
</term>
<listitem>
<simpara>
    Support <ulink url="http://www.ietf.org/rfc/rfc2818.txt">RFC 2818</ulink> server identity
    processing. Hyphen characters are treated as normal part of a host name.
    DNSName and IPAddress subjectAltName extensions are matched against the
    host and port passed to GSSAPI. If subjectAltName is present, X.509
    SubjectName is ignored.
<literal>HYBRID</literal>:
    Support a hybrid of the two previous name matching algorithms, liberally
    matching both hyphen wildcards, canonical names associated with IP
    addresses, and subjectAltName extensions.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>If this variable is not set, the <literal>HYBRID</literal> behavior is used.</simpara>
</section>
</section>
<section id="myproxy-env-var">
<title>Environmental variables for MyProxy</title>
<simpara>Please refer to the <ulink url="http://myproxy.ncsa.uiuc.edu/man/">MyProxy Reference
Manual</ulink> for documentation of MyProxy environment variable interfaces.</simpara>
</section>
<section id="gsiopenssh-env-var">
<title>Environmental variables for GSI-OpenSSH</title>
<simpara>The GSI-enabled OpenSSHD needs to be able to find certain files and
directories in order to properly function.</simpara>
<simpara>The items that OpenSSHD needs to be able to locate, their default
location and the environment variable to override the default location
are:</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Host key</emphasis>
</simpara>
</listitem>
</itemizedlist>
<sidebar>
<simpara>Default
location: /etc/grid-security/hostkey.pemOverride with X509_USER_KEY
environment variable</simpara>
</sidebar>
<itemizedlist>
<listitem>
<simpara>
Host certificate
</simpara>
</listitem>
</itemizedlist>
<sidebar>
<simpara>Default
location: /etc/grid-security/hostcert.pemOverride with X509_USER_CERT
environment
variable</simpara>
</sidebar>
<itemizedlist>
<listitem>
<simpara>
Grid map file
</simpara>
</listitem>
</itemizedlist>
<sidebar>
<simpara>Default
location: /etc/grid-security/grid-mapfileOverride with GRIDMAP
environment
variable</simpara>
</sidebar>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Certificate directory</emphasis>
</simpara>
</listitem>
</itemizedlist>
<sidebar>
<simpara>Default
location: /etc/grid-security/certificatesOverride with X509_CERT_DIR
environment variable</simpara>
</sidebar>
</section>
</section>
<section id="_data_management_environmental_variables">
<title>Data Management Environmental Variables</title>
<section id="gridftp-env-var">
<title>Environment variables for GridFTP</title>
<simpara>The GridFTP server or client libraries do not read any environment
variable directly, but the security and networking related variables
described below may be useful.</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gsic/pi/index.html#gsic-env-var">Non-WS (General) Authentication &amp; Authorization Environment Variables</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..xio/pi/index.html#xio-env-var">XIO Network Driver Environment Variables</ulink>.
</simpara>
</listitem>
</itemizedlist>
</section>
</section>
</chapter>
<chapter id="gtadmin-simpleca">
<title>Installing SimpleCA</title>
<section id="simpleca-admin-installing">
<title>Building and Installing</title>
<section id="simpleca-users">
<title>Create users</title>
<simpara>Make sure you have the following users on your machine:</simpara>
<itemizedlist>
<listitem>
<simpara>
Your <emphasis role="strong">user</emphasis> account, which will be used to run the client programs.
</simpara>
</listitem>
<listitem>
<simpara>
A <emphasis role="strong"><literal>simpleca</literal></emphasis> account, which will be used to administer the Simple CA. This is created automatically if you install SimpleCA from RPM or Debian packages.
</simpara>
</listitem>
<listitem>
<simpara>
A generic <emphasis role="strong"><literal>globus</literal></emphasis> account, if you will be building from the source installer.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="simpleca-install">
<title>Install SimpleCA</title>
<simpara>SimpleCA can be installed in three ways, from a debian package, from an
RPM package, and from the source installer. These installation methods
are described in <ulink url="../..//admin/install/index.html">../..//admin/install/index.html</ulink></simpara>
<simpara>To install SimpleCA from binary packages, install the packages
<emphasis role="strong"><literal>globus-simple-ca</literal></emphasis> and <emphasis role="strong"><literal>globus-gsi-cert-utils-progs</literal></emphasis> and
their dependencies. On Debian based systems, use the command</simpara>
<screen>root# apt-get install</screen>
<simpara>On RPM-based systems, use the command</simpara>
<screen>root# yum install</screen>
<simpara>To install SimpleCA from the source installer, build the
<literal>globus_simple_ca</literal> and <literal>globus_gsi_cert_utils</literal> installer targets
with the command</simpara>
<screen>globus% make</screen>
<simpara>Afterward, run the command</simpara>
<screen>globus% make install</screen>
</section>
</section>
<section id="simpleca-create-ca">
<title>Creating a SimpleCA</title>
<simpara>If you install the globus-simpleca Debian or RPM package, it will
automatically create a <emphasis role="strong"><literal>simpleca</literal></emphasis> user and a Simple CA in
<literal>/var/lib/globus/simple_ca</literal>. If want to create a custom CA, or are
using the source installer, you&#8217;ll need to do the following. Otherwise,
you can skip to the . If want to create a custom CA, or are using the
source installer, you&#8217;ll need to do the following. Otherwise, you can
skip to the <ulink url="../../simpleca/admin/index.html#simplecaAdmin-using">../../simpleca/admin/index.html#simplecaAdmin-using</ulink>
chapter of the SimpleCA documentation, as these steps have already been
done.</simpara>
<section id="_create_simpleca_administrator_account">
<title>Create SimpleCA Administrator Account</title>
<simpara>Create a user to adminster the SimpleCA. You can use the the
<emphasis role="strong"><literal>globus</literal></emphasis> user you used to build Globus, or another user that you
create. For the purposes of this document, we&#8217;ll assume a user named
<emphasis role="strong"><literal>simpleca</literal></emphasis>. Log in to that user, and run the
<emphasis role="strong"><literal>grid-ca-create</literal></emphasis> command. This will prompt for information needed
to name the certificate, how to contact the CA administrator, lifetime
of the CA certificate, and passphrase, and will then generate the new CA
certificate and private key. Command-line options described in
<ulink url="../../simpleca/admin/index.html#grid-ca-create">../../simpleca/admin/index.html#grid-ca-create</ulink> can be used to
avoid some of these prompts.</simpara>
</section>
<section id="_invoking_emphasis_role_strong_literal_grid_ca_create_literal_emphasis">
<title>Invoking <emphasis role="strong"><literal>grid-ca-create</literal></emphasis></title>
<simpara>If you are creating a SimpleCA for testing purposes, you can use the
<emphasis>-noint</emphasis> command-line option to <emphasis role="strong"><literal>grid-ca-create</literal></emphasis> to use the
default values for all prompts like this:</simpara>
<screen>simpleca% grid-ca-create -noint</screen>
<simpara>This will create a SimpleCA in the <emphasis role="strong"><literal>simpleca</literal></emphasis>'s home directory
with the passphrase <literal>globus</literal>. You can then move on to the
<ulink url="../../simpleca/admin/index.html#simplecaAdmin-using">../../simpleca/admin/index.html#simplecaAdmin-using</ulink> chapter of
this document. For step-by-step details to create a customized SimpleCA,
continue reading this chapter.</simpara>
<simpara>As the <emphasis role="strong"><literal>simpleca</literal></emphasis> user, run the command <emphasis role="strong"><literal>grid-ca-create</literal></emphasis>,
and you&#8217;ll see output like this:</simpara>
<screen>simpleca% grid-ca-create
    C e r t i f i c a t e    A u t h o r i t y    S e t u p

This script will setup a Certificate Authority for signing Globus
users certificates.  It will also generate a simple CA package
that can be distributed to the users of the CA.

The CA information about the certificates it distributes will
be kept in:

/home/simpleca/.globus/simpleCA</screen>
<simpara>This intro screen shows the path that the CA will be created into (in
this example, <literal>/home/simpleca/.globus/simpleCA</literal>). The other commands
needed by SimpleCA will automatically look in that path by default when
invoked by the ). The other commands needed by SimpleCA will
automatically look in that path by default when invoked by the
<emphasis role="strong"><literal>simpleca</literal></emphasis> user.</simpara>
</section>
<section id="simpleca-subjectname">
<title>Configure the subject name</title>
<simpara>The <emphasis role="strong"><literal>grid-ca-create</literal></emphasis> program next prompts you for information
about the name of CA you wish to create:</simpara>
<screen>The unique subject name for this CA is:
cn=Globus Simple CA, ou=simpleCA-elephant.globus.org, ou=GlobusTest, o=Grid

Do you want to keep this as the CA subject (y/n) [y]:</screen>
<simpara>To accept the default name, enter <literal>y</literal>. To choose a different name,
type <literal>n</literal>, after which you will be prompted by</simpara>
<screen>Enter a unique subject name for this CA:</screen>
<simpara>The subject name is an X.509 distinguished name. Typical name component
type abbreviations used in Grids are:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">cn</emphasis>
</term>
<listitem>
<simpara>
     Represents "common name". It identifies this particular certificate as the CA
                    Certificate within the "GlobusTest/simpleCA-elephant.globus.org" domain, which in this case is Globus Simple CA.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">ou</emphasis>
</term>
<listitem>
<simpara>
     Represents "organizational unit". It identifies this CA from other CAs created by SimpleCA by other people. The second "ou" is specific to your hostname (in this case GlobusTest).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">o</emphasis>
</term>
<listitem>
<simpara>
     Represents "organization". It identifies the Grid.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="simpleca-email">
<title>Configure the CA&#8217;s email</title>
<simpara>The next prompt looks like this:</simpara>
<screen>Enter the email of the CA (this is the email where certificate
requests will be sent to be signed by the CA) [simpleca@elephant.globus.org]:</screen>
<simpara>Enter the email address where you intend to receive certificate
requests. It should be your real email address that you check, not the
address of the globus user. When users request certificates with
<emphasis role="strong"><literal>grid-cert-request</literal></emphasis>, they will be instructed to send the request
to this address.</simpara>
</section>
<section id="simpleca-expiration">
<title>Configure the expiration date</title>
<simpara>Then you&#8217;ll see:</simpara>
<screen>The CA certificate has an expiration date. Keep in mind that
once the CA certificate has expired, all the certificates
signed by that CA become invalid.  A CA should regenerate
the CA certificate and start re-issuing ca-setup packages
before the actual CA certificate expires.  This can be done
by re-running this setup script.  Enter the number of DAYS
the CA certificate should last before it expires.
[default: 5 years 1825 days]:</screen>
<simpara>This is the number of days for which the CA certificate is valid. Once
this time expires, the CA certificate will have to be recreated.</simpara>
<simpara>To accept the default, hit <emphasis role="strong"><literal>enter</literal></emphasis>, or otherwise, enter a value in
days.</simpara>
</section>
<section id="simpleca-passphrase">
<title>Create a Passphrase to Encrypt the CA&#8217;s Private Key</title>
<simpara>The next prompt will be for the passphrase for the CA&#8217;s private key. It
will be used to decrypt the CA&#8217;s private key when signing certificates.
It should be hard to guess, as its compromise might compromise all the
certificates signed by the CA. You will be prompted twice for the
passphrase, to verify that you typed it correctly. Enter the passphrase
at these prompts.</simpara>
<screen>Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:</screen>
</section>
<section id="simpleca-packageoutput">
<title>SimpleCA Distribution Files</title>
<simpara>Finally <emphasis role="strong"><literal>grid-ca-create</literal></emphasis> will create a tarball containing the
public information about the CA, including its public certificate,
signing policy, and supported X.509v3 extensions. This information is
needed on machines that will be trusting the CA, and also on machines
which will be used to request certificates from this CA.</simpara>
<simpara>Since we didn&#8217;t run in this example as root, <emphasis role="strong"><literal>grid-ca-create</literal></emphasis> will
not be able to write the CA files to system paths, so it displays a
warning message indicating that. We can use the tarball output here, or
packages described below to install the CA support files on this and
other machines.</simpara>
<simpara>The package output summary looks like this:</simpara>
<screen>Insufficient permissions to install CA into the trusted certifiicate
directory (tried ${sysconfdir}/grid-security/certificates and
${datadir}/certificates)
Creating RPM source tarball... done
        globus_simple_ca_68ea3306</screen>
<simpara>This information will be important for setting up other machines in your
grid. The number <emphasis>68ea3306</emphasis> in the last line is known as your <emphasis role="strong">CA
hash</emphasis>. It is an 8 digit hexadecimal string which is a hash of the
subject name of the CA certificate.</simpara>
<simpara>The tarball contains Debian and RPM package metadata, so that it can be
compiled to a binary package which can be easily installed on this and
other systems on your Grid. It can also be packaged as a GPT setup
package for compatibility with older versions of the Globus Toolkit.</simpara>
</section>
<section id="simpleca-binarypkgs">
<title>Generating Binary CA Packages</title>
<simpara>The <ulink url="../../simpleca/admin/index.html#grid-ca-package">../../simpleca/admin/index.html#grid-ca-package</ulink> command can
be used to generate RPM, debian, or legacy GPT packages for a SimpleCA,
or for any other CA which is installed on a host. These packages can
make it easy to distribute the CA certificate and policy to other hosts
with which you want to establish Grid trust relationships.</simpara>
<section id="_generating_rpm_packages">
<title>Generating RPM Packages</title>
<simpara>To generate an RPM package for the CA which we created, use the
following command:</simpara>
<screen>simpleca% grid-ca-package -r -cadir ~/.globus/simpleCA
Creating RPM source tarball... done
        globus_simple_ca_68ea3306.tar.gz
Creating RPM binary.../home/simpleca/globus-simple-ca-68ea3306</screen>
<simpara>The resulting rpm package will be placed in the current directory. As
root, you can install this via the <emphasis role="strong"><literal>yum</literal></emphasis> or <emphasis role="strong"><literal>rpm</literal></emphasis> tools.
This package can then be installed on any RPM-based system.</simpara>
</section>
<section id="_generating_debian_packages">
<title>Generating Debian Packages</title>
<simpara>To generate an Debian package for the CA which we created, use the
following command:</simpara>
<screen>simpleca% grid-ca-package -d -cadir ~/.globus/simpleCA
    Creating RPM source tarball... done
        globus_simple_ca_68ea3306.tar.gz
Creating debian binary...dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2</screen>
<simpara>The resulting debian package will be placed in the current directory. As
root, you can install this via the <emphasis role="strong"><literal>dpkg</literal></emphasis> tool.</simpara>
</section>
<section id="_generating_gpt_packages">
<title>Generating GPT Packages</title>
<simpara>The <emphasis role="strong"><literal>grid-ca-package</literal></emphasis> command can also generate GPT packages in
the form similar to previous versions of the Globus Toolkit. This is
done with the <emphasis>-g</emphasis> and <emphasis>-b</emphasis> command-line options. See
<ulink url="../../simpleca/admin/index.html#grid-ca-package">../../simpleca/admin/index.html#grid-ca-package</ulink> for more details.</simpara>
</section>
</section>
</section>
<section id="_using_a_simpleca">
<title>Using a SimpleCA</title>
<simpara>As a CA, your main task will be to sign certificates. To sign a
certificate request, use the tool <emphasis role="strong"><literal>grid-ca-sign</literal></emphasis>. This tool reads
a certificate request (such as those created by
<ulink url="../../gsic/user/index.html#grid-cert-request">../../gsic/user/index.html#grid-cert-request</ulink>) and creates a
certificate signed by the CA certificate with the public key from in the
certificate request. This indicates that you confirm that the identity
of the certificate matches its name. You can use the <emphasis role="strong"><literal>openssl</literal></emphasis>
command to view the contents of the certificate request.</simpara>
<section id="_examining_a_certificate_request">
<title>Examining a Certificate Request</title>
<simpara>To examine a certificate request, use the command <emphasis role="strong"><literal>openssl req -text
-in </literal></emphasis>, as shown in the following example.</simpara>
<example>
<title>Examine a Certificate Request</title>
<screen>simpleca% openssl req -noout -text -in certreq.pem
Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: o=Grid, OU=GlobusTest, OU=simpleCA-elephant.globus.org, OU=local, CN=Joe User
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (1024 bit)
                Modulus (1024 bit):
                    79:bd:a7:29:16:77:4c:e9:82:d3:73:a0:25:34:c7:
                    25:07:67:b3:2d:11:c1:e2:c9:b1:ec:41:20:a7:9a:
                    b7:2f:ee:d4:88:78:14:ff:d4:f2:f9:1b:d3:56:bc:
                    37:6f:f0:06:ea:b0:6f:70:12:a8:34:ac:8e:be:98:
                    00:b9:b8:ec:39:b5:6b:23:ad:1b:00:62:4b:cc:79:
                    97:cc:56:fb:54:7b:03:6d:a7:76:27:4e:ce:bd:94:
                    d0:eb:59:6b:25:c5:30:b0:47:15:bc:11:d5:7e:ff:
                    04:13:70:de:3b:8f:80:65:ae:63:82:61:38:f9:c6:
                    03:4a:92:b0:de:6f:bb:0a:bd
                Exponent: 65537 (0x10001)
        Attributes:
        Requested Extensions:
            Netscape Cert Type:
                SSL CA, S/MIME CA, Object Signing CA
    Signature Algorithm: sha1WithRSAEncryption
        85:70:a6:5d:de:be:61:45:83:48:43:8d:4b:4b:4a:79:79:98:
        0d:6c:d4:a9:96:26:41:a4:c2:94:10:92:ad:eb:ad:c5:3c:bf:
        d6:4e:84:0a:db:46:96:a9:52:5b:90:cc:6a:d1:57:73:27:98:
        9e:e2:8c:9a:7f:b4:ab:a8:28:2b:02:98:a2:d8:69:73:5e:12:
        ad:5b:de:0c:6e:60:e0:0f:2c:ad:8d:b9:59:3b:d3:49:19:52:
        e0:e1:8a:57:f2:c3:a6:4d:b9:2c:5c:58:ef:0e:59:84:55:8e:
        16:fc:f4:39:82:13:6f:28:a9:59:e3:c8:f1:4e:87:75:33:4f:
        ae:be</screen>
<simpara>In this case, you see a certificate request with the subject
distinguished name <literal>o=Grid, OU=GlobusTest,
OU=simpleCA-elephant.globus.org, OU=local, CN=Joe User</literal>.</simpara>
</example>
</section>
<section id="_signing_a_certificate_request">
<title>Signing a Certificate Request</title>
<simpara>If you are satisfied with the certificate request and are willing to
sign it, use the <emphasis role="strong"><literal>grid-ca-sign</literal></emphasis> command to do so. The command will
store a copy of the newly signed certificate in the SimpleCA directory,
so that you can keep track of what you&#8217;ve signed, and will also write it
to the value of the <emphasis>-out</emphasis> parameter. Transmit this result file back to
the user which requested the certificate.</simpara>
<example>
<title>Sign with <emphasis role="strong"><literal>grid-ca-sign</literal></emphasis></title>
<screen>simpleca% grid-ca-sign -in certreq.pem -out cert.pem


To sign the request
please enter the password for the CA key:

The new signed certificate is at: /home/simpleca/.globus/simpleCA/newcerts/01.pem</screen>
</example>
<simpara>Once you&#8217;ve signed the certificate, if it is a user certificate, you
must communicate it back to the user, perhaps via email.</simpara>
</section>
<section id="_revoking_a_certificate">
<title>Revoking a Certificate</title>
<simpara>SimpleCA does not yet provide a convenient interface to revoke a signed
certificate, but it can be done with the <emphasis role="strong"><literal>openssl</literal></emphasis> command.</simpara>
<example>
<title>Revoke a certificate</title>
<screen>simpleca% openssl ca -config ~/.globus/simpleCA/grid-ca-ssl.conf -revoke ~/.globus/simpleCA/newcerts/01.pem
Using configuration from /home/simpleca/.globus/simpleCA/grid-ca-ssl.conf
Enter pass phrase for /home/simpleca/.globus/simpleCA/private/cakey.pem:
Revoking Certificate 01.
Data Base Updated</screen>
</example>
<simpara>Once a certificate is revoked, you can generate a Certificate Revocation
List (CRL) for your CA, which will be a signed list of certificates
which have been revoked. Sites which use your CA will need to keep the
CRL up to date to be able to reject revoked certificates. This CRL can
be generated with an <emphasis role="strong"><literal>openssl</literal></emphasis> command. See <literal>ca(1)</literal> for details
about how to control the CRL lifetime and other options.</simpara>
<example>
<title>Create CRL</title>
<screen>simpleca% openssl ca -config ~/.globus/simpleCA/grid-ca-ssl.conf -gencrl &gt;
Using configuration from /home/simpleca/.globus/simpleCA/grid-ca-ssl.conf
Enter pass phrase for /home/simpleca/.globus/simpleCA/private/cakey.pem:</screen>
</example>
<simpara>The output file <literal>CAHASH.crl</literal> (based on the hash of your CA subject
name) should be distributed to sites which trust your CA, so that they
can install it into the trusted certificate directory.  (based on the
hash of your CA subject name) should be distributed to sites which trust
your CA, so that they can install it into the trusted certificate
directory.</simpara>
</section>
<section id="_renewing_a_ca">
<title>Renewing a CA</title>
<simpara>The <emphasis role="strong"><literal>openssl</literal></emphasis> command can be used to renew a CA certificate. This
will generate a new CA certificate with the same subject name and
private key as before, but valid for a different time interval. This new
certificate packaged and distributed as before using
<ulink url="../../simpleca/admin/index.html#grid-ca-package">../../simpleca/admin/index.html#grid-ca-package</ulink>.</simpara>
<example>
<title>Renew CA Certificate</title>
<screen>simpleca% openssl req -key ~/.globus/simpleCA/private/cakey.pem -new -x509 -days 1825 -out newca.pem -config ~/.globus/simpleCA/grid-ca-ssl.conf
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
 -----
Level 0 Organization [Grid]:
Level 0 Organizational Unit [GlobusTest]:
Level 1 Organizational Unit [simpleCA-elephant.globus.org]:
Name (E.g., John M. Smith) []:Globus Simple CA</screen>
</example>
<important>
<simpara>The Subject Name of the new certificate must match <emphasis role="strong">exactly</emphasis> the
previous certificate name, or clients will not recognize it as the
correct certificate.</simpara>
</important>
</section>
</section>
<section id="simpleca-admin-security_considerations">
<title>Security Considerations</title>
<section id="simpleca-security_considerations">
<title>Security considerations for SimpleCA</title>
<simpara>The operator of a CA must protect the private key of the CA. It should
not be stored unencrypted or on a network filesystem.</simpara>
<simpara>Simple CA enforces the subject name policies in the simple CA&#8217;s
configuration files. If modified, the signing_policy file distributed to
clients of the CA must also be modified.</simpara>
</section>
</section>
</chapter>
<chapter id="gtadmin-troubleshooting">
<title>Troubleshooting your installation</title>
<simpara>The following is a list of links that take you to information about
troubleshooting your installation by component</simpara>
<itemizedlist>
<listitem>
<simpara>
Common Runtime components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..xio/admin/index.html#xio-admin-troubleshooting">XIO</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..ccommonlib/developer/index.html#ccommonlib-developer-troubleshooting">C Common Libraries</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Security components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gsic/admin/index.html#gsic-admin-troubleshooting">GSI C</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..myproxy/admin/index.html#myproxy-user-troubleshooting">MyProxy</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..gsiopenssh/admin/index.html#gsiopenssh-admin-troubleshooting">GSI-OpenSSH</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Data Management components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gridftp/admin/index.html#gridftp-troubleshooting">GridFTP</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Execution Management components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gram5/admin/index.html#gram5-admin-troubleshooting">GRAM5</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</chapter>
<chapter id="gtadmin-config-details">
<title>Detailed Configuration by Component</title>
<simpara>The following is a list of links that take you to information about
detailed configuration for each component.</simpara>
<itemizedlist>
<listitem>
<simpara>
Common Runtime components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..xio/admin/index.html#xio-configuring">XIO</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Security components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gsic/admin/index.html#gsic-configuring">GSI C</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..myproxy/admin/index.html#myproxy-configuring">MyProxy</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../..gsiopenssh/admin/index.html#gsiopenssh-configuring">GSI-OpenSSH</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Data Management components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gridftp/admin/index.html#gridftp-configuring">GridFTP</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
Execution Management components
</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../..gram5/admin/index.html#gram5-configuring">GRAM5</ulink>
</simpara>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</chapter>
<chapter id="gtadmin-sec-considerations">
<title>Security Considerations in GT 6.0</title>
<section id="gtadmin-sec-consid-common-runtime">
<title>Common Runtime</title>
<section id="xio-security-considerations">
<title>Security considerations for XIO</title>
<simpara>Globus XIO is a framework for creating network protocols. Several
existing protocols, such as TCP, come built into the framework. XIO
itself introduces no known security risks. However, all network
applications expose systems to the risks inherent when outsiders can
connect to them. Also included in the XIO distribution is the GSI
driver, which provides a driver that allows for secure connections.</simpara>
</section>
</section>
<section id="gtadmin-sec-consid-security">
<title>Security</title>
<section id="gsic-security-considerations">
<title>Security considerations for GSI C</title>
<simpara>During host authorization, the toolkit treats host names of the form
<literal>hostname-</literal><emphasis>ANYTHING</emphasis><literal>.edu</literal> as equivalent to <literal>hostname.edu</literal>. This means that if
a service was set up to do host authorization and hence accept the certificate
<literal>hostname.edu</literal>, it would also accept certificates with DNs
<literal>hostname-</literal><emphasis>ANYTHING</emphasis><literal>.edu</literal>.</simpara>
<simpara>The feature is in place to allow a multi-homed host following a
"hostname-interface" naming convention, to have a single host certificate. For
example, host <literal>grid.test.edu</literal> would also accept the likes of <literal>grid-1.test.edu</literal>
or <literal>grid-foo.test.edu</literal>.</simpara>
<note>
<simpara>The string <emphasis>ANYTHING</emphasis> matches only the name of the host and not domain
components. This means that <literal>hostname.edu</literal> will not match
<literal>hostname-foo.sub.edu</literal>, but will match <literal>host-foo.edu</literal>.</simpara>
<simpara>If a host was set up to accept <literal>hostname-1.edu</literal>, it will not accept
<literal>hostname-</literal><emphasis>ANYTHING</emphasis><literal>.edu</literal> but will accept <literal>hostname.edu</literal>. That is, only one
of the names being compared may contain the hyphen character in the host name.</simpara>
</note>
<simpara>In GT 6.0, it is possible to disable this behavior, by setting the enviornment variable <literal>GLOBUS_GSSAPI_NAME_COMPATIBILITY</literal> to <literal>STRICT_RFC2818</literal>.</simpara>
</section>
<section id="myproxy-security-considerations">
<title>MyProxy Security Considerations</title>
<simpara>You should choose a well-protected host to run the myproxy-server on.
Consult with security-aware personnel at your site. You want a host that
is secured to the level of a Kerberos KDC, that has limited user access,
runs limited services, and is well monitored and maintained in terms of
security patches.</simpara>
<simpara>For a typical myproxy-server installation, the host on which the
myproxy-server is running must have /etc/grid-security created and a
host certificate installed. In this case, the myproxy-server will run as
root so it can access the host certificate and key.</simpara>
</section>
<section id="gsi-openssh-security-considerations">
<title>GSI-OpenSSH Security Considerations</title>
<simpara>GSI-OpenSSH is a modified version of <ulink url="http://www.openssh.org/">OpenSSH</ulink>
and includes full OpenSSH functionality. For more information on OpenSSH
security, see the <ulink url="http://www.openssh.org/security.html">OpenSSH Security</ulink>
page.</simpara>
</section>
</section>
<section id="gtadmin-sec-consid-data">
<title>Data Management</title>
<section id="gridftp-security-considerations">
<title>Security Considerations</title>
<section id="gridftp-security-config">
<title>Ways to configure your server</title>
<simpara>There are various ways to configure your GridFTP server that provide
varying levels of security. For more information, see
<ulink url="../..gridftp/admin/index.html">../..gridftp/admin/index.html</ulink>.</simpara>
</section>
<section id="gridftp-security-firewalls">
<title>Firewall requirements</title>
<simpara>If the GridFTP <emphasis role="strong">server</emphasis> is behind a firewall:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Contact your network administrator to open up port 2811 (for GridFTP
control channel connection) and a range of ports (for GridFTP data
channel connections) for the incoming connections. If the firewall
blocks the outgoing connections, open up a range of ports for outgoing
connections as well.
</simpara>
</listitem>
<listitem>
<simpara>
Set the environment variable GLOBUS_TCP_PORT_RANGE:
</simpara>
<screen>export GLOBUS_TCP_PORT_RANGE=min,max</screen>
</listitem>
</orderedlist>
<simpara>where <emphasis>min</emphasis>,<emphasis>max</emphasis> specify the port range that you have opened for the
incoming connections on the firewall. This restricts the listening ports
of the GridFTP server to this range. Recommended range is 1000 (e.g.,
50000-51000) but it really depends on how much use you expect.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If you have a firewall blocking the outgoing connections and you have
opened a range of (local) ports, set the environment variable
GLOBUS_TCP_SOURCE_RANGE:
</simpara>
<screen>export GLOBUS_TCP_SOURCE_RANGE=min,max</screen>
</listitem>
</orderedlist>
<simpara>where <emphasis>min</emphasis>,<emphasis>max</emphasis> specify the port range that you have opened for the
outgoing connections on the firewall. This restricts the GridFTP server
to bind to a local port in this range for outbound connections.
Recommended range is twice the range used for GLOBUS_TCP_PORT_RANGE,
because if parallel TCP streams are used for transfers, the listening
port would remain the same for each connection but the connecting port
would be different for each connection.</simpara>
<note>
<simpara>If the server is behind NAT, the <literal>--data-interface &lt;real ip/hostname&gt;</literal>
option needs to be used on the server.</simpara>
</note>
<simpara>If the GridFTP <emphasis role="strong">client</emphasis> is behind a firewall:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Contact your network administrator to open up a range of ports (for
GridFTP data channel connections) for the incoming connections. If the
firewall blocks the outgoing connections, open up a range of ports for
outgoing connections as well.
</simpara>
</listitem>
<listitem>
<simpara>
Set the environment variable GLOBUS_TCP_PORT_RANGE
</simpara>
<screen>export GLOBUS_TCP_PORT_RANGE=min,max</screen>
</listitem>
</orderedlist>
<simpara>where min,max specify the port range that you have opened for the
incoming connections on the firewall. This restricts the listening ports
of the GridFTP client to this range. Recommended range is 1000 (e.g.,
50000-51000) but it really depends on how much use you expect.</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
If you have a firewall blocking the outgoing connections and you have
opened a range of ports, set the environment variable
GLOBUS_TCP_SOURCE_RANGE:
</simpara>
<screen>export GLOBUS_TCP_PORT_RANGE=min,max</screen>
</listitem>
</orderedlist>
<simpara>where min,max specify the port range that you have opened for the
outgoing connections on the firewall. This restricts the GridFTP client
to bind to a local port in this range for outbound connections.
Recommended range is twice the range used for GLOBUS_TCP_PORT_RANGE,
because if parallel TCP streams are used for transfers, the listening
port would remain the same for each connection but the connecting port
would be different for each connection.</simpara>
<simpara>Additional information on Globus Toolkit Firewall Requirements is
available <ulink url="http://www.globus.org/toolkit/security/firewalls/">here</ulink>.</simpara>
</section>
</section>
</section>
<section id="_execution_management">
<title>Execution Management</title>
<section id="gram5-security-considerations">
<title>Security Considerations</title>
<section id="_gatekeeper_security_considerations">
<title>Gatekeeper Security Considerations</title>
<simpara>GRAM5 runs different parts of itself under different privilege levels.
The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> runs as root, and uses its root privilege
to access the host&#8217;s private key. It uses the grid map file to map Grid
Certificates to local user ids and then uses the <emphasis role="strong"><literal>setuid()</literal></emphasis>
function to change to that user and execute the
<emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program</simpara>
</section>
<section id="_job_manager_security_considerations">
<title>Job Manager Security Considerations</title>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program runs as a local non-root account.
It receives a delegated limited proxy certificate from the GRAM5 client
which it uses to access Grid storage resources via GridFTP and to
authenticate job signals (such as client cancel requests), and send job
state callbacks to registered clients. This proxy is generally
short-lived, and is automatically removed by the job manager when the
job completes.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program uses a publicly-writable
directory for job state files. This directory has the <emphasis role="strong">sticky</emphasis> bit
set, so users may not remove other users files. Each file is named by a
UUID, so it should be unique.</simpara>
</section>
<section id="_fork_seg_module_security_considerations">
<title>Fork SEG Module Security Considerations</title>
<simpara>The Fork Scheduler Event Generator module uses a globally writable file
for job state change events. This is not recommended for production use.</simpara>
</section>
</section>
</section>
</chapter>
<chapter id="gtadmin-config-usage-stats">
<title>Usage Statistics</title>
<simpara>The following components collect usage statistics as outlined here
(along with information about how to opt-out):
<ulink url="../../Usage_Stats.html">Usage Statistics in GT</ulink></simpara>
<section id="_data_management_usage_statistics">
<title>Data Management Usage Statistics</title>
<section id="gridftp-usage">
<title>Usage statistics collection by the Globus Alliance</title>
<section id="gridftp-usage-stats">
<title>GridFTP-specific usage statistics</title>
<simpara>The following GridFTP-specific usage statistics are sent in a UDP packet
at the end of each transfer, in addition to the standard header
information described in the
<ulink url="/toolkit/docs/{$shortversion}/{$version}/Usage_Stats.html">Usage
Stats</ulink> section.</simpara>
<itemizedlist>
<listitem>
<simpara>
Start time of the transfer
</simpara>
</listitem>
<listitem>
<simpara>
End time of the transfer
</simpara>
</listitem>
<listitem>
<simpara>
Version string of the server
</simpara>
</listitem>
<listitem>
<simpara>
TCP buffer size used for the transfer
</simpara>
</listitem>
<listitem>
<simpara>
Block size used for the transfer
</simpara>
</listitem>
<listitem>
<simpara>
Total number of bytes transferred
</simpara>
</listitem>
<listitem>
<simpara>
Number of parallel streams used for the transfer
</simpara>
</listitem>
<listitem>
<simpara>
Number of stripes used for the transfer
</simpara>
</listitem>
<listitem>
<simpara>
Type of transfer (STOR, RETR, LIST)
</simpara>
</listitem>
<listitem>
<simpara>
FTP response code&#8201;&#8212;&#8201;Success or failure of the transfer
</simpara>
</listitem>
</itemizedlist>
<note>
<simpara>The client (globus-url-copy) does NOT send any data. It is the <emphasis role="strong">servers</emphasis> that send the usage statistics.</simpara>
</note>
<simpara>We have made a concerted effort to collect only data that is not too
intrusive or private and yet still provides us with information that
will help improve and gauge the usage of the GridFTP server.
Nevertheless, if you wish to disable this feature for GridFTP only, use
the <emphasis>-disable-usage-stats</emphasis> option of
<ulink url="../..gridftp/admin/index.html#globus-gridftp-server">globus-gridftp-server</ulink>.
Note that you can disable transmission of usage statistics globally for
all C components by setting "GLOBUS_USAGE_OPTOUT=1" in your environment.</simpara>
<simpara>Also, please see our
<ulink url="/toolkit/docs/latest-stable/Usage_Stats.html">policy statement</ulink> on
the collection of usage statistics.</simpara>
</section>
</section>
</section>
<section id="_execution_management_usage_statistics">
<title>Execution Management Usage Statistics</title>
<section id="gram5-usage">
<title>Usage statistics collection by the Globus Alliance</title>
<section id="gram5-usage-stats">
<title>GRAM5-specific usage statistics</title>
<simpara>The following usage statistics are sent by default in a UDP packet (in
addition to the GRAM component code, packet version, timestamp, and
source IP address) at the end of each job.</simpara>
<itemizedlist>
<listitem>
<simpara>
Job Manager Session ID
</simpara>
</listitem>
<listitem>
<simpara>
dryrun used
</simpara>
</listitem>
<listitem>
<simpara>
RSL Host Count
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_IN</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_OUT</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Job Failure Code
</simpara>
</listitem>
<listitem>
<simpara>
Number of times status is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times register is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times signal is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times refresh is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of files named in file_clean_up RSL
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Bitmask of used RSL attributes (values are 2^id from the gram5_rsl_attributes table)
</simpara>
</listitem>
<listitem>
<simpara>
Number of times unregister is called
</simpara>
</listitem>
<listitem>
<simpara>
Value of the <literal>count</literal> RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
Comma-separated list of string names of other RSL attributes not in the set defined in <literal>globus-gram-job-manager.rvf</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Job type string
</simpara>
</listitem>
<listitem>
<simpara>
Number of times the job was restarted
</simpara>
</listitem>
<listitem>
<simpara>
Total number of state callbacks sent to all clients for this job
</simpara>
</listitem>
</itemizedlist>
<simpara>The following information can be sent as well in a job status packet but
it is not sent unless explicitly enabled by the system administrator:</simpara>
<itemizedlist>
<listitem>
<simpara>
Value of the executable RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
Value of the arguments RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
IP adddress and port of the client that submitted the job
</simpara>
</listitem>
<listitem>
<simpara>
User DN of the client that submitted the job
</simpara>
</listitem>
</itemizedlist>
<simpara>In addition to job-related status, the job manager sends information
periodically about its execution status. The following information is
sent by default in a UDP packet (in addition to the GRAM component code,
packet version, timestamp, and source IP address) at job manager start
and every 1 hour during the job manager lifetime:</simpara>
<itemizedlist>
<listitem>
<simpara>
Job Manager Start Time
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Session ID
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Status Time
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Version
</simpara>
</listitem>
<listitem>
<simpara>
LRM
</simpara>
</listitem>
<listitem>
<simpara>
Poll used
</simpara>
</listitem>
<listitem>
<simpara>
Audit used
</simpara>
</listitem>
<listitem>
<simpara>
Number of restarted jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of failed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of canceled jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of completed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of dry-run jobs
</simpara>
</listitem>
<listitem>
<simpara>
Peak number of concurrently managed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently being managed
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the UNSUBMITTED state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the STAGE_IN state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the PENDING state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the ACTIVE state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the STAGE_OUT state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the FAILED state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the DONE state
</simpara>
</listitem>
</itemizedlist>
<simpara>Also, please see our
<ulink url="/toolkit/docs/latest-stable/Usage_Stats.html">policy statement</ulink> on
the collection of usage statistics.</simpara>
</section>
</section>
</section>
</chapter>
</part>
</book>
