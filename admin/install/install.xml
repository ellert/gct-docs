<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"
[
<!ENTITY % xinclude SYSTEM "../../xinclude.mod" >
%xinclude;
<!ENTITY rootuser "<systemitem class='username'>root</systemitem>" >
<!ENTITY globususer "<systemitem class='username'>globus</systemitem>" >
 
]>
<chapter id="gtadmin-install" xreflabel="Installing GT">
    <title>Installing GT <replaceable role="entity">version</replaceable></title>
    <section id="install-bininst">

    <title>Installing Binary Packages</title>
         <xi:include xmlns:xi="http://www.w3.org/2001/XInclude"
                href="../quickstart/index.xml"
                xpointer="xpointer(id('q-prereq'))"/>

    <section id="install-toolkit"><title>Installing the Toolkit on Linux</title>
        <para>The components of the toolkit can be installed separately, or all at once.  This section will show how
        to install various components, on both RPM based and Debian based Linux systems.</para>

        <para>For Fedora or Red Hat-based systems, used the
        <command>yum</command> command
        to install the Globus components and their dependencies. For SUSE
        Linux Enterprise Server systems, use <command>zypper</command>. For
        Debian-based systems, used the <command>apt-get</command> or 
        <command>aptitude</command> commands.
        </para>

        <para>For example, to install the GridFTP client tools, do the
        following for RPM-based systems:

        <screen><prompt role="root"/><command>yum install globus-data-management-client</command></screen>

        Do the following for Debian-based systems:
        <screen><prompt role="root"/><command>apt-get install globus-data-management-client</command></screen>
        </para>

        <section id="install-packagegroups">
            <title>Package Groups</title>
        
            <para>The Globus Toolkit distribution includes several high-level
            package groups that can be used to install multiple packages
            to enable full client or server functionality of some Globus
            Toolkit component.</para>

            <para>These packages are:
            
            <variablelist>
                <varlistentry>
                    <term><package>globus-gridftp</package></term>
                    <listitem><simpara>GridFTP client and server tools</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-gram5</package></term>
                    <listitem><simpara>GRAM5 client and server tools</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-gsi</package></term>
                    <listitem><simpara>Globus Security Infrastructure tools for
                    managing certificates and proxies</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-data-management-server</package></term>
                    <listitem><simpara>Server tools for deploying a GridFTP
                    server.</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-data-management-client</package></term>
                    <listitem><simpara>Client Tools for data management, including the GridFTP client programs and globus-url-copy</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-data-management-sdk</package></term>
                    <listitem><simpara>Development headers and documentation
                    for writing applications using the GridFTP APIs.</simpara></listitem>
                </varlistentry>
                <varlistentry> 
                    <term><package>globus-resource-management-server</package></term>
                    <listitem><simpara>Server tools for deploying a GRAM5
                    resource manager</simpara></listitem>
                </varlistentry>

                <varlistentry>
                    <term><package>globus-resource-management-client</package></term>
                    <listitem><simpara>Client tools for resource management,
                    including the globusrun tool, and the globus-job-*
                    tools.</simpara></listitem>
                </varlistentry>
                <varlistentry>
                    <term><package>globus-resource-management-sdk</package></term>
                    <listitem><simpara>Development headers and documentation
                    for writing applications using the GRAM5
                    APIs.</simpara></listitem>
                </varlistentry>
            </variablelist>
            </para>
        </section>
            <section><title>Updating a Globus Installation</title>
            <para>
                In GT 6, there are three Globus Toolkit package repositories:
                <emphasis>Stable</emphasis>, <emphasis>Testing</emphasis>, and
                <emphasis>Unstable</emphasis>. The <emphasis>Stable</emphasis>
                repository is enabled by default, and is updated to 
                to include fixes for major bugs and security issues. These can
                be easily installed
                via <command>yum</command> or <command>apt-get</command>.
                These updates
                will be published in the <ulink
                url="http://www.globus.org/toolkit/rss/advisories/{$shortversion}.rss">GT <replaceable role="entity">shortversion</replaceable> updates
                rss feed</ulink>.  Also, this
                means that when the next point release is made, collecting other
                minor bug fixes, the upgrade can be done via <command>yum</command>
                or <command>apt-get</command> without installing a new repository definition
                package.

            </para>
            <para>
                In addition, users may enable the <emphasis>Testing</emphasis>
                or <emphasis>Unstable</emphasis> package repositories. These
                have different levels of documentation and testing done to
                them.
            </para>
            <para>
                The <emphasis>Testing</emphasis> repository contains
                packages which have passed our automated test suite and are
                made available to people who are interested in the latest bug
                fixes. These packages will likely be migrated to the
                <emphasis>Stable</emphasis> repository once the package
                has been verified to fix a bug or issue and the documentation
                has been updated to include informtion about the issue.
            </para>
            <para>
                The <emphasis>Unstable</emphasis> repository contains
                packages which have compiled successfully, but may not have
                completed all tests or are experimental in some way. Packages
                from the <emphasis>Unstable</emphasis> will potentially make
                it to the <emphasis>Testing</emphasis> repository once they
                seem to be functional.
            </para>
            </section>
    </section>
    <section><title>Installing the Toolkit on Mac OS X</title>
        <para>Download the Mac OS X Globus Toolkit Installation Package from
        the Globus Toolkit web site. Click on
        <filename>globus_toolkit-<replaceable
        role="entity">version</replaceable>.pkg</filename>, and follow the
        installation instructions. If you select the "Install for me only"
        option, your <filename>$HOME/.profile</filename> is modified
        to add the Globus Toolkit components to your path. If you are using
        a different shell, you may need to incorporate those changes into
        your shell initialization file. If you install for all users, the
        global path will be updated.
        </para>
        <para>
        To uninstall the toolkit, run the <command>globus-uninstall</command>
        script which will remove the toolkit and revert the PATH changes.
        </para>
    </section>
    <section><title>Installing the Toolkit on Windows</title>
        <para>There are four options when installing the Globus Toolkit
        on Windows: either using cygwin (32- and 64- bit builds) or
        MingW (32- and 64- bit builds). 
        </para>
        <para>The Cygwin installation requires
        the cygwin runtime (either 32-bit or 64-bit) to be installed: see
        <ulink url="http://www.cygwin.com">cygwin.com</ulink> for details.
        To use the Globus Toolkit on cygwin, download the globus_toolkit-<replaceable role="entity">version</replaceable>-x86_64-pc-cygwin.zip or 
        To use the Globus Toolkit on cygwin, download and unzip the globus_toolkit-<replaceable role="entity">version</replaceable>-i386-pc-cygwin.zip file and in the cygwin root directory. This will create files in /opt/globus
        </para>
        <para>
        The mingw installtion does not require a special runtime, but some
        parts of the toolkit do not work with it: (LIST PENDING).
        To install the MingW packages, download the globus_toolkit-<replaceable role="entity">version</replaceable>-x86_64-w64-mingw32.zip or 
        To use the Globus Toolkit on cygwin, download and unzip the
        globus_toolkit-<replaceable
        role="entity">version</replaceable>-i386-w64-mingw32.zip file. Add the
        unzipped directory's Globus\bin and Globus\sbin paths to your PATH
        environment to be able to use the Globus Toolkit.
        </para>
    </section>
    </section>
    <section id="gtadmin-installation-from-source-installer">
        <title>Installation from Source Installer</title>
        <!-- basic instructions -->
        <note><para>Installing using the Source Installer is only recommended on platforms for which native packages are not available.  If you are installing onto a RedHat or Debian based Linux system, please see the section above.</para></note>
        <note><para>Make you sure you check out <olink targetptr="gtadmin-platform">Platform Notes</olink> for specific installation information related to your platform.</para></note>
        
         <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="prereq.xml" xpointer="gtadmin-prereq"/>
        
        <section>
            <title>Installing from Source Installer</title>
        <orderedlist>
            <listitem>
                <para>Create a user named &globususer;. This
                    non-privileged user will be used to perform administrative tasks, deploying
                    services, etc. Pick an installation directory, and make sure this account has
                    read and write permissions in the installation directory.</para>
                <tip>
                    <para>You might need to create the target directory as
                    &rootuser;, then chown it to the &globususer; user:
                        <screen><prompt role="root"/><command>mkdir <filename>/usr/local/globus-<replaceable role="entity">shortversion</replaceable></filename></command>
<prompt role="root"/><command>chown globus:globus <filename>/usr/local/globus-<replaceable role="entity">shortversion</replaceable></filename></command></screen></para>
                </tip>
                <important>
                    <para> If for some reason you do <emphasis>not</emphasis> create a user named
                        &globususer;, be sure to run the installation as a <emphasis>non-root</emphasis>
                        user. In that case, make sure to pick an install directory that your user
                        account has write access to. </para>
                </important>
            </listitem>
            <listitem>
                <para>Download the required software noted in <olink targetptr="gtadmin-prereq"
                    />.</para>
            </listitem>
            <listitem>
                <para>The Globus Toolkit Source Installer sets the installation directory by default to <filename
                            >/usr/local/globus-<replaceable role="entity"
                        >shortversion</replaceable></filename>, but you may replace <filename
                            >/usr/local/globus-<replaceable role="entity"
                        >shortversion</replaceable></filename> with whatever directory you wish to
                    install to, by setting the prefix when you configure.</para>
                <para>As the globus user, run:</para>
                <screen><prompt role="globus"/><command>./configure --prefix=<replaceable>YOUR_PREFIX_DIRECTORY</replaceable></command></screen>
                <para> You can use command line arguments to ./configure for a more custom install.</para>
                <para> For a full list of options, see <command>./configure --help</command>.</para>
            </listitem>
            <listitem>
                <para>
                    The source installer will build all of the globus toolkit
                    packages in the default make rule. The same
                    <olink targetptr="install-packagegroups">package
                    groups</olink> as the native packages may be used to build
                    and install a subset of the toolkit.
                </para>

                <para> Run: </para>
                <screen><prompt role="globus"/><command>make <replaceable>PACKAGE-GROUPS</replaceable></command></screen>
                <para> Note that this command can take a while to complete. If you wish to
                    have a log file of the build, use <command>tee</command>: </para>
                <screen><prompt role="globus"/><command>make 2&gt;&amp;1 | tee build.log</command></screen>
                <para> The syntax above assumes a Bourne shell. If you are using another shell,
                    redirect stderr to stdout and then pipe it to <command>tee</command>.
                </para>
            </listitem>
            <listitem>
                <para> To test the toolkit, or particular packages within the toolkit, run:
                <screen><prompt role="globus"/><command>make check</command></screen>
                or 
                <screen><prompt role="globus"/><command>make <replaceable>COMPONENT-</replaceable>check</command></screen>
                where <replaceable>COMPONENT</replaceable> is the name of the
                package to test. As an example, you could run
                <screen><prompt role="globus"/><command>make globus_gssapi_gsi-check</command></screen>
                to run the GSSAPI test programs.
                </para>
            </listitem>
            <listitem>
                <para> Finally, run: </para>
                <screen><prompt role="globus"/><command>make install</command></screen>
                <para> This completes your installation. Now you may move on to the configuration
                    sections of the following chapters. </para>
                <para> We recommend that you install any security advisories available for your
                    installation, which are available from the <ulink
                        url="http://www.globus.org/toolkit/advisories.html?version={$shortversion}"> Advisories
                    page</ulink>. You may also be interested in subscribing to some <ulink
                        url="http://dev.globus.org/wiki/Mailing_Lists">mailing lists</ulink> for
                    general discussion and security-related announcements. </para>
            </listitem>
        </orderedlist>
        </section>
        <section><title>Updating an Installation</title>
            <para>The updates available in the native packages described above are also
            published as source packages on the <ulink
            url="http://www.globus.org/toolkit/advisories.html?version={$shortversion}">updates
            page</ulink>. To install update packages, follow their download
            link, untar them, and then configure them
            with the same prefix as your original installation.
            </para>
        </section>
        </section>
</chapter>
