<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <title>Installing GT 6.0</title>
</bookinfo>
<preface>
<title></title>
<simpara>This guide is the starting point for everyone who wants to install
Globus Toolkit 6.0. It will take you through a basic installation that
installs the following basic services: a security infrastructure (GSI),
GridFTP, and Execution Services (GRAM5).
This guide is also available as a <ulink url="installingGT.pdf">PDF</ulink>. However,
each component includes online reference material, which this guide
sometimes links to.</simpara>
</preface>
<chapter id="gtadmin-before">
<title>Before you begin</title>
<simpara>Before you start installing the Globus Toolkit 6.0, there are a few
things you should consider. The toolkit contains several components, and
you may only be interested in some of them.</simpara>
<simpara>The Globus Toolkit version 6.0 includes:</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="../../gsic/index.html">GSI</ulink>: security
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../../gridftp/index.html">GridFTP</ulink>: file transfer
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../../gram5/index.html">GRAM</ulink>: job execution/resource management
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../../myproxy/index.html">MyProxy</ulink>: credential repository/certificate
  authority
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="../../gsiopenssh/index.html">GSI-OpenSSH</ulink>: GSI secure single sign-on
  remote shell
</simpara>
</listitem>
</itemizedlist>
<simpara>If you are new to the toolkit and want to experiment with the
components, you may want to use a supported RedHat based or Debian based
Linux system. With the new supported native packaging installs, they are
the simplest platforms on which to install GT services.</simpara>
<simpara>For the purposes of this documentation, Globus is being installed on a
machine called <emphasis role="strong"><literal>elephant</literal></emphasis>.</simpara>
<section id="q-typography">
<title>Typographical Conventions</title>
<simpara>Where there is a command to be typed, it will be preceded by one of the
following prompts:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>root# </literal>, <literal>root@donkey# </literal></emphasis>
</term>
<listitem>
<simpara>
     Run this command as the <emphasis role="strong"><literal>root</literal></emphasis> super-user, on the <emphasis role="strong"><literal>elephant</literal></emphasis> or <emphasis role="strong"><literal>donkey</literal></emphasis> hosts respectively. You might have to use a command like <emphasis role="strong"><literal>su</literal></emphasis>(8) or <emphasis role="strong"><literal>sudo</literal></emphasis>(8) to start a root shell before executing the command.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>myproxy% </literal></emphasis>
</term>
<listitem>
<simpara>
     Run this command as the <emphasis role="strong"><literal>myproxy</literal></emphasis> user, on the <emphasis role="strong"><literal>elephant</literal></emphasis> host. This user is created automatically when the <emphasis role="strong"><literal>myproxy-server</literal></emphasis> package is installed.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>quser% </literal>, <literal>quser@donkey% </literal></emphasis>
</term>
<listitem>
<simpara>
     Run this command as the normal user account you are intending to interact with your Globus sevices, on the <emphasis role="strong"><literal>elephant</literal></emphasis> or <emphasis role="strong"><literal>donkey</literal></emphasis> hosts. In this document, we use the <emphasis role="strong"><literal>quser</literal></emphasis> accout for this, but if you have another user, you can use it for that purpose.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>Commands themselves will be typeset as <emphasis role="strong"><literal>run-this-command
-with-arguments</literal></emphasis>, and responses to the commands like this <literal>Some
Response Text</literal>. If there is some portion of a command which should be
replaced by value, such as a version number, it will be typeset like
this: <emphasis>REPLACEME</emphasis>.</simpara>
<simpara>Finally, in some cases you will be prompted for a passphrase. When that
occurs, the entry of the passphrase will be indicated by <literal>******</literal>,
even though nothing will be printed to the screen.</simpara>
</section>
</chapter>
<chapter id="gtadmin-install">
<title>Installing GT 6.0</title>
<section id="q-prereq">
<title>Prerequisites</title>
<simpara>We distribute the Globus Toolkit 6 as a set of RPM and Debian packages
for Linux systems, as an installable package for Mac OS X, as a .zip
file for Windows and Cygwin, as well as a source installer which can be
used on other operating systems. In this quickstart, we will be
installing RPM packages. Thus, it is a prerequisite for following this
quickstart that you are running a distribution for which we provide
RPMs. If you are running a supported Debian or Ubuntu system, the
process is very similar, but you&#8217;ll need to use the <emphasis role="strong"><literal>apt-get</literal></emphasis> or
similar tools to install the packages. For the source installer, there
is more work involved, and you&#8217;ll need to consult the full installation
guide.</simpara>
<simpara>First, we will to set up our system to use the Globus package
repository. This repository contains the Globus software packages,
signed by our build manager. We provide RPM and Debian packages that
contain a source configuration file and the public key which can be used
to verify the packages. If your distribution has Globus 6.0 packages
within its repository, you can skip to the next section.</simpara>
<simpara>The globus toolkit package repo RPM can be downloaded from
<ulink url="http://www.globus.org/ftppub/gt6/installers/repo/globus-toolkit-repo-latest.noarch.rpm">the
repo RPM package on globus.org</ulink>.</simpara>
<simpara>To install binary RPMs, download the globus-toolkit-repo package from
the link above and install it with the command:</simpara>
<screen>root# rpm -hUv globus-toolkit-repo-latest.noarch.rpm</screen>
<simpara>The globus toolkit package repo Debian file can be downloaded from
<ulink url="http://www.globus.org/ftppub/gt6/installers/repo/globus-toolkit-repo%5flatest%5fall.deb">the
repo Debian package on globus.org</ulink>.</simpara>
<simpara>To install Debian or Ubuntu package, download the globus-toolkit-repo
package from the link above and install it with the command:</simpara>
<screen>root# dpkg -i globus-toolkit-repo_latest_all.deb</screen>
<simpara>Once you&#8217;ve installed the Globus repository package, you can use your
operating system&#8217;s packaging tools: <emphasis role="strong"><literal>yum</literal></emphasis> or <emphasis role="strong"><literal>apt-get</literal></emphasis>, to
install the Globus components.</simpara>
<important>
<simpara>For operating systems based on RHEL (such as Red Hat Enterprise Linux,
CentOS, and Scientific Linux), the compatible EPEL repository must be
enabled before installing myproxy. For OS versions 5.x, install the
<ulink url="http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm">EPEL
5 package</ulink>, and for OS version 6.x, use
<ulink url="http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm">6
package</ulink>.
For information about installing these, see the
<ulink url="http://fedoraproject.org/wiki/EPEL/FAQ#How%5fcan%5fI%5finstall%5fthe%5fpackages%5ffrom%5fthe%5fEPEL%5fsoftware%5frepository.3F">EPEL
FAQ</ulink>.
This step is not needed for Fedora, Debian, or Ubuntu systems.</simpara>
</important>
<important>
<simpara>For SUSE Linux Enterprise Server systems which will be using
globus-connect-server, a newer version of apache2 must be installed in
order for myproxy-oauth to work. This is available by adding the Apache2
and Apache2 Modules for SLES11 repositories from opensuse.org.
These can be installed by running these commands:</simpara>
<screen>root# zypper ar http://download.opensuse.org/repositories/Apache/SLE_11_SP3/Apache.repo
root# zypper ar http://download.opensuse.org/repositories/Apache:/Modules/Apache_SLE_11_SP3/Apache:Modules.repo
root# rpm --import http://download.opensuse.org/repositories/Apache/SLE_11_SP3/repodata/repomd.xml.key
root# rpm --import http://download.opensuse.org/repositories/Apache:/Modules/Apache_SLE_11_SP3/repodata/repomd.xml.key</screen>
</important>
<section id="install-toolkit">
<title>Installing the Toolkit on Linux</title>
<simpara>The components of the toolkit can be installed separately, or all at
once. This section will show how to install various components, on both
RPM based and Debian based Linux systems.</simpara>
<simpara>For Fedora or Red Hat-based systems, used the <emphasis role="strong"><literal>yum</literal></emphasis> command to
install the Globus components and their dependencies. For SUSE Linux
Enterprise Server systems, use <emphasis role="strong"><literal>zypper</literal></emphasis>. For Debian-based systems,
used the <emphasis role="strong"><literal>apt-get</literal></emphasis> or <emphasis role="strong"><literal>aptitude</literal></emphasis> commands.</simpara>
<simpara>For example, to install the GridFTP client tools, do the following for
RPM-based systems:</simpara>
<screen>root# yum install globus-data-management-client</screen>
<simpara>Do the following for Debian-based systems:</simpara>
<screen>root# apt-get install globus-data-management-client</screen>
<section id="install-packagegroups">
<title>Package Groups</title>
<simpara>The Globus Toolkit distribution includes several high-level package
groups that can be used to install multiple packages to enable full
client or server functionality of some Globus Toolkit component.</simpara>
<simpara>These packages are:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-gridftp</literal></emphasis>
</term>
<listitem>
<simpara>
     GridFTP client and server tools
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-gram5</literal></emphasis>
</term>
<listitem>
<simpara>
     GRAM5 client and server tools
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-gsi</literal></emphasis>
</term>
<listitem>
<simpara>
     Globus Security Infrastructure tools for managing certificates and proxies
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-data-management-server</literal></emphasis>
</term>
<listitem>
<simpara>
     Server tools for deploying a GridFTP server.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-data-management-client</literal></emphasis>
</term>
<listitem>
<simpara>
     Client Tools for data management, including the GridFTP client programs and globus-url-copy
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-data-management-sdk</literal></emphasis>
</term>
<listitem>
<simpara>
     Development headers and documentation for writing applications using the GridFTP APIs.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-resource-management-server</literal></emphasis>
</term>
<listitem>
<simpara>
     Server tools for deploying a GRAM5 resource manager
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-resource-management-client</literal></emphasis>
</term>
<listitem>
<simpara>
     Client tools for resource management, including the globusrun tool, and the globus-job-* tools.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>globus-resource-management-sdk</literal></emphasis>
</term>
<listitem>
<simpara>
     Development headers and documentation for writing applications using the GRAM5 APIs.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_updating_a_globus_installation">
<title>Updating a Globus Installation</title>
<simpara>In GT 6, there are three Globus Toolkit package repositories:
<emphasis role="strong">Stable</emphasis>, <emphasis role="strong">Testing</emphasis>, and <emphasis role="strong">Unstable</emphasis>. The <emphasis role="strong">Stable</emphasis> repository is
enabled by default, and is updated to to include fixes for major bugs
and security issues. These can be easily installed via <emphasis role="strong"><literal>yum</literal></emphasis> or
<emphasis role="strong"><literal>apt-get</literal></emphasis>. These updates will be published in the
<ulink url="http://www.globus.org/toolkit/rss/advisories/{$shortversion}.rss">GT</ulink>.
Also, this means that when the next point release is made, collecting
other minor bug fixes, the upgrade can be done via <emphasis role="strong"><literal>yum</literal></emphasis> or
<emphasis role="strong"><literal>apt-get</literal></emphasis> without installing a new repository definition package.</simpara>
<simpara>In addition, users may enable the <emphasis role="strong">Testing</emphasis> or <emphasis role="strong">Unstable</emphasis> package
repositories. These have different levels of documentation and testing
done to them.</simpara>
<simpara>The <emphasis role="strong">Testing</emphasis> repository contains packages which have passed our
automated test suite and are made available to people who are interested
in the latest bug fixes. These packages will likely be migrated to the
<emphasis role="strong">Stable</emphasis> repository once the package has been verified to fix a bug or
issue and the documentation has been updated to include informtion about
the issue.</simpara>
<simpara>The <emphasis role="strong">Unstable</emphasis> repository contains packages which have compiled
successfully, but may not have completed all tests or are experimental
in some way. Packages from the <emphasis role="strong">Unstable</emphasis> will potentially make it to
the <emphasis role="strong">Testing</emphasis> repository once they seem to be functional.</simpara>
</section>
</section>
<section id="_installing_the_toolkit_on_mac_os_x">
<title>Installing the Toolkit on Mac OS X</title>
<simpara>Download the Mac OS X Globus Toolkit Installation Package from the
Globus Toolkit web site. Click on <literal>globus_toolkit-6.0.pkg</literal>, and follow
the installation instructions. If you select the "Install for me only"
option, your , and follow the installation instructions. If you select
the "Install for me only" option, your <literal>$HOME/.profile</literal> is modified to
add the Globus Toolkit components to your path. If you are using a
different shell, you may need to incorporate those changes into your
shell initialization file. If you install for all users, the global path
will be updated.  is modified to add the Globus Toolkit components to
your path. If you are using a different shell, you may need to
incorporate those changes into your shell initialization file. If you
install for all users, the global path will be updated.</simpara>
<simpara>To uninstall the toolkit, run the <emphasis role="strong"><literal>globus-uninstall</literal></emphasis> script which
will remove the toolkit and revert the PATH changes.</simpara>
</section>
<section id="_installing_the_toolkit_on_windows">
<title>Installing the Toolkit on Windows</title>
<simpara>There are four options when installing the Globus Toolkit on Windows:
either using cygwin (32- and 64- bit builds) or MingW (32- and 64- bit
builds).</simpara>
<simpara>The Cygwin installation requires the cygwin runtime (either 32-bit or
64-bit) to be installed: see <ulink url="http://www.cygwin.com">cygwin.com</ulink> for
details. To use the Globus Toolkit on cygwin, download the
globus_toolkit-6.0-x86_64-pc-cygwin.zip or To use the Globus Toolkit on
cygwin, download and unzip the globus_toolkit-6.0-i386-pc-cygwin.zip
file and in the cygwin root directory. This will create files in
/opt/globus</simpara>
<simpara>The mingw installtion does not require a special runtime, but some parts
of the toolkit do not work with it: (LIST PENDING). To install the MingW
packages, download the globus_toolkit-6.0-x86_64-w64-mingw32.zip or To
use the Globus Toolkit on cygwin, download and unzip the
globus_toolkit-6.0-i386-w64-mingw32.zip file. Add the unzipped
directory&#8217;s Globus\bin and Globus\sbin paths to your PATH environment to
be able to use the Globus Toolkit.</simpara>
</section>
</section>
<section id="gtadmin-installation-from-source-installer">
<title>Installation from Source Installer</title>
<note>
<simpara>Installing using the Source Installer is only recommended on platforms
for which native packages are not available. If you are installing onto
a RedHat or Debian based Linux system, please see the section above.</simpara>
</note>
<note>
<simpara>Make you sure you check out <ulink url="#gtadmin-platform">Platform Notes</ulink> for
specific installation information related to your platform.</simpara>
</note>
</section>
</chapter>
<chapter id="gtadmin-prereq-chap">
<title>Software Prerequisites</title>
<section id="gtadmin-prereq">
<title>Required software</title>
<simpara>To build the Globus Toolkit from the source installer, first download
the source from
<ulink url="http://www.globus.org/toolkit/downloads/{$version}">download page</ulink>, and
be sure you have all of the following prerequisites installed.</simpara>
<simpara>This table shows specific package names (where available) for systems
supported by GT 6.0:</simpara>
<informaltable
frame="all"
rowsep="1" colsep="1"
>
<tgroup cols="6">
<colspec colname="col_1" colwidth="16*"/>
<colspec colname="col_2" colwidth="16*"/>
<colspec colname="col_3" colwidth="16*"/>
<colspec colname="col_4" colwidth="16*"/>
<colspec colname="col_5" colwidth="16*"/>
<colspec colname="col_6" colwidth="16*"/>
<thead>
<row>
<entry align="left" valign="top"> Prerequisite </entry>
<entry align="left" valign="top"> Reason </entry>
<entry align="left" valign="top"> RedHat-based Systems </entry>
<entry align="left" valign="top"> Debian-based Systems </entry>
<entry align="left" valign="top"> Solaris 11 </entry>
<entry align="left" valign="top"> Mac OS X</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>C Compiler</simpara></entry>
<entry align="left" valign="top"><simpara>Most of the toolkit is written in C, using C99 and POSIX.1 features and libraries.</simpara></entry>
<entry align="left" valign="top"><simpara>gcc</simpara></entry>
<entry align="left" valign="top"><simpara>gcc</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/developer/gcc-45 or <ulink url="http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/index.html">Solaris Studio</ulink> 12.3</simpara></entry>
<entry align="left" valign="top"><simpara><ulink url="https://developer.apple.com/xcode/">XCode</ulink></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GNU or BSD sed</simpara></entry>
<entry align="left" valign="top"><simpara>Standard sed does not support long enough lines to process autoconf-generated
  scripts and Makefiles</simpara></entry>
<entry align="left" valign="top"><simpara>sed</simpara></entry>
<entry align="left" valign="top"><simpara>sed</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/text/gnu-sed</simpara></entry>
<entry align="left" valign="top"><simpara>(included in OS)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GNU Make</simpara></entry>
<entry align="left" valign="top"><simpara>Standard make does not support long enough lines to process
  autoconf-generated makefiles</simpara></entry>
<entry align="left" valign="top"><simpara>make</simpara></entry>
<entry align="left" valign="top"><simpara>make</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/developer/build/gnu-make</simpara></entry>
<entry align="left" valign="top"><simpara>(included in XCode)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>OpenSSL 0.9.8 or higher</simpara></entry>
<entry align="left" valign="top"><simpara>GSI security uses OpenSSL&#8217;s implementation of the SSL protocol and X.509
  certificates.</simpara></entry>
<entry align="left" valign="top"><simpara>openssl-devel</simpara></entry>
<entry align="left" valign="top"><simpara>libssl-dev</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/library/security/openssl</simpara></entry>
<entry align="left" valign="top"><simpara>(included in base OS)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Perl 5.10 or higher</simpara></entry>
<entry align="left" valign="top"><simpara>Parts of GRAM5 are written in Perl, as are many test scripts</simpara></entry>
<entry align="left" valign="top"><simpara>perl</simpara></entry>
<entry align="left" valign="top"><simpara>perl</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/runtime/perl-512</simpara></entry>
<entry align="left" valign="top"><simpara>(included in base OS)</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>pkg-config</simpara></entry>
<entry align="left" valign="top"><simpara>Parts of GRAM5 are written in Perl</simpara></entry>
<entry align="left" valign="top"><simpara>pkgconfig</simpara></entry>
<entry align="left" valign="top"><simpara>pkg-config</simpara></entry>
<entry align="left" valign="top"><simpara>pkg:/developer/gnome/gettext</simpara></entry>
<entry align="left" valign="top"><simpara>Download and install from <ulink url="http://pkgconfig.freedesktop.org/releases/">freedesktop.org source packages</ulink></simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<note>
<simpara>In order to use the GNU versions of sed, tar, and make on Solaris, put <literal>/usr/gnu/bin</literal> at the head of your path. Also, to use all of the perl executables, add  at the head of your path. Also, to use all of the perl executables, add <literal>/usr/perl5/bin</literal> to your path. to your path.</simpara>
</note>
<section id="_installing_from_source_installer">
<title>Installing from Source Installer</title>
<orderedlist numeration="arabic">
<listitem>
<simpara>
Create a user named <emphasis role="strong"><literal>globus</literal></emphasis>. This non-privileged user will be
used to perform administrative tasks, deploying services, etc. Pick an
installation directory, and make sure this account has read and write
permissions in the installation directory.
</simpara>
<tip>
<simpara>You might need to create the target directory as <emphasis role="strong"><literal>root</literal></emphasis>, then
chown it to the <emphasis role="strong"><literal>globus</literal></emphasis> user:</simpara>
<screen>root# mkdir
root# chown globus:globus</screen>
</tip>
<important>
<simpara>If for some reason you do <emphasis role="strong">not</emphasis> create a user named <emphasis role="strong"><literal>globus</literal></emphasis>, be
sure to run the installation as a <emphasis role="strong">non-root</emphasis> user. In that case, make
sure to pick an install directory that your user account has write
access to.</simpara>
</important>
</listitem>
<listitem>
<simpara>
Download the required software noted in <ulink url="#gtadmin-prereq">#gtadmin-prereq</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
The Globus Toolkit Source Installer sets the installation directory by
default to <literal>/usr/local/globus-6</literal>, but you may replace , but you may
replace <literal>/usr/local/globus-6</literal> with whatever directory you wish to
install to, by setting the prefix when you configure. with whatever
directory you wish to install to, by setting the prefix when you
configure.
</simpara>
<simpara>As the globus user, run:</simpara>
<screen>globus% ./configure --prefix=</screen>
<simpara>You can use command line arguments to ./configure for a more custom
install.</simpara>
<simpara>For a full list of options, see <emphasis role="strong"><literal>./configure --help</literal></emphasis>.</simpara>
</listitem>
<listitem>
<simpara>
The source installer will build all of the Globus Toolkit packages in
the default make rule. The following Makefile targets can be used to
build subsets of the Globus Toolkit:
</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">ccommonlibs</emphasis>
</term>
<listitem>
<simpara>
     C Common Libraries
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gridftp</emphasis>
</term>
<listitem>
<simpara>
     GridFTP Client and Server
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gsi</emphasis>
</term>
<listitem>
<simpara>
     Security Libraries and Tools
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gsi</emphasis>
</term>
<listitem>
<simpara>
     Security Libraries and Tools
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">udt</emphasis>
</term>
<listitem>
<simpara>
     Globus XIO UDT Driver
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">myproxy</emphasis>
</term>
<listitem>
<simpara>
     MyProxy Client and Server
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gsi-openssh</emphasis>
</term>
<listitem>
<simpara>
     GSI OpenSSH Client and Server
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 Client and Libraries
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-server</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 Service
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-lsf</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 LSF Adapter
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-sge</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 SGE Adapter
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-slurm</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 SLURM Adapter
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-condor</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 Condor Adapter
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-pbs</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 PBS Adapter
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">gram5-auditing</emphasis>
</term>
<listitem>
<simpara>
     GRAM5 Auditing Support
</simpara>
<simpara>Run:</simpara>
<screen>globus% make</screen>
<simpara>Note that this command can take a while to complete. If you wish to have
a log file of the build, use <emphasis role="strong"><literal>tee</literal></emphasis>:</simpara>
<screen>globus% make 2&gt;&amp;1 | tee build.log</screen>
<simpara>The syntax above assumes a Bourne shell. If you are using another shell,
redirect stderr to stdout and then pipe it to <emphasis role="strong"><literal>tee</literal></emphasis>.</simpara>
</listitem>
</varlistentry>
</variablelist>
</listitem>
<listitem>
<simpara>
To test the toolkit, or particular packages within the toolkit, run:
</simpara>
<screen>globus% make check</screen>
<simpara>or</simpara>
<screen>globus% make COMPONENT-check</screen>
<simpara>where <emphasis>COMPONENT</emphasis> is the name of the package to test. As an example, you
could run</simpara>
<screen>globus% make globus_gssapi_gsi-check</screen>
<simpara>to run the GSSAPI test programs.</simpara>
</listitem>
<listitem>
<simpara>
Finally, run:
</simpara>
<screen>globus% make install</screen>
<simpara>This completes your installation. Now you may move on to the
configuration sections of the following chapters.</simpara>
<simpara>We recommend that you install any security advisories available for your
installation, which are available from the
<ulink url="http://www.globus.org/toolkit/advisories.html?version={$shortversion}">Advisories
page</ulink>. You may also be interested in subscribing to some
<ulink url="http://dev.globus.org/wiki/Mailing%5fLists">mailing lists</ulink> for general
discussion and security-related announcements.</simpara>
</listitem>
</orderedlist>
</section>
<section id="_updating_an_installation">
<title>Updating an Installation</title>
<simpara>The updates available in the native packages described above are also
published as source packages on the
<ulink url="http://www.globus.org/toolkit/advisories.html?version={$shortversion}">updates
page</ulink>. To install update packages, follow their download link, untar
them, and then configure them with the same prefix as your original
installation.</simpara>
</section>
</section>
</chapter>
<chapter id="gtadmin-basic-security">
<title>Basic Security Configuration</title>
<section id="gtadmin-basic-host">
<title>Obtain host credentials</title>
<simpara>You must have X.509 certificates to use the GT 6.0 software securely
(referred to in this documentation as <emphasis role="strong">host certificates</emphasis>). For an
overview of certificates for GSI (security) see
<ulink url="../..gsic/admin/index.html#gsic-configuring">GSI Configuration
Information</ulink> and
<ulink url="../..gsic/developer/index.html#gsic-developer-env">GSI Environment
Variables</ulink>.</simpara>
<simpara>If you will need to be interoperable with other sites, you will need to
obtain certs from a trusted Certificate Authority, such as those that
are included in <ulink url="http://www.igtf.net">IGTF</ulink>. If you are simply testing the
software on your own resources, SimpleCA offers an easy way to create
your own certificates (see section below).</simpara>
<simpara>Host credentials must:</simpara>
<itemizedlist>
<listitem>
<simpara>
consist of the following two files: <literal>hostcert.pem</literal> and  and <literal>hostkey.pem</literal>
</simpara>
</listitem>
<listitem>
<simpara>
be in the appropriate directory for secure services: <literal>/etc/grid-security/</literal>
</simpara>
</listitem>
<listitem>
<simpara>
match the hostname for a the machine. If the machine is going to be accessed remotely, the name on the certificate must match the network-visible hostname.
</simpara>
</listitem>
</itemizedlist>
<simpara>You have the following options:</simpara>
<section id="gtadmin-basic-existing">
<title>Request a certificate from an existing CA</title>
<simpara>Your best option is to use an already existing CA. You may have access
to one from the company you work for or an organization you are
affiliated with. Some universities provide certificates for their
members and affiliates. Contact your support organization for details
about how to acquire a certificate. You may find your CA listed in the
<ulink url="http://www.tacar.org/">TERENA Repository</ulink>.</simpara>
<simpara>If you already have a CA, you will need to follow their configuration
directions. If they include a CA setup package, follow the CAs
instruction on how to install the setup package. If they do not, you
will need to create an <literal>/etc/grid-security/certificates</literal> directory and
include the CA cert and signing policy in that directory. See  directory
and include the CA cert and signing policy in that directory. See
<ulink url="../..gsic/admin/index.html#gsic-configuring">Configuring a Trusted
CA</ulink> for more details.</simpara>
<simpara>This type of certificate is best for service deployment and Grid
inter-operation.</simpara>
</section>
<section id="gtadmin-basic-simpleca">
<title>SimpleCA</title>
<simpara>SimpleCA provides a wrapper around the OpenSSL CA functionality and is
sufficient for simple Grid services. Alternatively, you can use
OpenSSL&#8217;s <emphasis role="strong"><literal>CA.sh</literal></emphasis> command on its own. Instructions on how to use
the SimpleCA can be found in
<ulink url="../../admin/install/appendix.html#gtadmin-simpleca">../../admin/install/appendix.html#gtadmin-simpleca</ulink>.</simpara>
<simpara>SimpleCA is suitable for testing or when a certificate authority is not
available.</simpara>
<simpara>If you install the <emphasis role="strong"><literal>globus-simpleca</literal></emphasis> native package, it will
automatically create a CA and host certificate if you don&#8217;t have one
configured yet. Otherwise, you&#8217;ll need to use <emphasis role="strong"><literal>grid-ca-create</literal></emphasis> to
create the CA and <emphasis role="strong"><literal>grid-default-ca</literal></emphasis> to make that the default for
requesting credentials.</simpara>
<simpara>To create user credentials, you can run the command
<emphasis role="strong"><literal>grid-cert-request</literal></emphasis> as a user that you want to create a credential
for. You can then run the <emphasis role="strong"><literal>grid-ca-sign</literal></emphasis> command as the
<emphasis role="strong"><literal>simpleca</literal></emphasis> user to sign the certificate.</simpara>
</section>
</section>
<section id="gtadmin-basic-gridmap">
<title>Add authorization</title>
<simpara>Installing Globus services on your resources doesn&#8217;t automatically
authorize users to use these services. Each user must have their own
user certificate, and each user certificate must be mapped to a local
account.</simpara>
<simpara>To add authorizations for users, you&#8217;ll need to update the
<literal>grid-mapfile</literal> database to include the mapping between the credentials
and the local user accounts. database to include the mapping between the
credentials and the local user accounts.</simpara>
<simpara>You&#8217;ll need two pieces of information:</simpara>
<itemizedlist>
<listitem>
<simpara>
the subject name of a user&#8217;s certificate
</simpara>
</listitem>
<listitem>
<simpara>
the local account name that the certificate holder can access.
</simpara>
</listitem>
</itemizedlist>
<simpara>To start with, if you have created a user certificate, you can run the
<emphasis role="strong"><literal>grid-cert-info</literal></emphasis> command to get the certificate&#8217;s subject name,
and <emphasis role="strong"><literal>id -un</literal></emphasis> to get the account name:</simpara>
<screen>globus% grid-cert-info -subject
/O=Grid/OU=GlobusTest/OU=simpleCA-elephant.globus.org/CN=Globus User
globus% id -un
globus</screen>
<simpara>You may add the line by running the following command as root:</simpara>
<screen>root# grid-mapfile-add-entry \
    -dn "/O=Grid/OU=GlobusTest/OU=simpleCA-elephant.globus.org/CN=Globus User" \
    -ln gtuser
Modifying /etc/grid-security/grid-mapfile ...
/etc/grid-security/grid-mapfile does not exist... Attempting to create /etc/grid-security/grid-mapfile
New entry:
"/O=Grid/OU=GlobusTest/OU=simpleCA-elephant.globus.org/CN=Globus User" globus
(1) entry added</screen>
<important>
<simpara>The quotes around the subject name are <emphasis role="strong">important</emphasis>, because it contains spaces.</simpara>
</important>
</section>
<section id="gtadmin-basic-verify">
<title>Verify Basic Security</title>
<simpara>Now that you have installed a trusted CA, acquired a hostcert and
acquired a usercert, you may verify that your security setup is
complete. As your user account, run the following command:</simpara>
<screen>gtuser$ grid-proxy-init -verify -debug

User Cert File: /home/gtuser/.globus/usercert.pem
User Key File: /home/gtuser/.globus/userkey.pem

Trusted CA Cert Dir: /etc/grid-security/certificates

Output File: /tmp/x509up_u506
Your identity: /DC=org/DC=doegrids/OU=People/CN=GT User 332900
Enter GRID pass phrase for this identity:
Creating proxy ...++++++++++++
..................++++++++++++
 Done
Proxy Verify OK
Your proxy is valid until: Fri Jan 28 23:13:22 2005</screen>
<simpara>There are a few things you can notice from this command. Your usercert
and key are located in <literal>$HOME/.globus/</literal>. The proxy certificate is
created in . The proxy certificate is created in <literal>/tmp/</literal>. The "up"
stands for "user proxy", and the . The "up" stands for "user proxy", and
the <emphasis>_u506</emphasis> will be your UNIX userid. It also prints out your
distinguished name (DN), and the proxy is valid for 12 hours.</simpara>
<simpara>If this command succeeds, your single node is correctly configured.</simpara>
<simpara>If you get an error, or if you want to see more diagnostic information
about your certificates, run the following:</simpara>
<screen>gtuser$ grid-cert-diagnostics</screen>
<simpara>For more troubleshooting information, see the GSI
<ulink url="../..gsic/admin/index.html#gsic-admin-troubleshooting">troubleshooting
guide</ulink></simpara>
</section>
<section id="gt-admin-firewall">
<title>Firewall configuration</title>
<simpara>There are four possible firewall scenarios that might present
themselves: restrictions on incoming and outgoing ports for both client
and server scenarios.</simpara>
<simpara>This section divides sites into two categories: client sites, which have
users that are acting as clients to Grid services, and server sites,
which are running Grid services. Server sites also often act as client
sites either because they also have users on site or jobs submitted by
users to the site act as clients to other sites by retrieving data from
other sites or spawning sub-jobs.</simpara>
<section id="_client_site_firewall_requirements">
<title>Client Site Firewall Requirements</title>
<simpara>This section describes the requirements placed on firewalls at sites
containing Globus Toolkit clients. Note that often jobs submitted to
sites running Globus services will act as clients (e.g. retrieving files
needed by the job, spawning subjobs), so server sites will also have
client site requirements.</simpara>
<section id="_allowed_outgoing_ports">
<title>Allowed Outgoing Ports</title>
<simpara>Clients need to be able to make outgoing connections freely from
ephemeral ports on hosts at the client site to all ports at server
sites.</simpara>
</section>
<section id="gtadmin-client-incomingports">
<title>Allowed Incoming Ports</title>
<simpara>As described in
<ulink url="../..gram5/developer/index.html#gram5-developer-jobstatecallbacks">../..gram5/developer/index.html#gram5-developer-jobstatecallbacks</ulink>,
the Globus Toolkit GRAM service uses callbacks to communicate state
changes to clients and, optionally, to stage files to/from the client.
If connections are not allowed back to the Globus Toolkit clients, the
following restrictions will be in effect:</simpara>
<itemizedlist>
<listitem>
<simpara>
You cannot do a job submission request and redirect the output back to the client. This means the globus-job-run command won&#8217;t work. globus-job-submit will work, but you cannot use globus-job-get-output. globusrun with the -o option also will not work.
</simpara>
</listitem>
<listitem>
<simpara>
Staging to or from the client will also not work, which precludes the -s and -w options.
</simpara>
</listitem>
<listitem>
<simpara>
The client cannot be notified of state changes in the job, e.g. completion.
</simpara>
</listitem>
</itemizedlist>
<simpara>To allow these callbacks, client sites should allow incoming connection
in the ephemeral port range. Client sites wishing to restrict incoming
connections in the ephemeral port range should select a port range for
their site. The size of this range should be approximately 10 ports per
expected simultaneous user on a given host, though this may vary
depending on the actual usage characteristics. Hosts on which clients
run should have the GLOBUS_TCP_PORT_RANGE environment variable set for
the users to reflect the site’s chosen range.</simpara>
</section>
<section id="_network_address_translation_nat">
<title>Network Address Translation (NAT)</title>
<simpara>Clients behind NATs will be restricted as described in
<ulink url="#gtadmin-client-incomingports">#gtadmin-client-incomingports</ulink> unless the firewall and site hosts
are configured to allow incoming connections.</simpara>
<simpara>This configuration involves:</simpara>
<itemizedlist>
<listitem>
<simpara>
Select a separate portion of the ephemeral port range for each host at the site on which clients will be running (e.g. 45000-45099 for host A, 45100-45199 for host B, etc.).
</simpara>
</listitem>
<listitem>
<simpara>
Configure the NAT to direct incoming connections in the port range for each host back to the appropriate host (e.g., configure 45000-45099 on the NAT to forward to 45000-45099 on host A).
</simpara>
</listitem>
<listitem>
<simpara>
Configure the Globus Toolkit clients on each site host to use the selected port range for the host using the techniques described in <ulink url="../..gridftp/user/index.html#gridftp-user-config-client-firewall">../..gridftp/user/index.html#gridftp-user-config-client-firewall</ulink>.
</simpara>
</listitem>
<listitem>
<simpara>
Configure Globus Toolkit clients to advertise the firewall as the hostname to use for callbacks from the server host. This is done using the GLOBUS_HOSTNAME environment variable. The client must also have the GLOBUS_HOSTNAME environment variable set to the hostname of the external side of the NAT firewall. This will cause the client software to advertise the firewall&#8217;s hostname as the hostname to be used for callbacks causing connections from the server intended for it to go to the firewall (which redirects them to the client).
</simpara>
</listitem>
</itemizedlist>
</section>
</section>
<section id="_server_site_firewall_requirements">
<title>Server Site Firewall Requirements</title>
<simpara>This section describes firewall policy requirements at sites that host
Grid services. Sites that host Grid services often host Grid clients,
however the policy requirements described in this section are adequate
for clients as well.</simpara>
<section id="_allowed_incoming_ports">
<title>Allowed Incoming Ports</title>
<simpara>A server site should allow incoming connections to the well-known Grid
Service Ports as well as ephemeral ports. These ports are 22/tcp (for
gsi-enabled openssh), 2119/tcp (for GRAM) and 2811/tcp for GridFTP.</simpara>
<simpara>A server not allowing incoming connections in the ephemeral port range
will have the following restrictions:</simpara>
<itemizedlist>
<listitem>
<simpara>
If port 2119/tcp is open, GRAM will allow jobs to be submitted, but further management of the jobs will not be possible.
</simpara>
</listitem>
<listitem>
<simpara>
While it will be possible to make GridFTP control connections if port 2811/tcp is open, it will not possible to actually get or put files.
</simpara>
</listitem>
</itemizedlist>
<simpara>Server sites wishing to restrict incoming connections in the ephemeral
port range should select a range of port numbers. The size of this range
should be approximately 20 ports per expected simultaneous user on a
given host, though this may vary depending on the actual usage
characteristics. While it will take some operational experience to
determine just how big this range needs to be, it is suggested that any
major server site open a port range of at least a few hundred ports.
Grid Services should configured as described in Section to reflect the
site’s chosen range.</simpara>
</section>
<section id="_allowed_outgoing_ports_2">
<title>Allowed Outgoing Ports</title>
<simpara>Server sites should allow outgoing connections freely from ephemeral
ports at the server site to ephemeral ports at client sites as well as
to Grid Service Ports at other sites.</simpara>
</section>
<section id="_network_address_translation_nat_2">
<title>Network Address Translation (NAT)</title>
<simpara>Grid services are not supported to work behind NAT firewalls because the
security mechanisms employed by Globus require knowledge of the actual
IP address of the host that is being connected to.</simpara>
<simpara>We do note there have been some successes in running GT services behind
NAT firewalls.</simpara>
</section>
</section>
<section id="_summary_of_globus_toolkit_traffic">
<title>Summary of Globus Toolkit Traffic</title>
<table
frame="all"
rowsep="1" colsep="1"
>
<title>Summary of Globus Toolkit Traffic</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> Application </entry>
<entry align="left" valign="top"> Network Ports </entry>
<entry align="left" valign="top"> Comments</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>GRAM Gatekeeper(to start jobs)</simpara></entry>
<entry align="left" valign="top"><simpara>To 2119/tcp on server from controllable ephemeral port on client</simpara></entry>
<entry align="left" valign="top"><simpara>Connections back to client (controllable ephemeral port to
controllable ephemeral port) required if executable or data staged
from client or output from job sent back to client. Port 2119/tcp
defined by IANA</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GRAM Job-Manager</simpara></entry>
<entry align="left" valign="top"><simpara>From controllable ephemeral port on client to controllable
ephemeral port on server.</simpara></entry>
<entry align="left" valign="top"><simpara>Port on server selected when original connection made by the
client to the Gatekeeper and returned to the client in a URL. May
result in connection back to client from ephemeral port on server to
controllable ephemeral port on client.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GridFTP</simpara></entry>
<entry align="left" valign="top"><simpara>From controllable ephemeral port on client to port 2811/tcp on
server for control channel.</simpara></entry>
<entry align="left" valign="top"><simpara>Port 2811/tcp defined by IANA.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GSI-Enabled SSH</simpara></entry>
<entry align="left" valign="top"><simpara>From ephemeral port on client to port 22/tcp on server.</simpara></entry>
<entry align="left" valign="top"><simpara>Same as standard SSH. Port 22/tcp defined by IANA.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>MyProxy</simpara></entry>
<entry align="left" valign="top"><simpara>From ephemeral port on client to port 7512/tcp on server.</simpara></entry>
<entry align="left" valign="top"><simpara>Default. Can be modified by site.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="_controlling_the_ephemeral_port_range">
<title>Controlling The Ephemeral Port Range</title>
<simpara>Controllable ephemeral ports in the Globus Toolkit can be restricted to
a given range. setting the environment variable GLOBUS_TCP_PORT_RANGE
can restrict ephemeral ports. The value of this variable should be
formatted as min,max (a comma separated pair). This will cause the GT
libraries (specifically GlobusIO) to select port numbers for
controllable ports in that specified range.</simpara>
<screen>% GLOBUS_TCP_PORT_RANGE=40000,40010
% export GLOBUS_TCP_PORT_RANGE
% globus-gass-server
https://globicus.lbl.gov:40000
^C
%</screen>
<simpara>This environment variable is respected by both clients and servers that
are started from within the environment in which it is set. There are
better ways, however, to configure a globus-job-manager or a GridFTP
server to restrict its port range.</simpara>
<itemizedlist>
<listitem>
<simpara>
globus-job-manager has an option, -globus-tcp-port-range PORT_RANGE that acts in the same manner as the environment variable. It can be specified on the command line or in the configuration file. See the <ulink url="../..gram5/admin/index.html#gram5-cmd-globus-job-manager">job manager documentation</ulink> for all of its options.
</simpara>
</listitem>
<listitem>
<simpara>
See the <ulink url="../..gridftp/admin/index.html#gridftp-config-security-firewalls">GridFTP documentation</ulink> for information about using GridFTP with firewalls.
</simpara>
</listitem>
</itemizedlist>
</section>
</section>
</chapter>
<chapter id="gtadmin-basic-setup">
<title>Basic Setup for GT 6.0</title>
<simpara>The <ulink url="../../admin/quickstart/index.html">Quickstart Guide</ulink> walks you
through setting up basic services on multiple machines.</simpara>
</chapter>
<chapter id="gtadmin-platform">
<title>Platform Notes</title>
<section id="_platform_notes">
<title>Platform Notes</title>
<section id="gtadmin-platform-osx">
<title>Mac OS X 10.8+ (Mountain Lion, Mavericks, Yosemite )</title>
<simpara>The GNU autotools and libtool is no longer distributed with OS X 10.8+.
If you are building from git repository, you&#8217;ll need to install the
latest versions of those tools. If you are building from the source
installer, these do not need to be installed.</simpara>
<itemizedlist>
<listitem>
<simpara>
<ulink url="http://ftpmirror.gnu.org/autoconf/">GNU Autoconf</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://ftpmirror.gnu.org/automake/">GNU Automake</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://ftpmirror.gnu.org/libtool/">GNU Libtool</ulink>
</simpara>
</listitem>
</itemizedlist>
<simpara>Configure libtool with the configuration option
<emphasis role="strong"><literal>--program-prefix=g</literal></emphasis> to cause the libtool script to be named
<emphasis role="strong"><literal>glibtool</literal></emphasis> to avoid conflicts with the OS X libtool program which
provides different functionality than GNU libtool. Install libtool (and
the other tools) into the a common directory. If you do so, you&#8217;ll need
to set the <literal>LIBTOOLIZE</literal> environment variable to the path to the
<emphasis role="strong"><literal>glibtoolize</literal></emphasis> program. You&#8217;ll need to include the autotools in
your path to regenerate the configurable scripts and Makefile.in files
for the toolkit.</simpara>
<simpara>The Globus Toolki build requires the <emphasis role="strong"><literal>pkg-config</literal></emphasis> package to be
installed. It is available from
<ulink url="http://pkgconfig.freedesktop.org/releases/">freedesktop.org</ulink>.
Additionally, you&#8217;ll need to set the environment variable
<literal>PKG_CONFIG_PATH</literal> to <literal>/usr/lib/pkgconfig</literal> prior to running the
configure script.  prior to running the configure script.</simpara>
</section>
</section>
</chapter>
<chapter id="gtadmin-appendixptr">
<title>Appendix</title>
<simpara>The Install Guide appendix can be found
<ulink url="../../admin/install/appendix.html">here.</ulink></simpara>
</chapter>
</book>
