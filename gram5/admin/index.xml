<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<book lang="en">
<bookinfo>
    <title>GT 6.0 GRAM5: System Administrator&#8217;s Guide</title>
</bookinfo>
<preface>
<title></title>
<simpara>This guide contains configuration information for system administrators
working with GRAM5. It describes procedures typically performed by
system administrators, including GRAM5 software installation,
configuration, testing, and debugging. Readers should be familiar with
the <ulink url="../..gram5/key/index.html">GRAM5 Key Concepts</ulink> to understand the
motivation for and interaction between the various deployed components.</simpara>
</preface>
<chapter id="gram5-admin-install">
<title>GRAM5 Installation</title>
<section id="_introduction">
<title>Introduction</title>
<simpara>The Globus Toolkit provides GRAM5: a service to submit, monitor, and
cancel jobs on Grid computing resources. In GRAM5, a job consists of a
computation and, optionally, file transfer and management operations
related to the computation. Some users, particularly interactive ones,
benefit from accessing output data files as the job is running.
Monitoring consists of querying for and/or subscribing to status
information, such as job state changes.</simpara>
<simpara>GRAM5 relies on <ulink url=""></ulink> mechanisms for security, and interacts with
<ulink url="">GridFTP services</ulink> to stage files to compute resources. Please see
their respective Administrator&#8217;s guides for information about
installing, configuring, and managing those systems. In particular, you
must understand the tasks in
<ulink url="../../admin/install/index.html#gtadmin-install">../../admin/install/index.html#gtadmin-install</ulink> and install the
basic GRAM5 packages, and complete the tasks in
<ulink url="../../admin/install/index.html#gtadmin-basic-security">../../admin/install/index.html#gtadmin-basic-security</ulink>.</simpara>
</section>
<section id="_planning_your_gram5_installation">
<title>Planning your GRAM5 installation</title>
<simpara>Before installing GRAM5 on a server, you&#8217;ll first need to plan what
Local Resource
        Managers (LRMs) you want GRAM5 to interface with,
what LRM you want to have as your default GRAM5 service, and whether
you&#8217;ll be using the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> to process
LRM events.</simpara>
<simpara>GRAM5 requires a few services to be running to function: the Gatekeeper
and the Scheduler Event Generator (SEG). The supported way to run these
services is via the System-V style init scripts provided with the
GRAM5-related packages. The gatekeeper daemon can also be configured to
start via an internet superserver such as <emphasis role="strong"><literal>inetd</literal></emphasis> or
<emphasis role="strong"><literal>xinetd</literal></emphasis> though that is beyond the scope of this document. The
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> can not be run in that way.</simpara>
<section id="_choosing_an_lrm_adapter">
<title>Choosing an LRM Adapter</title>
<simpara>GRAM5 in GT 6.0 supports the following LRM adapters: Condor, PBS,
GridEngine, and Fork. These LRM adapters translate GRAM5 job
specifications into LRM-specific job descriptions and scripts to run
them, as well as interfaces to the LRM to determine job termination
status.</simpara>
<simpara>If you&#8217;re not familiar with the supported LRMs, you might want to start
with the Fork one to get familiar with how GRAM5 works. This adapter
simply forks the job and runs it on the GRAM5 node. You can then install
one of the other LRMs and its adapter to provide batch or
high-throughput job scheduling.</simpara>
<section id="_default_gram5_service">
<title>Default GRAM5 Service</title>
<simpara>GRAM5 can be configured to support multiple LRMs on the same service
machine. In that case, one LRM is typically configured as the default
LRM which is used when a client uses a shortened version of a GRAM5
<ulink url="../..gram5/user/index.html#gram5-user-resource-names">resource
name</ulink>. A common configuration is to configure a batch system interface
as the default, and provide the <literal>jobmanager-fork</literal> service as well for
simple jobs, such as creating directories or staging data.</simpara>
</section>
<section id="_job_status_method">
<title>Job Status Method</title>
<simpara>GRAM5 has two ways of determining job state transitions: polling the LRM
and using the Scheduler Event Generator (SEG) service. When polling,
each user&#8217;s <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> will periodically execute an
LRM-specific command to determine the state of each job. On systems with
many users, or with users submitting a large number of jobs, this can
cause significant resource use on the GRAM5 service machine. Instead,
the GRAM5 service can be configured (on a per-LRM basis) to use the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> service to more efficiently
process LRM state changes. [NOTE]</simpara>
<simpara>Not all LRM adapters provide an interface to the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>, and some require LRM-specific configuration to work properly. This is described in more detail.</simpara>
</section>
</section>
</section>
<section id="gram5-admin-installing-lrm-packages">
<title>Installing LRM Adapter Packages</title>
<simpara>There are several LRM adapters included in the GT 6.0. For some, there
is a <literal>-setup-poll</literal> and <literal>-setup-seg</literal> package which installs the
adapter and configuration file needed for job status via polling or the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> program.</simpara>
<simpara>There are three ways to get LRM adapters: as RPM packages, as Debian
packages, and from the source installer. These installation methods are
described in <ulink url="../../admin/install/index.html">../../admin/install/index.html</ulink>.</simpara>
<simpara>LRM adapter packages included in the GT 6.0 release are:</simpara>
<table
frame="all"
rowsep="1" colsep="1"
>
<title>GRAM5 LRM Adapters</title>
<tgroup cols="4">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="25*"/>
<colspec colname="col_3" colwidth="25*"/>
<colspec colname="col_4" colwidth="25*"/>
<thead>
<row>
<entry align="left" valign="top"> LRM Adapter </entry>
<entry align="left" valign="top"> Poll Package </entry>
<entry align="left" valign="top"> SEG Package </entry>
<entry align="left" valign="top"> Installer Target</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>fork</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-fork-setup-poll</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-fork-setup-seg <footnote><simpara>Not recommended for
production use</simpara></footnote></simpara></entry>
<entry align="left" valign="top"><simpara>globus_gram_job_manager_fork</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><ulink url="http://www.clusterresources.com/products/torque-resource-manager.php">pbs</ulink></simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-pbs-setup-poll</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-pbs-setup-seg</simpara></entry>
<entry align="left" valign="top"><simpara>globus_gram_job_manager_pbs</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><ulink url="http://www.cs.wisc.edu/condor/">Condor</ulink></simpara></entry>
<entry align="left" valign="top"><simpara>N/A</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-condor <footnote><simpara>This LRM uses a SEG-like mechanism
included in the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program, but not the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> service.</simpara></footnote></simpara></entry>
<entry align="left" valign="top"><simpara>globus_gram_job_manager_condor</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>GridEngine</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-sge-setup-poll</simpara></entry>
<entry align="left" valign="top"><simpara>globus-gram-job-manager-sge-setup-seg</simpara></entry>
<entry align="left" valign="top"><simpara>globus_gram_job_manager_sge</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
</chapter>
<chapter id="gram5-admin-managing">
<title>Common Administrative Tasks</title>
<simpara>There are several tools provided with GT 6.0 to manage GRAM5, as well as
OS-specific tools to start and stop some of the services. There are
tools to manage user authorization, which services are enabled, which
scheduler event generator modules are enabled, and to test the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> service.</simpara>
<section id="_managing_gram5_users">
<title>Managing GRAM5 Users</title>
<simpara>Before a user may interact with the GRAM5 service to submit jobs, he or
she must be authorized to use the service. In order to be authorized, a
GRAM5 administrator must add the user&#8217;s credential name and local
account mapping to the <literal>/etc/grid-mapfile</literal>. This can be done using the
. This can be done using the
<ulink url="../..gsic/pi/index.html#grid-mapfile-add-entry">../..gsic/pi/index.html#grid-mapfile-add-entry</ulink> and
<ulink url="../..gsic/pi/index.html#grid-mapfile-delete-entry">../..gsic/pi/index.html#grid-mapfile-delete-entry</ulink> tools. For more
information, see the <ulink url=""></ulink> manual.</simpara>
</section>
<section id="gram5-admin-starting-and-stopping">
<title>Starting and Stopping GRAM5 services</title>
<simpara>In order to run the service, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>, and, if
applicable to your configuration, the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> services must be running on
your system. The packages for these services include init scripts and
configuration files which can be used to configure, start, and stop the
service.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> and
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> init scripts handle the
following actions: <literal>start</literal>, <literal>stop</literal>, <literal>status</literal>, <literal>restart</literal>,
<literal>condrestart</literal>, <literal>try-restart</literal>, <literal>reload</literal>, and <literal>force-reload</literal>. The
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> script also accepts another
optional parameter to start or stop a particular
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> module. If the second parameter
is not present, then all services will be acted on.</simpara>
<section id="_debian_specifics">
<title>Debian Specifics</title>
<simpara>If you installed using Debian packaging tools, then the services will
automatically be started upon installation. To start or stop the
service, use the command <emphasis role="strong"><literal>invoke-rc.d</literal></emphasis> with the service name and
action.</simpara>
</section>
<section id="_rpm_specifics">
<title>RPM Specifics</title>
<simpara>If you installed using the RPM packaging tools, then the services will
be installed but not enabled by default. To enable the services to start
at boot time, use the commands:</simpara>
<screen>#  chkconfig globus-gatekeeper on
#  chkconfig globus-scheduler-event-generator on</screen>
<simpara>To start or stop the services, use the <emphasis role="strong"><literal>service</literal></emphasis> command to run
the init scripts with the service name and action and optional
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> module.</simpara>
</section>
</section>
<section id="_enabling_and_disabling_gram5_services">
<title>Enabling and Disabling GRAM5 Services</title>
<simpara>The GRAM5 packages described in
<ulink url="#gram5-admin-installing-lrm-packages">#gram5-admin-installing-lrm-packages</ulink> will automatically register
themselves with the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> and
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> services. The first LRM adapter
installed will be configured as the default Job Manager service. To list
the installed services, change the default, or disable a service, use
the <ulink url="#globus-gatekeeper-admin">#globus-gatekeeper-admin</ulink> tool.</simpara>
<example>
<title>Using globus-gatekeeper-admin to set the default service</title>
<simpara>This example shows how to use the <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> tool
to list the available services and then choose one as the default:</simpara>
<screen>#  globus-gatekeeper-admin -l
jobmanager-condor [ENABLED]
jobmanager-fork-poll [ENABLED]
jobmanager-fork [ALIAS to jobmanager-fork-poll]
#  globus-gatekeeper-admin -e jobmanager-condor -n jobmanager
#  globus-gatekeeper-admin -l
jobmanager-condor [ENABLED]
jobmanager-fork-poll [ENABLED]
jobmanager [ALIAS to jobmanager-condor]
jobmanager-fork [ALIAS to jobmanager-fork-poll]</screen>
</example>
</section>
<section id="_enabling_and_disabling_seg_modules">
<title>Enabling and Disabling SEG Modules</title>
<simpara>The <literal>-setup-seg</literal> packages described in
<ulink url="#gram5-admin-installing-lrm-packages">#gram5-admin-installing-lrm-packages</ulink> will automatically register
themselves with the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> service. To
disable a module from running when the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> service is started, use the
<ulink url="#globus-scheduler-event-generator-admin">#globus-scheduler-event-generator-admin</ulink> tool.
.Using globus-scheduler-event-generator-admin to disable a SEG module</simpara>
<informalexample>
<simpara>This example shows how to stop the <literal>pbs</literal>
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> module and disable it so it
will not restart when the system is rebooted:</simpara>
<screen>#  /etc/init.d/globus-scheduler-event-generator stop pbs
Stopped globus-scheduler-event-generator                   [  OK  ]
#  globus-scheduler-event-generator-admin -d pbs
#  globus-scheduler-event-generator-admin -l
pbs [DISABLED]</screen>
</informalexample>
</section>
</chapter>
<chapter id="gram5-configuring">
<title>Configuring GRAM5</title>
<simpara>GRAM5 is designed to be usable by default without any manual
configuration. However, there are many ways to customize a GRAM5
installation to better interact with site policies, filesystem layouts,
LRM interactions, logging, and auditing. In addition to GRAM5-specific
configuration, see <ulink url="../../gsic/admin/index.html#gsic-configuring">../../gsic/admin/index.html#gsic-configuring</ulink>
for information about configuring GSI security.</simpara>
<section id="gram5-configuring-gatekeeper">
<title>Gatekeeper Configuration</title>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> has many configuration options related to
network configuration, security, logging, service path, and nice level.
This configuration is located in:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">RPM Package</emphasis>
</term>
<listitem>
<simpara>
     <literal>/etc/sysconfig/globus-gatekeeper</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Debian Package</emphasis>
</term>
<listitem>
<simpara>
     <literal>/etc/default/globus-gatekeeper</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Source Installer</emphasis>
</term>
<listitem>
<simpara>
     <emphasis>PREFIX</emphasis><literal>/etc/globus-gatekeeper.conf</literal>
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>The following configuration variables are available in the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> configuration file:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_PORT</emphasis>
</term>
<listitem>
<simpara>
     Gatekeeper Service Port. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>2119</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_LOCATION</emphasis>
</term>
<listitem>
<simpara>
     Globus Installation Path. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the paths defined at package compilation time.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_LOG</emphasis>
</term>
<listitem>
<simpara>
     Gatekeeper Log Filename. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> logs to syslog using the <literal>GRAM-gatekeeper</literal> log identification prefix. The default configuration value is <literal>/var/log/globus-gatekeeper.log</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_GRID_SERVICES</emphasis>
</term>
<listitem>
<simpara>
     Path to grid service definitions. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>/etc/grid-services</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_GRIDMAP</emphasis>
</term>
<listitem>
<simpara>
     Path to grid-mapfile for authorization. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>/etc/grid-security/grid-mapfile</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_CERT_DIR</emphasis>
</term>
<listitem>
<simpara>
     Path to a trusted certificate root directory. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>/etc/grid-security/certificates</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_CERT_FILE</emphasis>
</term>
<listitem>
<simpara>
     Path to the gatekeeper&#8217;s certificate. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>/etc/grid-security/hostcert.pem</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_KEY_FILE</emphasis>
</term>
<listitem>
<simpara>
     Path to the gatekeeper&#8217;s private key. If not set, the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses the default of <literal>/etc/grid-security/hostkey.pem</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_KERBEROS_ENABLED</emphasis>
</term>
<listitem>
<simpara>
     Flag indicating whether or not the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> will use a kerberos GSSAPI implementation instead of the GSI GSSAPI implementation (untested).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_KMAP</emphasis>
</term>
<listitem>
<simpara>
     Path to the KMAP authentication module. (untested).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_PIDFILE</emphasis>
</term>
<listitem>
<simpara>
     Path to a file where the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>'s process ID is written. If not set, <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> uses <literal>/var/run/globus-gatekeeper.pid</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_GATEKEEPER_NICE_LEVEL</emphasis>
</term>
<listitem>
<simpara>
     Process nice level for <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> and <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> processes. If not set, the default system process nice level is used.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>After modifying the configuration file, restart the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> using the methods described in
<ulink url="../../gram5/admin/index.html#gram5-admin-starting-and-stopping">../../gram5/admin/index.html#gram5-admin-starting-and-stopping</ulink>.</simpara>
</section>
<section id="gram5-configuring-seg">
<title>Scheduler Event Generator Configuration</title>
<simpara>The <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> has several configuration
options related to filesystem paths. This configuration is located in:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">RPM Package</emphasis>
</term>
<listitem>
<simpara>
     <literal>/etc/sysconfig/globus-scheduler-event-generator</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Debian Package</emphasis>
</term>
<listitem>
<simpara>
     <literal>/etc/default/globus-scheduler-event-generator</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">Source Installer</emphasis>
</term>
<listitem>
<simpara>
     <emphasis>PREFIX</emphasis><literal>/etc/globus-scheduler-event-generator.conf</literal>
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>The following configuration variables are available in the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> configuration file:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_SEG_PIDFMT</emphasis>
</term>
<listitem>
<simpara>
     Scheduler Event Generator PID file path format. Modify this to be the location where the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> writes its process IDs (one per configured LRM). The format is a <literal>printf</literal> format string with one <literal>%s</literal> to be replaced by the LRM name. By default, <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> uses <literal>/var/run/globus-scheduler-event-generator-%s.pid</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_SEG_LOGFMT</emphasis>
</term>
<listitem>
<simpara>
     Scheduler Event Generator Log path format. Modify this to be the location where <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> writes its event logs. The format is a <literal>printf</literal> format string with one <literal>%s</literal> to be replaced by the LRM name. By default, <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> uses <literal>/var/lib/globus/globus-seg-%s</literal>. If you modify this value, you&#8217;ll need to also update the LRM configuration file to look for the log file in the new location.. If you modify this value, you&#8217;ll need to also update the LRM configuration file to look for the log file in the new location.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_SEG_NICE_LEVEL</emphasis>
</term>
<listitem>
<simpara>
     Process nice level for <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> processes. If not set, the default system process nice level is used.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>After modifying the configuration file, restart the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> using the methods described in
<ulink url="../../gram5/admin/index.html#gram5-admin-starting-and-stopping">../../gram5/admin/index.html#gram5-admin-starting-and-stopping</ulink>.</simpara>
</section>
<section id="gram5-configuring-jobmanager">
<title>Job Manager Configuration</title>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> process is started by the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> and uses the configuration defined in the
service entry for the resource name. By default, these service entries
use a common configuration file for most job manager features. This
configuration is located in:</simpara>
<variablelist>
<varlistentry>
<term>
RPM Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/globus-gram-job-manager.conf</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Debian Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/globus-gram-job-manager.conf</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Source Installer
</term>
<listitem>
<simpara>
    <emphasis>PREFIX</emphasis><literal>/etc/globus-gram-job-manager.conf</literal>
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>This configuration file is used to construct the command-line options
for the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program. Thus, all of the options
described in <ulink url="#gram5-cmd-globus-job-manager">#gram5-cmd-globus-job-manager</ulink> may be used.</simpara>
<section id="_job_manager_logging">
<title>Job Manager Logging</title>
<simpara>From an administrator&#8217;s perspective, the most important job manager
configuration options are likely the ones related to logging and
auditing. The default GRAM5 configuration puts logs in
<literal>/var/log/globus/gram_USERNAME.log</literal>, with logging enabled at the ,
with logging enabled at the <literal>FATAL</literal> and <literal>ERROR</literal> levels. To enable
more fine-grained logging, add the option <emphasis>-log-levels ' to
<literal>/etc/globus/globus-gram-job-manager.conf</literal>. The value for . The value
for 'LEVELS</emphasis> is a set of log levels joined by the <literal>|</literal> character. The
available log levels are:</simpara>
<table id="gram5-log-levels"
frame="all"
rowsep="1" colsep="1"
>
<title>GRAM5 Log Levels</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> Level </entry>
<entry align="left" valign="top"> Meaning </entry>
<entry align="left" valign="top"> Default Behavior</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara><literal>FATAL</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Problems which cause the job manager to terminate prematurely.</simpara></entry>
<entry align="left" valign="top"><simpara>Enabled</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>ERROR</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Problems which cause a job or operation to fail.</simpara></entry>
<entry align="left" valign="top"><simpara>Enabled</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>WARN</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Problems which cause minor problems with job execution or monitoring.</simpara></entry>
<entry align="left" valign="top"><simpara>Disabled</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>INFO</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Major events in the lifetime of the job manager and its jobs.</simpara></entry>
<entry align="left" valign="top"><simpara>Disabled</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>DEBUG</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Minor events in the lifetime of jobs.</simpara></entry>
<entry align="left" valign="top"><simpara>Disabled</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara><literal>TRACE</literal></simpara></entry>
<entry align="left" valign="top"><simpara>Job processing details.</simpara></entry>
<entry align="left" valign="top"><simpara>Disabled</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<simpara>In RPM or Debian package installs, these logs will be configured to be
rotated via <emphasis role="strong"><literal>logrotate</literal></emphasis>. See
<literal>/etc/logrotate.d/globus-job-manager</literal> for details on the default log
rotation configuration.  for details on the default log rotation
configuration.</simpara>
</section>
<section id="_firewall_configuration">
<title>Firewall Configuration</title>
<simpara>There are also a few configuration options related to the TCP ports the
the Job Manager users. This port configuration is useful when dealing
with firewalls that restrict incoming or outgoing ports. To restrict
incoming ports (those that the Job Manager listens on), add the
command-line option <emphasis>-globus-tcp-port-range</emphasis> to the Job Manager
configuration file like this:</simpara>
<screen>-globus-tcp-port-range MIN-PORT,MAX-PORT</screen>
<simpara>Where <emphasis>MIN-PORT</emphasis> is the minimum TCP port number the Job Manager will
listen on and <emphasis>MAX-PORT</emphasis> is the maximum TCP port number the Job Manager
will listen on.</simpara>
<simpara>Similarly, to restrict the outgoing port numbers that the job manager
connects form, use the command-line option <emphasis>-globus-tcp-source-range</emphasis>,
like this:</simpara>
<screen>-globus-tcp-source-range MIN-PORT,MAX-PORT</screen>
<simpara>Where <emphasis>MIN-PORT</emphasis> is the minimum outgoing TCP port number the Job Manager
will use and <emphasis>MAX-PORT</emphasis> is the maximum TCP outgoing port number the Job
Manager will use.</simpara>
<simpara>For more information about Globus and firewalls, see
<ulink url="../..//admin/install/index.html#gt-admin-firewall">../..//admin/install/index.html#gt-admin-firewall</ulink>.</simpara>
</section>
</section>
<section id="gram5-configuring-lrm">
<title>LRM Adapter Configuration</title>
<simpara>Each LRM adapter has its own configuration file which can help customize
the adapter to the site configuration. Some LRMs use non-standard
programs to launch parallel or MPI jobs, and some might want to provide
queue or project validation to make it easier to translate job failures
into problems that can be described by GRAM5. All of the LRM adapter
configuration files consist of simple <literal>variable="value"</literal> pairs, with a
leading <literal>#</literal> starting a comment until end-of-line.</simpara>
<simpara>Generally, the GRAM5 LRM configuration files are located in the globus
configuration directory, with each configuration file named by the LRM
name (<literal>fork</literal>, <literal>condor</literal>, <literal>pbs</literal>, <literal>sge</literal>, or <literal>slurm</literal>). The
following are the paths to these configurations:</simpara>
<variablelist>
<varlistentry>
<term>
RPM Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/globus-</literal><emphasis>LRM</emphasis><literal>.conf</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Debian Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/globus-</literal><emphasis>LRM</emphasis><literal>.conf</literal>:
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Source Installer
</term>
<listitem>
<simpara>
    <emphasis>PREFIX</emphasis><literal>/etc/globus/globus-</literal><emphasis>LRM</emphasis><literal>.conf</literal>
</simpara>
</listitem>
</varlistentry>
</variablelist>
<section id="_fork">
<title>Fork</title>
<simpara>The <literal>globus-fork.conf</literal> configuration file can define the following
configuration parameters:  configuration file can define the following
configuration parameters:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">log_path</emphasis>
</term>
<listitem>
<simpara>
     Path to the <literal>globus-fork.log</literal> file used by the  file used by the <emphasis role="strong"><literal>globus-fork-starter</literal></emphasis> and fork SEG module.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">mpiexec, mpirun</emphasis>
</term>
<listitem>
<simpara>
     Path to <emphasis role="strong"><literal>mpiexec</literal></emphasis> and <emphasis role="strong"><literal>mpirun</literal></emphasis> for parallel jobs which use MPI. By default, these are not configured. The LRM adapter will use <emphasis role="strong"><literal>mpiexec</literal></emphasis> over <emphasis role="strong"><literal>mpirun</literal></emphasis> if both are defined.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">softenv_dir</emphasis>
</term>
<listitem>
<simpara>
     Path to an installation of <ulink url="http://www.mcs.anl.gov/hs/software/systems/softenv/softenv-intro.html">softenv</ulink>, which is used on some systems to manage application environment variables.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_condor">
<title>Condor</title>
<simpara>The <literal>globus-condor.conf</literal> configuration file can define the following
configuration parameters:  configuration file can define the following
configuration parameters:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">condor_os</emphasis>
</term>
<listitem>
<simpara>
     Custom value for the <literal>OpSys</literal> requirement for condor jobs. If not specified, the system-wide default will be used.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">condor_arch</emphasis>
</term>
<listitem>
<simpara>
     Custom value for the <literal>OpSys</literal> requirement for condor jobs. If not specified, the system-wide default will be used.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">condor_submit, condor_rm</emphasis>
</term>
<listitem>
<simpara>
     Path to the condor commands that the LRM adapter uses. These are usually determined when the LRM adapter is compiled if the commands are in the <literal>PATH</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">condor_config</emphasis>
</term>
<listitem>
<simpara>
     Value of the <literal>CONDOR_CONFIG</literal> environment variable, which might be needed to use condor in some cases.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">check_vanilla_files</emphasis>
</term>
<listitem>
<simpara>
     Enable checking if executable, standard input, and directory are valid paths for <literal>vanilla</literal> universe jobs. This can detect some types of errors before submitting jobs to condor, but only if the filesystems between the condor submit host and condor execution hosts are equivalent. In other cases, this may cause unneccessary job failures.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">condor_mpi_script</emphasis>
</term>
<listitem>
<simpara>
     Path to a script to launch MPI jobs on condor
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_pbs">
<title>PBS</title>
<simpara>The <literal>globus-pbs.conf</literal> configuration file can define the following
configuration parameters:  configuration file can define the following
configuration parameters:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">log_path</emphasis>
</term>
<listitem>
<simpara>
     Path to PBS server_logs directory. The PBS SEG module parses these logs to generate LRM events.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">pbs_default</emphasis>
</term>
<listitem>
<simpara>
     Name of the PBS server node, if not the same as the GRAM service node.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">mpiexec, mpirun</emphasis>
</term>
<listitem>
<simpara>
     Path to <emphasis role="strong"><literal>mpiexec</literal></emphasis> and <emphasis role="strong"><literal>mpirun</literal></emphasis> for parallel jobs which use MPI. By default these are not configured. The LRM adapter will use <emphasis role="strong"><literal>mpiexec</literal></emphasis> over <emphasis role="strong"><literal>mpirun</literal></emphasis> if both are defined.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">qsub, qstat, qdel</emphasis>
</term>
<listitem>
<simpara>
     Path to the LRM-specific command to submit, check, and delete PBS jobs. These are usually determined when the LRM adapter is compiled if they are in the <literal>PATH</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">cluster</emphasis>
</term>
<listitem>
<simpara>
     If this value is set to <literal>yes</literal>, then the LRM adapter will attempt to use a remote shell command to launch multiple instances of the executable on different nodes, as defined by the file named by the <literal>PBS_NODEFILE</literal> environment variable.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">remote_shell</emphasis>
</term>
<listitem>
<simpara>
     Remote shell command to launch processes on different nodes when <literal>cluster</literal> is set to <literal>yes</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">cpu_per_node</emphasis>
</term>
<listitem>
<simpara>
     Number of instances of the executable to launch per allocated node.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">softenv_dir</emphasis>
</term>
<listitem>
<simpara>
     Path to an installation of <ulink url="http://www.mcs.anl.gov/hs/software/systems/softenv/softenv-intro.html">softenv</ulink> which is used on some systems to manage application environment variables.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_sge">
<title>SGE</title>
<simpara>The <literal>globus-sge.conf</literal> configuration file can define the following
configuration parameters:  configuration file can define the following
configuration parameters:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">sge_root</emphasis>
</term>
<listitem>
<simpara>
     Root location of the GridEngine installation. If this is set to <literal>undefined</literal>, then the LRM adapter will try to determine it from the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> environment, or if not there, the contents of the file named by the <literal>sge_config</literal> configuration parameter.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">sge_cell</emphasis>
</term>
<listitem>
<simpara>
     Name of the GridEngine cell to interact with. If this is set to <literal>undefined</literal>, then the LRM adapter will try to determine it from the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> environment, or if not there, the contents of the file named by the <literal>sge_config</literal> configuration parameter.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">sge_config</emphasis>
</term>
<listitem>
<simpara>
     Path to a file which defines the <literal>SGE_ROOT</literal> and the <literal>SGE_CELL</literal> environment variables.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">log_path</emphasis>
</term>
<listitem>
<simpara>
     Path to GridEngine reporting file. This value is used by the SGE SEG module. If this is used, GridEngine must be configured to write a reporting file and not load reporting data into an ARCo database.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">qsub, qstat, qdel, qconf</emphasis>
</term>
<listitem>
<simpara>
     Path to the LRM-specific command to submit, check, and delete GridEngine jobs. These are usually determined when the LRM adapter is compiled if they are in the <literal>PATH</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">sun_mprun, mpirun</emphasis>
</term>
<listitem>
<simpara>
     Path to <emphasis role="strong"><literal>mprun</literal></emphasis> and <emphasis role="strong"><literal>mpirun</literal></emphasis> for parallel jobs which use MPI. By default these are not configured. The LRM adapter will use <emphasis role="strong"><literal>mprun</literal></emphasis> over <emphasis role="strong"><literal>mpirun</literal></emphasis> if both are defined.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">default_pe</emphasis>
</term>
<listitem>
<simpara>
     Default parallel environment to submit parallel jobs to. If this is not set, then clients must use the <literal>parallel_environment</literal> RSL attribute to choose one.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">validate_pes</emphasis>
</term>
<listitem>
<simpara>
     If this value is set to <literal>yes</literal>, then the LRM adapter will verify that the <literal>parallel_environment</literal> RSL attribute value matches one of the parallel environments supported by this GridEngine service.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">available_pes</emphasis>
</term>
<listitem>
<simpara>
     If this value is defined, use it as a list of parallel environments supported by this GridEngine deployment for validation when <literal>validate_pes</literal> is set to <literal>yes</literal>. If validation is being done but this value is not set, then the LRM adapter will query the GridEngine service to determine available parallel environments at startup.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">default_queue</emphasis>
</term>
<listitem>
<simpara>
     Default queue to use if the job description does not name one.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">validate_queues</emphasis>
</term>
<listitem>
<simpara>
     If this value is set to <literal>yes</literal>, then the LRM adapter will verify that the <literal>queue</literal> RSL attribute value matches one of the queues supported by this GridEngine service.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">available_queues</emphasis>
</term>
<listitem>
<simpara>
     If this value is defined, use it as a list of queues supported by this GridEngine deployment for validation when <literal>validate_queues</literal> is set to <literal>yes</literal>. If validation is being done but this value is not set, then the LRM adapter will query the GridEngine service to determine available queues at startup.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<section id="_enabling_reporting_for_the_gridengine_scheduler_event_generator">
<title>Enabling reporting for the GridEngine Scheduler Event Generator</title>
<simpara>In order to use the Scheduler Event Generator with GridEngine, the job
reporting feature must be enabled, and ARCo database storage must not be
enabled. To enable this, use the command <emphasis role="strong"><literal>qconf -mconf</literal></emphasis> and modify
the <literal>reporting_params</literal> parameter so that the options <literal>reporting</literal> and
<literal>joblog</literal> are set to <literal>true</literal>.</simpara>
</section>
</section>
<section id="_slurm">
<title>SLURM</title>
<simpara>The <literal>globus-slurm.conf</literal> configuration file can define the following
configuration parameters:  configuration file can define the following
configuration parameters:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">srun, sbatch, salloc, scancel</emphasis>
</term>
<listitem>
<simpara>
     Path to the SLURM commands.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">mpi_type</emphasis>
</term>
<listitem>
<simpara>
     MPI implementation to use (either openmpi or mpich2).
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">openmpi_path</emphasis>
</term>
<listitem>
<simpara>
     Path to the OpenMPI implementation if available
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">mpich2_path</emphasis>
</term>
<listitem>
<simpara>
     Path to the MPICH 2 implementation if available
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="_auditing">
<title>Auditing</title>
<simpara>The <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> configuration defines information about
the database to load the GRAM5 audit records into. This configuration is
located in:</simpara>
<variablelist>
<varlistentry>
<term>
RPM Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/gram-audit.conf</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Debian Package
</term>
<listitem>
<simpara>
    <literal>/etc/globus/gram-audit.conf</literal>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
Source Installer
</term>
<listitem>
<simpara>
    <emphasis>PREFIX</emphasis><literal>/etc/globus/gram-audit.conf</literal>
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara>This configuration file contains the following attributes. Each
attribute is defined by a <literal>ATTRIBUTE:VALUE</literal> pair.</simpara>
<table
frame="all"
rowsep="1" colsep="1"
>
<title>Audit Configuration Attributes</title>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> Attribute Name </entry>
<entry align="left" valign="top"> Value </entry>
<entry align="left" valign="top"> Default</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>DRIVER</simpara></entry>
<entry align="left" valign="top"><simpara>The name of the Perl 5 DBI driver for the database to be used. The supported
  drivers for this program are &lt;literal&gt;SQLite&lt;/literal&gt;, &lt;literal&gt;Pg&lt;/literal&gt;
  (for PostgreSQL), and &lt;literal&gt;mysql&lt;/literal&gt;. &lt;/simpara&gt;</simpara></entry>
<entry align="left" valign="top"><simpara><literal>SQLite</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>DATABASE</simpara></entry>
<entry align="left" valign="top"><simpara>The DBI data source specfication to contact the audit database.</simpara></entry>
<entry align="left" valign="top"><simpara><literal>dbname=/var/gram_audit_database/gram_audit.db</literal></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>USERNAME</simpara></entry>
<entry align="left" valign="top"><simpara>Username to authenticate as to the database</simpara></entry>
<entry align="left" valign="top"><simpara></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>PASSWORD</simpara></entry>
<entry align="left" valign="top"><simpara>Password to use to authenticate with the database</simpara></entry>
<entry align="left" valign="top"><simpara></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>AUDITVERSION</simpara></entry>
<entry align="left" valign="top"><simpara>Version of the audit database table schemas to use. May be <literal>1</literal> or <literal>1TG</literal>
for this version of the software.</simpara></entry>
<entry align="left" valign="top"><simpara><literal>1</literal></simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="_rsl_attributes">
<title>RSL Attributes</title>
<simpara>GRAM5 uses the <ulink url="../../gram5/pi/index.html#gram5-rsl">RSL language</ulink> to
encode job descriptions. The attributes supported by gram are defined in
<ulink url="../../gram5/pi/index.html#gram5-rvf">RSL Validation Files</ulink>. These
definitions contain information about when the different RSL attributes
are valid and what their default values might be if not present. GRAM5
will look in <literal>/etc/globus/gram/job-manager.rvf</literal> and  and
<literal>/etc/globus/gram/LRM.rvf</literal> for site-specfic changes to the RSL
validation file.  for site-specfic changes to the RSL validation file.</simpara>
</section>
</chapter>
<chapter id="gram5-audit-logging">
<title>Audit Logging</title>
<section id="gram5-audit-logging-overview">
<title>Overview</title>
<simpara>GRAM5 includes mechanisms to provide access to audit and accounting
information associated with jobs that GRAM5 submits to a local resource
manager (LRM) such as Torque, GridEngine, or Condor.</simpara>
<simpara>In some scenarios, it is desirable to get general information about the
usage of the underlying LRM, such as:</simpara>
<itemizedlist>
<listitem>
<simpara>
What kinds of jobs were submitted via GRAM?
</simpara>
</listitem>
<listitem>
<simpara>
How long did the processing of a job take?
</simpara>
</listitem>
<listitem>
<simpara>
How many jobs were submitted by user X?
</simpara>
</listitem>
</itemizedlist>
<simpara>The following three use cases give a better overview of the meaning and
purpose of auditing and accounting:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>
<emphasis role="strong">Group Access</emphasis>: A grid resource provider allows a remote service
(e.g., a gateway or portal) to submit jobs on behalf of multiple users.
The grid resource provider only obtains information about the identity
of the remote submitting service and thus does not know the identity of
the users for which the grid jobs are submitted. This group access is
allowed under the condition that the remote service stores audit
information so that, if and when needed, the grid resource provider can
request and obtain information to track a specific job back to an
individual user.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Query Job Accounting</emphasis>: A client that submits a job needs to be able
to obtain, after the job has completed, information about the resources
consumed by that job. In portal and gateway environments where many
users submit many jobs against a single allocation, this per-job
accounting information is needed soon after the job completes so that
client-side accounting can be updated. Accounting information is
sensitive and thus should only be released to authorized parties.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Auditing</emphasis>: In a distributed, multi-site environment, it can be
necessary to investigate various forms of suspected intrusion and abuse.
In such cases, we may need to access an audit trail of the actions
performed by a service. When accessing this audit trail, it will
frequently be important to be able to relate specific actions to the
user.
</simpara>
</listitem>
</orderedlist>
<simpara>Audit logging in GRAM5 is done when a job completes.</simpara>
</section>
<section id="_audit_and_accounting_records">
<title>Audit and Accounting Records</title>
<simpara>While audit and accounting records may be generated and stored by
different entities in different contexts, we make the following
assumptions in this chapter:</simpara>
<informaltable
frame="all"
rowsep="1" colsep="1"
>
<tgroup cols="3">
<colspec colname="col_1" colwidth="33*"/>
<colspec colname="col_2" colwidth="33*"/>
<colspec colname="col_3" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top"> </entry>
<entry align="left" valign="top"> Audit Records </entry>
<entry align="left" valign="top"> Accounting Records</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Generated by:</simpara></entry>
<entry align="left" valign="top"><simpara>GRAM service</simpara></entry>
<entry align="left" valign="top"><simpara>LRM to which the GRAM service submits jobs</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Stored in:</simpara></entry>
<entry align="left" valign="top"><simpara>Database, indexed by GJID</simpara></entry>
<entry align="left" valign="top"><simpara>LRM, indexed by JID</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Data that is stored:</simpara></entry>
<entry align="left" valign="top"><simpara>See list below.</simpara></entry>
<entry align="left" valign="top"><simpara>May include all information about the duration and resource-usage of a job</simpara></entry>
</row>
</tbody>
</tgroup>
</informaltable>
<simpara>The audit record of each job contains the following data:</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">job_grid_id</emphasis>: String representation of the resource EPR
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">local_job_id</emphasis>: Job/process id generated by the scheduler
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">subject_name</emphasis>: Distinguished name (DN) of the user
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">username</emphasis>: Local username
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">idempotence_id</emphasis>: Job id generated on the client-side
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">creation_time</emphasis>: Date when the job resource is created
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">queued_time</emphasis>: Date when the job is submitted to the scheduler
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">stage_in_grid_id</emphasis>: String representation of the stageIn-EPR (RFT)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">stage_out_grid_id</emphasis>: String representation of the stageOut-EPR (RFT)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">clean_up_grid_id</emphasis>: String representation of the cleanUp-EPR (RFT)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">globus_toolkit_version</emphasis>: Version of the server-side GT
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">resource_manager_type</emphasis>: Type of the resource manager (Fork, Condor,
&#8230;)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">job_description</emphasis>: Complete job description document
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">success_flag</emphasis>: Flag that shows whether the job failed or finished
successfully
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">finished_flag</emphasis>: Flag that shows whether the job is already fully
processed or still in progress
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">gateway_user</emphasis>: Teragrid identity of the user which submitted the job.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_for_more_information">
<title>For More Information</title>
<simpara>The rest of this chapter focuses on how to configure GRAM5 to enable
Audit-Logging.</simpara>
</section>
<section id="gram5-audit-logging-config">
<title>Configuration</title>
<simpara>Audit logging is turned off by default. To enable GRAM5 audit logging,
in the job manager, add the command-line option '-audit-directory ' to
the job manager configuration in one of the following locations:</simpara>
<itemizedlist>
<listitem>
<simpara>
<literal>$GLOBUS_LOCATION/etc/globus-job-manager.conf</literal> to enable it for all job manager services to enable it for all job manager services
</simpara>
</listitem>
<listitem>
<simpara>
<literal>$GLOBUS_LOCATION/etc/grid-services/LRM_SERVICE_NAME</literal> to enable it for a particular job manager service for a particular LRM. to enable it for a particular job manager service for a particular LRM.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="gram5-audit-logging-config-database">
<title>Audit Database Interface</title>
<simpara>The <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> program reads GRAM5 audit records and
loads those records into a SQL database. This program is available as
part of the <emphasis role="strong"><literal>globus_gram_job_manager_auditing</literal></emphasis> package. It must be
configured by installing and running the
<emphasis role="strong"><literal>globus_gram_job_manager_auditing_setup_scripts</literal></emphasis> setup package via
<emphasis role="strong"><literal>gpt-postinstall</literal></emphasis>. This setup script creates the
<literal>$GLOBUS_LOCATION/etc/globus-job-manager-audit.conf</literal> configuration
file described below and creates database tables needed by the audit
system.  configuration file described below and creates database tables
needed by the audit system.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> program support three database systems:
MySQL, PostgreSQL, and SQLite.</simpara>
</section>
</chapter>
<chapter id="gram5-admin-security_considerations">
<title>Security Considerations</title>
<section id="gram5-security-considerations">
<title>Security Considerations</title>
<section id="_gatekeeper_security_considerations">
<title>Gatekeeper Security Considerations</title>
<simpara>GRAM5 runs different parts of itself under different privilege levels.
The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> runs as root, and uses its root privilege
to access the host&#8217;s private key. It uses the grid map file to map Grid
Certificates to local user ids and then uses the <emphasis role="strong"><literal>setuid()</literal></emphasis>
function to change to that user and execute the
<emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program</simpara>
</section>
<section id="_job_manager_security_considerations">
<title>Job Manager Security Considerations</title>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program runs as a local non-root account.
It receives a delegated limited proxy certificate from the GRAM5 client
which it uses to access Grid storage resources via GridFTP and to
authenticate job signals (such as client cancel requests), and send job
state callbacks to registered clients. This proxy is generally
short-lived, and is automatically removed by the job manager when the
job completes.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program uses a publicly-writable
directory for job state files. This directory has the <emphasis role="strong">sticky</emphasis> bit
set, so users may not remove other users files. Each file is named by a
UUID, so it should be unique.</simpara>
</section>
<section id="_fork_seg_module_security_considerations">
<title>Fork SEG Module Security Considerations</title>
<simpara>The Fork Scheduler Event Generator module uses a globally writable file
for job state change events. This is not recommended for production use.</simpara>
</section>
</section>
</chapter>
<chapter id="gram5-admin-troubleshooting">
<title>Troubleshooting</title>
<section id="gram5-troubleshooting-admin">
<title>Admin Troubleshooting</title>
<section id="_security">
<title>Security</title>
<simpara>GRAM requires a host certificate and private key in order for the
<emphasis role="strong"><literal>globus-gatekeeeper</literal></emphasis> service to run. These are typically located
in <literal>/etc/grid-security/hostcert.pem</literal> and  and
<literal>/etc/grid-security/hostkey.pem</literal>, but the path is configurable in the
, but the path is configurable in the
<ulink url="../..gram5/admin/index.html#gram5-configuring-gatekeeper">gatekeeper
configuration file</ulink>. The key must be protected by file permissions
allowing only the root user to read it.</simpara>
<simpara>GRAM also (by default) uses a <literal>grid-mapfile</literal> to authorize Grid users
as local users. This file is typically located in  to authorize Grid
users as local users. This file is typically located in
<literal>/etc/grid-security/grid-mapfile</literal>, but is configurable in the , but is
configurable in the
<ulink url="../..gram5/admin/index.html#gram5-configuring-gatekeeper">gatekeeper
configuration file</ulink>.</simpara>
<simpara>Problems in either of these configurations will show up in the
gatekeeper log described below. See the <ulink url="">GSI</ulink> documentation for
more detailed information about obtaining and installing host
certificates and maintaining a <literal>grid-mapfile</literal>. .</simpara>
</section>
<section id="_verify_that_services_are_running">
<title>Verify that Services are Running</title>
<simpara>GRAM relies on the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program and (in some cases)
the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> programs to process jobs.
If the former is not running, jobs requests will fail with a "connection
refused" error. If the latter is not running, GRAM jobs will appear to
"hang" in the <literal>PENDING</literal> state.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> is typically started via an init script
installed in <literal>/etc/init.d/globus-gatekeeper</literal>. The command . The
command <emphasis role="strong"><literal>/etc/init.d/globus-gatekeeper status</literal></emphasis> will indicate
whether the service is running. See
<ulink url="../..gram5/admin/index.html#gram5-admin-starting-and-stopping">../..gram5/admin/index.html#gram5-admin-starting-and-stopping</ulink> for
more information about starting and stopping the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program.</simpara>
<simpara>If the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> service fails to start, the output of
the command <emphasis role="strong"><literal>globus-gatekeeper -test</literal></emphasis> will output information
describing some types of configuration problems.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> is typically started via an
init script installed in
<literal>/etc/init.d/globus-scheduler-event-generator</literal>. It is only needed when
the LRM-specific "setup-seg" package is installed. The command . It is
only needed when the LRM-specific "setup-seg" package is installed. The
command <emphasis role="strong"><literal>/etc/init.d/globus-scheduler-event-generator status</literal></emphasis> will
indicate whether the service is running. See
<ulink url="../..gram5/admin/index.html#gram5-admin-starting-and-stopping">../..gram5/admin/index.html#gram5-admin-starting-and-stopping</ulink> for
more information about starting and stopping the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> program.</simpara>
</section>
<section id="_verify_that_lrm_packages_are_installed">
<title>Verify that LRM packages are installed</title>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program starts the
<emphasis role="strong"><literal>globus-job-manager</literal></emphasis> service with different command-line
parameters depending on the LRM being used. Use the command
<emphasis role="strong"><literal>globus-gatekeeper-admin -l</literal></emphasis> to list which LRMs the gatekeeper is
configured to use.</simpara>
<simpara>The <emphasis role="strong"><literal>globus-job-manager-script.pl</literal></emphasis> is the interface between the
GRAM job manager process and the LRM adapter. The command
<emphasis role="strong"><literal>/usr/share/globus/globus-job-manager-script.pl -h</literal></emphasis> will print the
list of available adapters.</simpara>
<screen>%  /usr/share/globus/globus-job-manager-script.pl -h
USAGE: /usr/share/globus/globus-job-manager-script.pl -m MANAGER -f FILE -c COMMAND
Installed managers: condor fork</screen>
<simpara>The <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> also uses an LRM-specific
module to generate scheduler events for GRAM to reduce the amount of
resources GRAM uses on the machine where it runs. To determine which
LRMs are installed and configured, use the command
<emphasis role="strong"><literal>globus-scheduler-event-generator-admin -l</literal></emphasis>.</simpara>
<screen>%  globus-scheduler-event-generator-admin -l
fork [DISABLED]</screen>
<simpara>If any of these do not show the LRM you are trying to use, install the
relevant packages related to that LRM and restart the GRAM services. See
the <ulink url="../..gram5/admin/index.html">GRAM Administrator&#8217;s Guide</ulink> for
more information about starting and stopping the GRAM services.</simpara>
</section>
<section id="_verify_that_the_lrm_packages_are_configured">
<title>Verify that the LRM packages are configured</title>
<simpara>All GRAM5 LRM adapters have a configuration file for site
customizations, such as queue names, paths to executables needed to
interface with the LRM, etc. Check that the values in these files are
correct. These files are described in
<ulink url="../..gram5/admin/index.html#gram5-configuring-lrm">../..gram5/admin/index.html#gram5-configuring-lrm</ulink>.</simpara>
</section>
<section id="gram5-troubleshooting-gatekeeper-log">
<title>Check the Gatekeeper Log</title>
<simpara>The <literal>/var/log/globus-gatekeeper.log</literal> file contains information about
service requests from clients, and will be useful when diagnosing
service startup failures, authentication failures, and authorization
failures.  file contains information about service requests from
clients, and will be useful when diagnosing service startup failures,
authentication failures, and authorization failures.</simpara>
<section id="_authorization_failures">
<title>Authorization failures</title>
<simpara>GRAM uses GSI to authenticate client job requests. If there is a problem
with the GSI configuration for your host, or a client is trying to
connect with a certificate signed by a CA your host does not trust, the
job request will fail. This will show up in the log as a "GSS
authentication failure". See the <ulink url="../..gsic/admin/index.html">GSI
Administrator&#8217;s Guide</ulink> for information about diagnosing authentication
failures.</simpara>
</section>
<section id="_gridmap_failures">
<title>Gridmap failures</title>
<simpara>After authentication is complete, GRAM maps the Grid identity to a local
user prior to starting the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> process. If this
fails, an error will show up in the log as "globus_gss_assist_gridmap()
failed authorization". See the <ulink url="../..gsic/admin/index.html">GSI
Administrator&#8217;s Guide</ulink> for information about managing gridmap files.</simpara>
</section>
</section>
<section id="gram5-troubleshooting-jobmanager-log">
<title>Job Manager Logs</title>
<simpara>A per-user job manager log is typically located in
<literal>/var/log/globus/gram_$USERNAME.log</literal>. This log contains information
from the job manager as it attempts to execute GRAM jobs via a local
resource manager. The logs can be fairly verbose. Sometimes looking for
log entries near those containing the string . This log contains
information from the job manager as it attempts to execute GRAM jobs via
a local resource manager. The logs can be fairly verbose. Sometimes
looking for log entries near those containing the string <literal>level=ERROR</literal>
will show more information about what caused a particular failure.</simpara>
<simpara>Once you&#8217;ve found an error in the log, it is generally useful to find
log entries related to the job which hit that error. There are two job
IDs associated with each job, one a GRAM-specific ID, and one an
LRM-specific ID. To determine the GRAM ID associated with a job, look
for the attribute <literal>gramid</literal> in the log message. Finding that, looking
for all other log messages which contain that <literal>gramid</literal> value will give
a better picture of what the job manager is doing. To determine the
LRM-specific ID, look for a message at <literal>TRACE</literal> level with the matching
GRAM ID found above with the <literal>response</literal> value matching
<literal>GRAM_SCRIPT_JOB_ID:</literal><emphasis>LRM-ID</emphasis>. You can then find follow the state of
the <emphasis>LRM-ID</emphasis> as well as the GRAM ID in the log, and correlate the
<emphasis>LRM-ID</emphasis> information with local resource manager logs and administrative
tools.</simpara>
</section>
<section id="_email_support">
<title>Email Support</title>
<simpara>If all else fails, please send information about your problem to
<ulink url="mailto:gram-user@globus.org">gram-user@globus.org</ulink>. You&#8217;ll have to subscribe to a list before you can
send an e-mail to it. See
<ulink url="http://dev.globus.org/wiki/Mailing%5fLists">here</ulink> for general e-mail
lists and information on how to subscribe to a list and
<ulink url="http://dev.globus.org/wiki/GRAM#Mailing%5fLists">here</ulink> for GRAM-specific
lists. Depending on the problem, you may be requested to file a bug
report to the Globus project&#8217;s <ulink url="https://globus.atlassian.net">Issue
Tracker</ulink>.</simpara>
</section>
</section>
</chapter>
<chapter id="gram5-admin-programs">
<title>Admin Tools</title>
<section id="gram5-globus-gatekeeper">
<title>GLOBUS-GATEKEEPER(8)</title>
<section id="_name">
<title>NAME</title>
<simpara>globus-gatekeeper - Authorize and execute a grid service on behalf of a user</simpara>
</section>
<section id="_synopsis">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> [<literal>-help</literal> ] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-conf</literal> <emphasis>PARAMETER_FILE</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-test</literal> ] <literal>-d</literal>  | <literal>-debug</literal>  <?asciidoc-br?>
<?asciidoc-br?>
 <literal>-inetd</literal>  | <literal>-f</literal>  <?asciidoc-br?>
<?asciidoc-br?>
 <literal>-p</literal> <emphasis>PORT</emphasis> | <literal>-port</literal> <emphasis>PORT</emphasis> <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-home</literal> <emphasis>PATH</emphasis>] <literal>-l</literal> <emphasis>LOGFILE</emphasis> | <literal>-logfile</literal> <emphasis>LOGFILE</emphasis> [<literal>-lf</literal> <emphasis>LOG_FACILITY</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-acctfile</literal> <emphasis>ACCTFILE</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-e</literal> <emphasis>LIBEXECDIR</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-launch_method</literal> <literal>fork_and_exit</literal>  | <literal>fork_and_wait</literal>  | <literal>dont_fork</literal> ] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-grid_services</literal> <emphasis>SERVICEDIR</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-globusid</literal> <emphasis>GLOBUSID</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-gridmap</literal> <emphasis>GRIDMAP</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-x509_cert_dir</literal> <emphasis>TRUSTED_CERT_DIR</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-x509_cert_file</literal> <emphasis>TRUSTED_CERT_FILE</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-x509_user_cert</literal> <emphasis>CERT_PATH</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-x509_user_key</literal> <emphasis>KEY_PATH</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-x509_user_proxy</literal> <emphasis>PROXY_PATH</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-k</literal> ] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-globuskmap</literal> <emphasis>KMAP</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-pidfile</literal> <emphasis>PIDFILE</emphasis>]</simpara>
</section>
<section id="_description">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program is a meta-server similar to
<emphasis role="strong"><literal>inetd</literal></emphasis> or <emphasis role="strong"><literal>xinetd</literal></emphasis> that starts other services after
authenticating a TCP connection using GSSAPI and mapping the client&#8217;s
credential to a local account.</simpara>
<simpara>The most common use for the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program is to
start instances of the <literal>globus-job-manager(8)</literal> service. A single
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> deployment can handle multiple different
service configurations by having entries in the <literal>/etc/grid-services</literal>
directory.  directory.</simpara>
<simpara>Typically, users interact with the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program via
client applications such as <literal>globusrun(1)</literal>, <emphasis role="strong"><literal>globus-job-submit</literal></emphasis>,
or tools such as CoG jglobus or Condor-G.</simpara>
<simpara>The full set of command-line options to <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>
consists of:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-help</emphasis>
</term>
<listitem>
<simpara>
     Display a help message to standard error and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-conf <emphasis>PARAMETER_FILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Load configuration parameters from <emphasis>PARAMETER_FILE</emphasis>. The parameters in that file are treated as additional command-line options.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-test</emphasis>
</term>
<listitem>
<simpara>
     Parse the configuration file and print out the POSIX user id of the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> process, service home directory, service execution directory, and X.509 subject name and then exits.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-d, -debug</emphasis>
</term>
<listitem>
<simpara>
     Run the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> process in the foreground.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-inetd</emphasis>
</term>
<listitem>
<simpara>
     Flag to indicate that the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> process was started via <emphasis role="strong"><literal>inetd</literal></emphasis> or a similar super-server. If this flag is set and the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> was not started via inetd, a warning will be printed in the gatekeeper log.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-f</emphasis>
</term>
<listitem>
<simpara>
     Flag to indicate that the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> process should run in the foreground. This flag has no effect when the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> is started via inetd.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-p <emphasis>PORT</emphasis>, -port <emphasis>PORT</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Listen for connections on the TCP/IP port <emphasis>PORT</emphasis>. This option has no effect if the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> is started via inetd or a similar service. If not specified and the gatekeeper is running as root, the default of <literal>2119</literal> is used. Otherwise, the gatekeeper defaults to an ephemeral port.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-home <emphasis>PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Sets the gatekeeper deployment directory to <emphasis>PATH</emphasis>. This is used to interpret relative paths for accounting files, libexecdir, certificate paths, and also to set the <literal>GLOBUS_LOCATION</literal> environment variable in the service environment. If not specified, the gatekeeper looks for service executables in <literal>/usr/sbin</literal>, configuration in , configuration in <literal>/etc</literal>, and writes logs and accounting files to , and writes logs and accounting files to <literal>/var/log</literal>..
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-l <emphasis>LOGFILE</emphasis>, -logfile <emphasis>LOGFILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Write log entries to <emphasis>LOGFILE</emphasis>. If <emphasis>LOGFILE</emphasis> is equal to <literal>logoff</literal> or <literal>LOGOFF</literal>, then logging will be disabled, both to file and to syslog.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-lf <emphasis>LOG_FACILITY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Open syslog using the <emphasis>LOG_FACILITY</emphasis>. If not specified, <literal>LOG_DAEMON</literal> will be used as the default when using syslog.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-acctfile <emphasis>ACCTFILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Set the path to write accounting records to <emphasis>ACCTFILE</emphasis>. If not set, records will be written to the log file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-e <emphasis>LIBEXECDIR</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Look for service executables in <emphasis>LIBEXECDIR</emphasis>. If not specified, the <literal>sbin</literal> subdirectory of the parameter to  subdirectory of the parameter to <emphasis>-home</emphasis> is used, or <literal>/usr/sbin</literal> if that is not set. if that is not set.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-launch_method <literal>fork_and_exit</literal>|<literal>fork_and_wait</literal>|<literal>dont_fork</literal></emphasis>
</term>
<listitem>
<simpara>
     Determine how to launch services. The method may be either <literal>fork_and_exit</literal> (the service runs completely independently of the gatekeeper, which exits after creating the new service process), <literal>fork_and_wait</literal> (the service is run in a separate process from the gatekeeper but the gatekeeper does not exit until the service terminates), or <literal>dont_fork</literal>, where the gatekeeper process becomes the service process via the <emphasis role="strong"><literal>exec()</literal></emphasis> system call.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-grid_services <emphasis>SERVICEDIR</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Look for service descriptions in <emphasis>SERVICEDIR</emphasis>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globusid <emphasis>GLOBUSID</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Sets the <literal>GLOBUSID</literal> environment variable to <emphasis>GLOBUSID</emphasis>. This variable is used to construct the gatekeeper contact string if it can not be parsed from the service credential.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-gridmap <emphasis>GRIDMAP</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Use the file at <emphasis>GRIDMAP</emphasis> to map GSSAPI names to POSIX user names.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-x509_cert_dir <emphasis>TRUSTED_CERT_DIR</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Use the directory <emphasis>TRUSTED_CERT_DIR</emphasis> to locate trusted CA X.509 certificates. The gatekeeper sets the environment variable <literal>X509_CERT_DIR</literal> to this value.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-x509_user_cert <emphasis>CERT_PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Read the service X.509 certificate from <emphasis>CERT_PATH</emphasis>. The gatekeeper sets the <literal>X509_USER_CERT</literal> environment variable to this value.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-x509_user_key <emphasis>KEY_PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Read the private key for the service from <emphasis>KEY_PATH</emphasis>. The gatekeeper sets the <literal>X509_USER_KEY</literal> environment variable to this value.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-x509_user_proxy <emphasis>PROXY_PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Read the X.509 proxy certificate from <emphasis>PROXY_PATH</emphasis>. The gatekeeper sets the <literal>X509_USER_PROXY</literal> environment variable to this value.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-k</emphasis>
</term>
<listitem>
<simpara>
     Use the <emphasis role="strong"><literal>globus-k5</literal></emphasis> command to acquire Kerberos 5 credentials before starting the service.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globuskmap <emphasis>KMAP</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Use <emphasis>KMAP</emphasis> as the path to the Grid credential to kerberos initialization mapping file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-pidfile <emphasis>PIDFILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Write the process id of the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> to the file named by <emphasis>PIDFILE</emphasis>.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_environment">
<title>ENVIRONMENT</title>
<simpara>If the following variables affect the execution of
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">X509_CERT_DIR</emphasis>
</term>
<listitem>
<simpara>
     Directory containing X.509 trust anchors and signing policy files.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">X509_USER_PROXY</emphasis>
</term>
<listitem>
<simpara>
     Path to file containing an X.509 proxy.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">X509_USER_CERT</emphasis>
</term>
<listitem>
<simpara>
     Path to file containing an X.509 user certificate.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">X509_USER_KEY</emphasis>
</term>
<listitem>
<simpara>
     Path to file containing an X.509 user key.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">GLOBUS_LOCATION</emphasis>
</term>
<listitem>
<simpara>
     Default path to gatekeeper service files.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_files">
<title>Files</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/grid-services/SERVICENAME</literal></emphasis>
</term>
<listitem>
<simpara>
     Service configuration for <emphasis>SERVICENAME</emphasis>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/grid-security/grid-mapfile</literal></emphasis>
</term>
<listitem>
<simpara>
     Default file mapping Grid identities to POSIX identities.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/globuskmap</literal></emphasis>
</term>
<listitem>
<simpara>
     Default file mapping Grid identities to Kerberos 5 principals.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/globus-nologin</literal></emphasis>
</term>
<listitem>
<simpara>
     File to disable the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>/var/log/globus-gatekeeper.log</literal></emphasis>
</term>
<listitem>
<simpara>
     Default gatekeeper log.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_see_also">
<title>See also</title>
<simpara><literal>globus-k5(8)</literal>, <literal>globusrun(1)</literal>, <literal>globus-job-manager(8)</literal></simpara>
</section>
</section>
<section id="globus-gatekeeper-admin">
<title>GLOBUS-GATEKEEPER-ADMIN(8)</title>
<section id="_name_2">
<title>NAME</title>
<simpara>globus-gatekeeper-admin - Manage globus-gatekeeper services</simpara>
</section>
<section id="_synopsis_2">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> [<literal>-h</literal> ]</simpara>
</section>
<section id="_description_2">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> program manages service entries
which are used by the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> to execute services.
Service entries are located in the <literal>/etc/grid-services</literal> directory. The
directory. The <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> can list, enable, or
disable specific services, or set a service as the default. The <emphasis>-h</emphasis>
command-line option shows a brief usage message.</simpara>
<section id="_listing_services">
<title>Listing services</title>
<simpara>The <emphasis>-l</emphasis> command-line option to <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> will
cause it to list all of the services which are available to be run by
the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>. In the output, the service name will be
followed by its status in brackets. Possible status strings are
<literal>ENABLED</literal>, <literal>DISABLED</literal>, and <literal>ALIAS to </literal>, where <emphasis>NAME</emphasis> is another
service name.</simpara>
<simpara>If the <emphasis>-n ' is used, then only information about the service named
'NAME</emphasis> is printed.</simpara>
</section>
<section id="_enabling_services">
<title>Enabling services</title>
<simpara>The '-e ' command-line option to <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> will
cause it to enable a service so that it may be run by the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>.</simpara>
<simpara>If the <emphasis>-n ' option is used as well, then the service will be enabled
with the alias 'NAME</emphasis>.</simpara>
</section>
<section id="_enabling_a_default_service">
<title>Enabling a default service</title>
<simpara>The <emphasis>-E</emphasis> command-line option to <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> will
cause it to enable a service alias with the name <literal>jobmanager</literal>. The
<emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> program will choose the first service it
finds as the default. To enable a particular service as the default, use
the <emphasis>-e</emphasis> parameter described above with the <emphasis>-n</emphasis> parameter.</simpara>
</section>
<section id="_disabling_services">
<title>Disabling services</title>
<simpara>The '-d ' command-line option to <emphasis role="strong"><literal>globus-gatekeeper-admin</literal></emphasis> will
cause it to disable a service so that it may not be run by the
<emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>. All aliases to a disabled service are also
disabled.</simpara>
</section>
</section>
<section id="_files_2">
<title>Files</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/grid-services</literal>  </emphasis>
</term>
<listitem>
<simpara>
     Default location of enabled gatekeeper service descriptions.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="_globus_gram_audit_8">
<title>GLOBUS-GRAM-AUDIT(8)</title>
<section id="_name_3">
<title>NAME</title>
<simpara>globus-gram-audit - Load GRAM4 and GRAM5 audit records into a database</simpara>
</section>
<section id="_synopsis_3">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> [<literal>--conf</literal> <emphasis>CONFIG_FILE</emphasis>] [<literal>--create</literal> ] | [<literal>--update=</literal> <emphasis>OLD-VERSION</emphasis>] [<literal>--check</literal> ] [<literal>--delete</literal> ] [<literal>--audit-directory</literal> <emphasis>AUDITDIR</emphasis>] [<literal>--quiet</literal> ]</simpara>
</section>
<section id="_description_3">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> program loads audit records to an
SQL-based database. It reads
<literal>$GLOBUS_LOCATION/etc/globus-job-manager.conf</literal> by default to determine
the audit directory and then uploads all files in that directory that
contain valid audit records to the database configured by the  by
default to determine the audit directory and then uploads all files in
that directory that contain valid audit records to the database
configured by the <emphasis role="strong"><literal>globus_gram_job_manager_auditing_setup_scripts</literal></emphasis>
package. If the upload completes successfully, the audit files will be
removed.</simpara>
<simpara>The full set of command-line options to <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis>
consist of:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">--conf <emphasis>CONFIG_FILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Use <emphasis>CONFIG_FILE</emphasis> instead of the default from the configuration file for audit database configuration.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">--check</emphasis>
</term>
<listitem>
<simpara>
     Check whether the insertion of a record was successful by querying the database after inserting the records. This is used in tests.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">--delete</emphasis>
</term>
<listitem>
<simpara>
     Delete audit records from the database right after inserting them. This is used in tests to avoid filling the databse with test records.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">--audit-directory <emphasis>DIR</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Look for audit records in <emphasis>DIR</emphasis>, instead of looking in the directory specified in the job manager configuration. This is used in tests to control which records are loaded to the database and then deleted.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">--query <emphasis>SQL</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Perform the given SQL query on the audit database. This uses the database information from the configuration file to determine how to contact the database.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">--quiet</emphasis>
</term>
<listitem>
<simpara>
     Reduce the amount of output for common operations.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_files_3">
<title>FILES</title>
<simpara>The <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> uses the following files (paths relative
to <literal>$GLOBUS_LOCATION</literal>).</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>etc/globus-gram-job-manager.conf</literal></emphasis>
</term>
<listitem>
<simpara>
     GRAM5 job manager configuration. It includes the default path to the audit directory
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>etc/globus-gram-audit.conf</literal></emphasis>
</term>
<listitem>
<simpara>
     Audit configuration. It includes the information needed to contact the audit database.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="gram5-cmd-globus-job-manager">
<title>GLOBUS-JOB-MANAGER(8)</title>
<section id="_name_4">
<title>NAME</title>
<simpara>globus-job-manager - Execute and monitor jobs</simpara>
</section>
<section id="_synopsis_4">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-job-manager</literal></emphasis> <literal>-type</literal> <emphasis>LRM</emphasis> [<literal>-conf</literal> <emphasis>CONFIG_PATH</emphasis>] [<literal>-help</literal> ] [<literal>-globus-host-manufacturer</literal> <emphasis>MANUFACTURER</emphasis>] [<literal>-globus-host-cputype</literal> <emphasis>CPUTYPE</emphasis>] [<literal>-globus-host-osname</literal> <emphasis>OSNAME</emphasis>] [<literal>-globus-host-osversion</literal> <emphasis>OSVERSION</emphasis>] [<literal>-globus-gatekeeper-host</literal> <emphasis>HOST</emphasis>] [<literal>-globus-gatekeeper-port</literal> <emphasis>PORT</emphasis>] [<literal>-globus-gatekeeper-subject</literal> <emphasis>SUBJECT</emphasis>] [<literal>-home</literal> <emphasis>GLOBUS_LOCATION</emphasis>] [<literal>-target-globus-location</literal> <emphasis>TARGET_GLOBUS_LOCATION</emphasis>] [<literal>-condor-arch</literal> <emphasis>ARCH</emphasis>] [<literal>-condor-os</literal> <emphasis>OS</emphasis>] [<literal>-history</literal> <emphasis>HISTORY_DIRECTORY</emphasis>] [<literal>-scratch-dir-base</literal> <emphasis>SCRATCH_DIRECTORY</emphasis>] [<literal>-enable-syslog</literal> ] [<literal>-stdio-log</literal> <emphasis>LOG_DIRECTORY</emphasis>] [<literal>-log-pattern</literal> <emphasis>PATTERN</emphasis>] [<literal>-log-levels</literal> <emphasis>LEVELS</emphasis>] [<literal>-state-file-dir</literal> <emphasis>STATE_DIRECTORY</emphasis>] [<literal>-globus-tcp-port-range</literal> <emphasis>PORT_RANGE</emphasis>] [<literal>-globus-tcp-source-range</literal> <emphasis>SOURCE_RANGE</emphasis>] [<literal>-x509-cert-dir</literal> <emphasis>TRUSTED_CERTIFICATE_DIRECTORY</emphasis>] [<literal>-cache-location</literal> <emphasis>GASS_CACHE_DIRECTORY</emphasis>] [<literal>-k</literal> ] [<literal>-extra-envvars</literal> <emphasis>VAR=VAL,&#8230;</emphasis>] [<literal>-seg-module</literal> <emphasis>SEG_MODULE</emphasis>] [<literal>-audit-directory</literal> <emphasis>AUDIT_DIRECTORY</emphasis>] [<literal>-globus-toolkit-version</literal> <emphasis>TOOLKIT_VERSION</emphasis>] [<literal>-disable-streaming</literal> ] [<literal>-disable-usagestats</literal> ] [<literal>-usagestats-targets</literal> <emphasis>TARGET</emphasis>] [<literal>-service-tag</literal> <emphasis>SERVICE_TAG</emphasis>]</simpara>
</section>
<section id="_description_4">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program is a servivce which starts and
controls GRAM jobs which are executed by a local resource management
system, such as LSF or Condor. The <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program is
typically started by the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program and not
directly by a user. It runs until all jobs it is managing have
terminated or its delegated credentials have expired.</simpara>
<simpara>Typically, users interact with the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program
via client applications such as <emphasis role="strong"><literal>globusrun</literal></emphasis>,
<emphasis role="strong"><literal>globus-job-submit</literal></emphasis>, or tools such as CoG jglobus or Condor-G.</simpara>
<simpara>The full set of command-line options to <emphasis role="strong"><literal>globus-job-manager</literal></emphasis>
consists of:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-help</emphasis>
</term>
<listitem>
<simpara>
     Display a help message to standard error and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-type <emphasis>LRM</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Execute jobs using the local resource manager named <emphasis>LRM</emphasis>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-conf <emphasis>CONFIG_PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Read additional command-line arguments from the file <emphasis>CONFIG_PATH</emphasis>. If present, this must be the first command-line argument to the <emphasis role="strong"><literal>globus-job-manager</literal></emphasis> program.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><emphasis role="strong">-globus-host-manufacturer
                <emphasis>MANUFACTURER</emphasis></emphasis>::
     Indicate the manufacturer of the system which the jobs will execute on. This parameter sets the value of the <literal>$(GLOBUS_HOST_MANUFACTURER)</literal> RSL substitution to <emphasis>MANUFACTURER</emphasis></simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-globus-host-cputype <emphasis>CPUTYPE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the CPU type of the system which the jobs will execute on. This parameter sets the value of the <literal>$(GLOBUS_HOST_CPUTYPE)</literal> RSL substitution to <emphasis>CPUTYPE</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-host-osname <emphasis>OSNAME</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the operating system type of the system which the jobs will execute on. This parameter sets the value of the <literal>$(GLOBUS_HOST_OSNAME)</literal> RSL substitution to <emphasis>OSNAME</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-host-osversion <emphasis>OSVERSION</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the operating system version of the system which the jobs will execute on. This parameter sets the value of the <literal>$(GLOBUS_HOST_OSVERSION)</literal> RSL substitution to <emphasis>OSVERSION</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-gatekeeper-host <emphasis>HOST</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the host name of the machine which the job was submitted to. This parameter sets the value of the <literal>$(GLOBUS_GATEKEEPER_HOST)</literal> RSL substitution to <emphasis>HOST</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-gatekeeper-port <emphasis>PORT</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the TCP port number of gatekeeper to which jobs are submitted to. This parameter sets the value of the <literal>$(GLOBUS_GATEKEEPER_PORT)</literal> RSL substitution to <emphasis>PORT</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-gatekeeper-subject <emphasis>SUBJECT</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the X.509 identity of the gatekeeper to which jobs are submitted to. This parameter sets the value of the <literal>$(GLOBUS_GATEKEEPER_SUBJECT)</literal> RSL substitution to <emphasis>SUBJECT</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-home <emphasis>GLOBUS_LOCATION</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the path where the Globus Toolkit(r) is installed on the service node. This is used by the job manager to locate its support and configuration files.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-target-globus-location <emphasis>TARGET_GLOBUS_LOCATION</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Indicate the path where the Globus Toolkit(r) is installed on the execution host. If this is omitted, the value specified as a parameter to <emphasis>-home</emphasis> is used. This parameter sets the value of the <literal>$(GLOBUS_LOCATION)</literal> RSL substitution to <emphasis>TARGET_GLOBUS_LOCATION</emphasis>
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-history <emphasis>HISTORY_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write job history files to <emphasis>HISTORY_DIRECTORY</emphasis>. These files are described in the FILES section below.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-scratch-dir-base <emphasis>SCRATCH_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to use <emphasis>SCRATCH_DIRECTORY</emphasis> as the default scratch directory root if a relative path is specified in the job RSL&#8217;s <literal>scratch_dir</literal> attribute.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-enable-syslog</emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write log messages via syslog. Logging is further controlled by the argument to the <emphasis>-log-levels</emphasis> parameter described below.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-log-pattern <emphasis>PATTERN</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write log messages to files named by the string <emphasis>PATTERN</emphasis>. The <emphasis>PATTERN</emphasis> string may contain job-independent RSL substitutions such as <literal>$(HOME)</literal>, <literal>$(LOGNAME)</literal>, etc, as well as the special RSL substition <literal>$(DATE)</literal> which will be resolved at log time to the date in YYYYMMDD form.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-stdio-log <emphasis>LOG_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write log messages to files in the <emphasis>LOG_DIRECTORY</emphasis> directory. This is a backward-compatible parameter, equivalent to '-log-pattern '.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-log-levels <emphasis>LEVELS</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write log messages of certain levels to syslog and/or log files. The available log levels are <literal>FATAL</literal>, <literal>ERROR</literal>, <literal>WARN</literal>, <literal>INFO</literal>, <literal>DEBUG</literal>, and <literal>TRACE</literal>. Multiple values can be combined with the <literal>|</literal> character. The default value of logging when enabled is <literal>FATAL|ERROR</literal>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-state-file-dir <emphasis>STATE_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write state files to <emphasis>STATE_DIRECTORY</emphasis>. If not specified, the job manager uses the default of <literal>$GLOBUS_LOCATION/tmp/gram_job_state/</literal>. This directory must be writable by all users and be on a file system which supports POSIX advisory file locks. . This directory must be writable by all users and be on a file system which supports POSIX advisory file locks.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-tcp-port-range <emphasis>PORT_RANGE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to restrict its TCP/IP communication to use ports in the range described by <emphasis>PORT_RANGE</emphasis>. This value is also made available in the job environment via the <literal>GLOBUS_TCP_PORT_RANGE</literal> environment variable.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-tcp-source-range <emphasis>SOURCE_RANGE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to restrict its TCP/IP communication to use source ports in the range described by <emphasis>SOURCE_RANGE</emphasis>. This value is also made available in the job environment via the <literal>GLOBUS_TCP_SOURCE_RANGE</literal> environment variable.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-x509-cert-dir <emphasis>TRUSTED_CERTIFICATE_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to search <emphasis>TRUSTED_CERTIFICATE_DIRECTORY</emphasis> for its list of trusted CA certificates and their signing policies. This value is also made available in the job environment via the <literal>X509_CERT_DIR</literal> environment variable.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-cache-location <emphasis>GASS_CACHE_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to use the path <emphasis>GASS_CACHE_DIRECTORY</emphasis> for its temporary GASS-cache files. This value is also made available in the job environment via the <literal>GLOBUS_GASS_CACHE_DEFAULT</literal> environment variable.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-k</emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to assume it is using Kerberos for authentication instead of X.509 certificates. This disables some certificate-specific processing in the job manager.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-extra-envvars <emphasis>VAR=VAL,&#8230;</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to define a set of environment variables in the job environment beyond those defined in the base job environment. The format of the parameter to this argument is a comma-separated sequence of VAR=VAL pairs, where <literal>VAR</literal> is the variable name and <literal>VAL</literal> is the variable&#8217;s value. If the value is not specified, then the value of the variable in the job manager&#8217;s environment is used. This option may be present multiple times on the command-line or the job manager configuration file to append multiple environment settings.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-seg-module <emphasis>SEG_MODULE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to use the schedule event generator module named by <emphasis>SEG_MODULE</emphasis> to detect job state changes events from the local resource manager, in place of the less efficient polling operations used in GT2. To use this, one instance of the <emphasis role="strong"><literal>globus-job-manager-event-generator</literal></emphasis> must be running to process events for the LRM into a generic format that the job manager can parse.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-audit-directory <emphasis>AUDIT_DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to write audit records to the directory named by <emphasis>AUDIT_DIRECTORY</emphasis>. This records can be loaded into a database using the <emphasis role="strong"><literal>globus-gram-audit</literal></emphasis> program.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-globus-toolkit-version <emphasis>TOOLKIT_VERSION</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to use <emphasis>TOOLKIT_VERSION</emphasis> as the version for audit and usage stats records.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-service-tag <emphasis>SERVICE_TAG</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to use <emphasis>SERVICE_TAG</emphasis> as a unique identifier to allow multiple GRAM instances to use the same job state directories without interfering with each other&#8217;s jobs. If not set, the value <literal>untagged</literal> will be used.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-disable-streaming</emphasis>
</term>
<listitem>
<simpara>
     Configure the job manager to disable file streaming. This is propagated to the LRM script interface but has no effect in GRAM5.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-disable-usagestats</emphasis>
</term>
<listitem>
<simpara>
     Disable sending of any usage stats data, even if <emphasis>-usagestats-targets</emphasis> is present in the configuration.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-usagestats-targets <emphasis>TARGET</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Send usage packets to a data collection service for analysis. The <emphasis>TARGET</emphasis> string consists of a comma-separated list of HOST:PORT combinations, each contaiing an optional list of data to send. See <ulink url="http://confluence.globus.org/display/~bester/GRAM5+Usage+Stats+Packets">Usage Stats Packets</ulink> for more information about the tags. Special tag strings of <literal>all</literal> (which enables all tags) and <literal>default</literal> may be used, or a sequence of characters for the various tags. If this option is not present in the configuration, then the default of usage-stats.globus.org:4810 is used.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-condor-arch <emphasis>ARCH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Set the architecture specification for condor jobs to be <emphasis>ARCH</emphasis> in job classified ads generated by the GRAM5 codnor LRM script. This is required for the condor LRM but ignored for all others.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-condor-os <emphasis>OS</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Set the operating system specification for condor jobs to be <emphasis>OS</emphasis> in job classified ads generated by the GRAM5 codnor LRM script. This is required for the condor LRM but ignored for all others.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_environment_2">
<title>Environment</title>
<simpara>If the following variables affect the execution of
<emphasis role="strong"><literal>globus-job-manager</literal></emphasis></simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>HOME</literal></emphasis>
</term>
<listitem>
<simpara>
     User&#8217;s home directory.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>LOGNAME</literal></emphasis>
</term>
<listitem>
<simpara>
     User&#8217;s name.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>JOBMANAGER_SYSLOG_ID</literal></emphasis>
</term>
<listitem>
<simpara>
     String to prepend to syslog audit messages.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>JOBMANAGER_SYSLOG_FAC</literal></emphasis>
</term>
<listitem>
<simpara>
     Facility to log syslog audit messages as.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>JOBMANAGER_SYSLOG_LVL</literal></emphasis>
</term>
<listitem>
<simpara>
     Priority level to use for syslog audit messages.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GATEKEEPER_JM_ID</literal></emphasis>
</term>
<listitem>
<simpara>
     Job manager ID to be used in syslog audit records.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GATEKEEPER_PEER</literal></emphasis>
</term>
<listitem>
<simpara>
     Peer information to be used in syslog audit records
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GLOBUS_ID</literal></emphasis>
</term>
<listitem>
<simpara>
     Credential information to be used in syslog audit records
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GLOBUS_JOB_MANAGER_SLEEP</literal></emphasis>
</term>
<listitem>
<simpara>
     Time (in seconds) to sleep when the job manager is started. [For debugging purposes only]
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GRID_SECURITY_HTTP_BODY_FD</literal></emphasis>
</term>
<listitem>
<simpara>
     File descriptor of an open file which contains the initial job request and to which the initial job reply should be sent. This file descriptor is inherited from the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis>.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>X509_USER_PROXY</literal></emphasis>
</term>
<listitem>
<simpara>
     Path to the X.509 user proxy which was delegated by the client to the <emphasis role="strong"><literal>globus-gatekeeper</literal></emphasis> program to be used by the job manager.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GRID_SECURITY_CONTEXT_FD</literal></emphasis>
</term>
<listitem>
<simpara>
     File descriptor containing an exported security context that the job manager should use to reply to the client which submitted the job.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GLOBUS_USAGE_TARGETS</literal></emphasis>
</term>
<listitem>
<simpara>
     Default list of usagestats services to send usage packets to.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GLOBUS_TCP_PORT_RANGE</literal></emphasis>
</term>
<listitem>
<simpara>
     Default range of allowed TCP ports to listen on. The <emphasis>-globus-tcp-port-range</emphasis> command-line option overrides this.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>GLOBUS_TCP_SOURCE_RANGE</literal></emphasis>
</term>
<listitem>
<simpara>
     Default range of allowed TCP ports to bind to. The <emphasis>-globus-tcp-source-range</emphasis> command-line option overrides this.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_files_4">
<title>Files</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/LRM.TAG.red</literal></emphasis>
</term>
<listitem>
<simpara>
     Job manager delegated user credential.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/LRM.TAG.lock</literal></emphasis>
</term>
<listitem>
<simpara>
     Job manager state lock file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/LRM.TAG.pid</literal></emphasis>
</term>
<listitem>
<simpara>
     Job manager pid file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/LRM.TAG.sock</literal></emphasis>
</term>
<listitem>
<simpara>
     Job manager socket for inter-job manager communications.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/JOB_ID/</literal></emphasis>
</term>
<listitem>
<simpara>
     Job-specific state directory.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/JOB_ID/stdin</literal></emphasis>
</term>
<listitem>
<simpara>
     Standard input which has been staged from a remote URL.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/JOB_ID/stdout</literal></emphasis>
</term>
<listitem>
<simpara>
     Standard output which will be staged from a remote URL.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/JOB_ID/stderr</literal></emphasis>
</term>
<listitem>
<simpara>
     Standard error which will be staged from a remote URL.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$HOME/.globus/job/HOSTNAME/JOB_ID/x509_user_proxy</literal></emphasis>
</term>
<listitem>
<simpara>
     Job-specific delegated credential.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/tmp/gram_job_state/job.HOSTNAME.JOB_ID</literal></emphasis>
</term>
<listitem>
<simpara>
     Job state file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/tmp/gram_job_state/job.HOSTNAME.JOB_ID.lock</literal></emphasis>
</term>
<listitem>
<simpara>
     Job state lock file. In most cases this will be a symlink to the job manager lock file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/etc/globus-job-manager.conf</literal></emphasis>
</term>
<listitem>
<simpara>
     Default location of the global job manager configuration file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/etc/grid-services/jobmanager-LRM</literal></emphasis>
</term>
<listitem>
<simpara>
     Default location of the LRM-specific gatekeeper configuration file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/etc/globus/gram/job&#8212;manager.rvf</literal></emphasis>
</term>
<listitem>
<simpara>
     Default location of the site-specific job manager RSL validation file.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong"><literal>$GLOBUS_LOCATION/etc/globus/gram/lrm.rvf</literal></emphasis>
</term>
<listitem>
<simpara>
     Default location of the site-specific job manager RSL validation file for the named lrm.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_see_also_2">
<title>See Also</title>
<simpara><literal>globusrun(1)</literal>, <literal>globus-gatekeeper(8)</literal>,
<literal>globus-personal-gatekeeper(1)</literal>, <literal>globus-gram-audit(8)</literal></simpara>
</section>
</section>
<section id="gram5-cmd-globus-rvf-check">
<title>GLOBUS-RVF-CHECK(8)</title>
<section id="_name_5">
<title>NAME</title>
<simpara>globus-rvf-check - Edit a GRAM5 RSL validation file</simpara>
</section>
<section id="_synopsis_5">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-rvf-check</literal></emphasis> [<literal>-h</literal> ] [<literal>-help</literal> ]</simpara>
</section>
<section id="_description_5">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-rvf-check</literal></emphasis> command is a utility which checks the
syntax of a RSL validation file, and prints out parse errors when
encountered. It can also parse the RVF file contents and then dump
file&#8217;s contents to stdout, after canonicalizing values and quoting. The
exit code of <emphasis role="strong"><literal>globus-rvf-check</literal></emphasis> is 0 if all files specified on the
command line exist and have no parse errors.</simpara>
<simpara>The full set of command-line options to <emphasis role="strong"><literal>globus-rvf-check</literal></emphasis>
consists of:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-h, -help, --help</emphasis>
</term>
<listitem>
<simpara>
     Print command-line option summary and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-d</emphasis>
</term>
<listitem>
<simpara>
     Dump the RVF contents to stdout. In the output, Each file which is parsed will be prefixed by an RVF comment which contains the input filename. If not specified, <emphasis role="strong"><literal>globus-rvf-check</literal></emphasis> just prints a diagnostic message to standard output indicating whether the file could be parsed.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="gram5-cmd-globus-rvf-edit">
<title>GLOBUS-RVF-EDIT(8)</title>
<section id="_name_6">
<title>NAME</title>
<simpara>globus-rvf-edit - Edit a GRAM5 RSL validation file</simpara>
</section>
<section id="_synopsis_6">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-rvf-edit</literal></emphasis> [<literal>-h</literal> ]</simpara>
</section>
<section id="_description_6">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-rvf-edit</literal></emphasis> command is a utility which opens the default
editor on a specified RSL validation file, and then, when editing
completes, runs the <emphasis role="strong"><literal>globus-rvf-check</literal></emphasis> command to verify that the
RVF file syntax is correct. If a parse error occurs, the user will be
given an option to rerun the editor or discard the modifications.</simpara>
<simpara>The full set of command-line options to <emphasis role="strong"><literal>globus-rvf-edit</literal></emphasis> consists
of:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-h</emphasis>
</term>
<listitem>
<simpara>
     Print command-line option summary and exit
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-s</emphasis>
</term>
<listitem>
<simpara>
     Edit of the site-specific RVF file, which provides override values applicable to all LRMs installed on the system.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-l <emphasis>LRM</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Edit the site-specific LRM overrides for the LRM named by the <emphasis>LRM</emphasis> parameter to the option.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-f <emphasis>PATH</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Edit the RVF file located at <emphasis>PATH</emphasis>
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
</section>
<section id="globus-scheduler-event-generator">
<title>GLOBUS-SCHEDULER-EVENT-GENERATOR(8)</title>
<section id="_name_7">
<title>NAME</title>
<simpara>globus-scheduler-event-generator - Process LRM events into a common format for use with GRAM</simpara>
</section>
<section id="_synopsis_7">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> <literal>-s</literal> <emphasis>LRM</emphasis> <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-t</literal> <emphasis>TIMESTAMP</emphasis>] [<literal>-d</literal> <emphasis>DIRECTORY</emphasis>] <?asciidoc-br?>
<?asciidoc-br?>
 [<literal>-b</literal> ] [<literal>-p</literal> <emphasis>PIDFILE</emphasis>]</simpara>
</section>
<section id="_description_7">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> program processes
information from a local resource manager to generate LRM-independent
events which GRAM can use to track job state changes. Typically, the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> is started at system boot time
for all LRM adapters which have been installed. The only required
parameter to <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> is '-s ', which
indicates what LRM-specific module to load. A list of available modules
can be found by using the <emphasis role="strong"><literal>globus-scheduler-event-generator-admin
</literal></emphasis> command.</simpara>
<simpara>Other options control how the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>
program runs and where its output goes. These options are:</simpara>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong">-t <emphasis>TIMESTAMP</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Start processing events which start at <emphasis>TIMESTAMP</emphasis> in seconds since the
UNIX epoch. If not present, the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>
will process events from the time it was started, and not look for
historical events.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-d <emphasis>DIRECTORY</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Write the event log to files in <emphasis>DIRECTORY</emphasis>, instead of printing them to
standard output. Within <emphasis>DIRECTORY</emphasis>, logs will be named by the time when
they were created in <emphasis>YYYYMMDD</emphasis> format.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-b</emphasis>
</term>
<listitem>
<simpara>
     Run the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> program in the
background.
</simpara>
</listitem>
</varlistentry>
<varlistentry>
<term>
<emphasis role="strong">-p <emphasis>PIDFILE</emphasis></emphasis>
</term>
<listitem>
<simpara>
     Write the process-id of <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> to
<emphasis>PIDFILE</emphasis>.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_files_5">
<title>Files</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>/var/lib/globus/globus-seg-LRM/YYYYMMDD</literal></emphasis>
</term>
<listitem>
<simpara>
     LRM-independent event log generated by <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_see_also_3">
<title>See Also</title>
<simpara><literal>globus-scheduler-event-generator-admin(8)</literal>, <literal>globus-job-manager(8)</literal></simpara>
</section>
</section>
<section id="globus-scheduler-event-generator-admin">
<title>GLOBUS-SCHEDULER-EVENT-GENERATOR-ADMIN(8)</title>
<section id="_name_8">
<title>NAME</title>
<simpara>globus-scheduler-event-generator-admin - Manage SEG modules</simpara>
</section>
<section id="_synopsis_8">
<title>SYNOPSIS</title>
<simpara><emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> [<literal>-h</literal> ]</simpara>
</section>
<section id="_description_8">
<title>Description</title>
<simpara>The <emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> program manages SEG
modules which are used by the <emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>
to monitor a local resource manager or batch system for events. The
<emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> can list, enable, or
disable specific SEG modules. The <emphasis>-h</emphasis> command-line option shows a brief
usage message.</simpara>
<section id="_listing_seg_modules">
<title>Listing SEG Modules</title>
<simpara>The <emphasis>-l</emphasis> command-line option to
<emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> will cause it to list all
of the SEG modules which are available to be run by the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis>. In the output, the service
name will be followed by its status in brackets. Possible status strings
are <literal>ENABLED</literal> and <literal>DISABLED</literal>.</simpara>
</section>
<section id="_enabling_seg_modules">
<title>Enabling SEG Modules</title>
<simpara>The '-e ' command-line option to
<emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> will cause it to enable
the module so that the init script for the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> will run it.</simpara>
</section>
<section id="_disabling_seg_modules">
<title>Disabling SEG Modules</title>
<simpara>The '-d ' command-line option to
<emphasis role="strong"><literal>globus-scheduler-event-generator-admin</literal></emphasis> will cause it to disable
the module so that it will not be started by the
<emphasis role="strong"><literal>globus-scheduler-event-generator</literal></emphasis> init script.</simpara>
</section>
</section>
<section id="_files_6">
<title>Files</title>
<variablelist>
<varlistentry>
<term>
<emphasis role="strong"><literal>/etc/globus/scheduler-event-generator</literal></emphasis>
</term>
<listitem>
<simpara>
     Default location of enabled SEG modules.
</simpara>
</listitem>
</varlistentry>
</variablelist>
</section>
<section id="_see_also_4">
<title>See Also</title>
<simpara><literal>globus-scheduler-event-generator(8)</literal></simpara>
</section>
</section>
</chapter>
<chapter id="gram5-usage">
<title>Usage statistics collection by the Globus Alliance</title>
<section id="gram5-usage-stats">
<title>GRAM5-specific usage statistics</title>
<simpara>The following usage statistics are sent by default in a UDP packet (in
addition to the GRAM component code, packet version, timestamp, and
source IP address) at the end of each job.</simpara>
<itemizedlist>
<listitem>
<simpara>
Job Manager Session ID
</simpara>
</listitem>
<listitem>
<simpara>
dryrun used
</simpara>
</listitem>
<listitem>
<simpara>
RSL Host Count
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_IN</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_OUT</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Timestamp when job hit <literal>GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Job Failure Code
</simpara>
</listitem>
<listitem>
<simpara>
Number of times status is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times register is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times signal is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of times refresh is called
</simpara>
</listitem>
<listitem>
<simpara>
Number of files named in file_clean_up RSL
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged in (including executable, stdin) from gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged into the GASS cache from gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to http servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to https servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to ftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Number of files being staged out (including stdout and stderr) to gsiftp servers
</simpara>
</listitem>
<listitem>
<simpara>
Bitmask of used RSL attributes (values are 2^id from the gram5_rsl_attributes table)
</simpara>
</listitem>
<listitem>
<simpara>
Number of times unregister is called
</simpara>
</listitem>
<listitem>
<simpara>
Value of the <literal>count</literal> RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
Comma-separated list of string names of other RSL attributes not in the set defined in <literal>globus-gram-job-manager.rvf</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Job type string
</simpara>
</listitem>
<listitem>
<simpara>
Number of times the job was restarted
</simpara>
</listitem>
<listitem>
<simpara>
Total number of state callbacks sent to all clients for this job
</simpara>
</listitem>
</itemizedlist>
<simpara>The following information can be sent as well in a job status packet but
it is not sent unless explicitly enabled by the system administrator:</simpara>
<itemizedlist>
<listitem>
<simpara>
Value of the executable RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
Value of the arguments RSL attribute
</simpara>
</listitem>
<listitem>
<simpara>
IP adddress and port of the client that submitted the job
</simpara>
</listitem>
<listitem>
<simpara>
User DN of the client that submitted the job
</simpara>
</listitem>
</itemizedlist>
<simpara>In addition to job-related status, the job manager sends information
periodically about its execution status. The following information is
sent by default in a UDP packet (in addition to the GRAM component code,
packet version, timestamp, and source IP address) at job manager start
and every 1 hour during the job manager lifetime:</simpara>
<itemizedlist>
<listitem>
<simpara>
Job Manager Start Time
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Session ID
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Status Time
</simpara>
</listitem>
<listitem>
<simpara>
Job Manager Version
</simpara>
</listitem>
<listitem>
<simpara>
LRM
</simpara>
</listitem>
<listitem>
<simpara>
Poll used
</simpara>
</listitem>
<listitem>
<simpara>
Audit used
</simpara>
</listitem>
<listitem>
<simpara>
Number of restarted jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of failed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of canceled jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of completed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Total number of dry-run jobs
</simpara>
</listitem>
<listitem>
<simpara>
Peak number of concurrently managed jobs
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently being managed
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the UNSUBMITTED state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the STAGE_IN state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the PENDING state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the ACTIVE state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the STAGE_OUT state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the FAILED state
</simpara>
</listitem>
<listitem>
<simpara>
Number of jobs currently in the DONE state
</simpara>
</listitem>
</itemizedlist>
<simpara>Also, please see our
<ulink url="/toolkit/docs/latest-stable/Usage_Stats.html">policy statement</ulink> on
the collection of usage statistics.</simpara>
</section>
</chapter>
</book>
